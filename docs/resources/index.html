<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.8.1" />
<title>paroxython.resources API documentation</title>
<meta name="description" content="Specifications
- [Expressions](#expressions)
- [Literals](#literals)
- [Feature `literal`](#feature-literal)
- [Feature …" />
<link href='https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.0/normalize.min.css' rel='stylesheet'>
<link href='https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/8.0.0/sanitize.min.css' rel='stylesheet'>
<link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" rel="stylesheet">
<style>.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script async src="https://cse.google.com/cse.js?cx=017837193012385208679:pey8ky8gdqw"></script>
<style>.gsc-control-cse {padding:0 !important;margin-top:1em}</style>
<script async src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS_CHTML'></script>
<style>.homelink{display:block}.homelink:hover{color:inherit}.homelink img{margin:auto;margin-bottom:.3em}</style>
<link rel="canonical" href="https://pdoc3.github.io/pdoc/doc/paroxython/resources/">
<link rel="icon" href="https://pdoc.github.io/pdoc/logo.png">
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>paroxython.resources</code></h1>
</header>
<section id="section-intro">
<h1 id="specifications">Specifications</h1>
<ul>
<li><a href="#expressions">Expressions</a></li>
<li><a href="#literals">Literals</a><ul>
<li><a href="#feature-literal">Feature <code>literal</code></a></li>
<li><a href="#feature-empty_literal">Feature <code>empty_literal</code></a></li>
</ul>
</li>
<li><a href="#subscripts">Subscripts</a><ul>
<li><a href="#feature-index">Feature <code>index</code></a></li>
<li><a href="#feature-nested_index">Feature <code>nested_index</code> (SQL)</a></li>
<li><a href="#feature-index_arithmetic">Feature <code>index_arithmetic</code></a></li>
<li><a href="#feature-negative_index">Feature <code>negative_index</code></a></li>
<li><a href="#feature-slice_lower">Feature <code>slice_lower</code></a></li>
<li><a href="#feature-slice_upper">Feature <code>slice_upper</code></a></li>
<li><a href="#feature-slice_step">Feature <code>slice_step</code></a></li>
<li><a href="#feature-slice">Feature <code>slice</code> (SQL)</a></li>
</ul>
</li>
<li><a href="#operators">Operators</a><ul>
<li><a href="#feature-unary_operator">Feature <code>unary_operator</code></a></li>
<li><a href="#feature-binary_operator">Feature <code>binary_operator</code></a></li>
<li><a href="#feature-conditional_expression">Feature <code>conditional_expression</code></a></li>
<li><a href="#feature-concatenation_operatorreplication_operator">Feature <code>concatenation_operator|replication_operator</code> (SQL)</a></li>
<li><a href="#feature-string_formatting_operator">Feature <code>string_formatting_operator</code> (SQL)</a></li>
<li><a href="#feature-addition_operator">Feature <code>addition_operator</code> (SQL)</a></li>
<li><a href="#feature-multiplication_operator">Feature <code>multiplication_operator</code> (SQL)</a></li>
<li><a href="#feature-modulo_operator">Feature <code>modulo_operator</code> (SQL)</a></li>
</ul>
</li>
<li><a href="#boolean-expressions">Boolean expressions</a><ul>
<li><a href="#feature-boolean_operator">Feature <code>boolean_operator</code></a></li>
<li><a href="#feature-comparison_operator">Feature <code>comparison_operator</code></a></li>
<li><a href="#feature-yoda_comparison">Feature <code>yoda_comparison</code> (SQL)</a></li>
<li><a href="#feature-chained_comparison">Feature <code>chained_comparison</code></a></li>
<li><a href="#feature-chained_equalitieschained_inequalities">Feature <code>chained_equalities|chained_inequalities</code> (SQL)</a></li>
<li><a href="#feature-divisibility_test">Feature <code>divisibility_test</code></a></li>
<li><a href="#feature-short_circuit">Feature <code>short_circuit</code></a></li>
</ul>
</li>
<li><a href="#calls">Calls</a><ul>
<li><a href="#generalities">Generalities</a></li>
<li><a href="#feature-call_argument">Feature <code>call_argument</code></a></li>
<li><a href="#feature-composition">Feature <code>composition</code></a></li>
<li><a href="#calls-of-the-form-callablearguments">Calls of the form <code>callable(arguments)</code></a></li>
<li><a href="#feature-free_call">Feature <code>free_call</code></a></li>
<li><a href="#feature-free_call_without_result">Feature <code>free_call_without_result</code></a></li>
<li><a href="#feature-free_call_without_arguments">Feature <code>free_call_without_arguments</code></a></li>
<li><a href="#feature-free_tail_call">Feature <code>free_tail_call</code></a></li>
<li><a href="#feature-internal_free_call">Feature <code>internal_free_call</code> (SQL)</a></li>
<li><a href="#feature-external_free_call">Feature <code>external_free_call</code> (SQL)</a></li>
<li><a href="#calls-of-the-form-identifiercallablearguments">Calls of the form <code>identifier.callable(arguments)</code></a></li>
<li><a href="#feature-member_call">Feature <code>member_call</code></a></li>
<li><a href="#feature-member_call_without_result">Feature <code>member_call_without_result</code></a></li>
<li><a href="#feature-member_call_object">Feature <code>member_call_object</code></a></li>
<li><a href="#feature-method_chaining">Feature <code>method_chaining</code></a></li>
</ul>
</li>
<li><a href="#iterables">Iterables</a><ul>
<li><a href="#feature-range">Feature <code>range</code> (SQL)</a></li>
<li><a href="#feature-comprehension">Feature <code>comprehension</code></a></li>
<li><a href="#feature-comprehension_for_count">Feature <code>comprehension_for_count</code></a></li>
<li><a href="#feature-filtered_comprehension">Feature <code>filtered_comprehension</code></a></li>
</ul>
</li>
<li><a href="#various">Various</a><ul>
<li><a href="#feature-lambda_function">Feature <code>lambda_function</code></a></li>
<li><a href="#feature-f_string">Feature <code>f_string</code></a></li>
</ul>
</li>
<li><a href="#statements">Statements</a></li>
<li><a href="#bindings">Bindings</a><ul>
<li><a href="#feature-assignment">Feature <code>assignment</code></a></li>
<li><a href="#feature-unbinding">Feature <code>unbinding</code></a></li>
<li><a href="#feature-single_assignment">Feature <code>single_assignment</code></a></li>
<li><a href="#feature-parallel_assignment">Feature <code>parallel_assignment</code></a></li>
<li><a href="#feature-augmented_assignment">Feature <code>augmented_assignment</code></a></li>
<li><a href="#feature-subscript_augmented_assignment">Feature <code>subscript_augmented_assignment</code></a></li>
<li><a href="#feature-chained_assignment">Feature <code>chained_assignment</code></a></li>
<li><a href="#feature-assignment_lhs_identifier">Feature <code>assignment_lhs_identifier</code></a></li>
<li><a href="#feature-assignment_rhs_atom">Feature <code>assignment_rhs_atom</code></a></li>
<li><a href="#assignment-idioms">Assignment idioms</a></li>
<li><a href="#feature-update_by_assignment">Feature <code>update_by_assignment</code> (SQL)</a></li>
<li><a href="#feature-update_by_augmented_assignment">Feature <code>update_by_augmented_assignment</code> (SQL)</a></li>
<li><a href="#feature-update_by_member_call">Feature <code>update_by_member_call</code> (SQL)</a></li>
<li><a href="#feature-update">Feature <code>update</code> (SQL)</a></li>
<li><a href="#feature-update_by_assignment_with">Feature <code>update_by_assignment_with</code> (SQL)</a></li>
<li><a href="#feature-update_by_augmented_assignment_with">Feature <code>update_by_augmented_assignment_with</code> (SQL)</a></li>
<li><a href="#feature-update_by_member_call_with">Feature <code>update_by_member_call_with</code> (SQL)</a></li>
<li><a href="#feature-update_with">Feature <code>update_with</code> (SQL)</a></li>
<li><a href="#feature-increment">Feature <code>increment</code></a></li>
<li><a href="#feature-swap">Feature <code>swap</code></a></li>
<li><a href="#feature-slide">Feature <code>slide</code></a></li>
<li><a href="#feature-negate">Feature <code>negate</code></a></li>
<li><a href="#feature-verbose_conditional_assignment">Feature <code>verbose_conditional_assignment</code></a></li>
<li><a href="#feature-compact_conditional_assignment">Feature <code>compact_conditional_assignment</code></a></li>
<li><a href="#feature-corrective_conditional_assignment">Feature <code>corrective_conditional_assignment</code></a></li>
</ul>
</li>
<li><a href="#function-definitions">Function definitions</a><ul>
<li><a href="#interface">Interface</a></li>
<li><a href="#feature-function">Feature <code>function</code></a></li>
<li><a href="#feature-return">Feature <code>return</code></a></li>
<li><a href="#feature-yield">Feature <code>yield</code></a></li>
<li><a href="#feature-generator">Feature <code>generator</code> (SQL)</a></li>
<li><a href="#feature-function_returning_something">Feature <code>function_returning_something</code> (SQL)</a></li>
<li><a href="#feature-function_returning_nothing">Feature <code>function_returning_nothing</code> (SQL)</a></li>
<li><a href="#feature-function_argument">Feature <code>function_argument</code></a></li>
<li><a href="#feature-function_argument_flavor">Feature <code>function_argument_flavor</code></a></li>
<li><a href="#feature-function_without_arguments">Feature <code>function_without_arguments</code></a></li>
<li><a href="#feature-decorated_function">Feature <code>decorated_function</code></a></li>
<li><a href="#feature-function_decorator">Feature <code>function_decorator</code></a></li>
<li><a href="#nesting">Nesting</a></li>
<li><a href="#feature-nested_function">Feature <code>nested_function</code></a></li>
<li><a href="#feature-closure">Feature <code>closure</code> (SQL)</a></li>
<li><a href="#feature-higher-order-function">Feature <code>higher-order function</code> (SQL)</a></li>
<li><a href="#recursion">Recursion</a></li>
<li><a href="#feature-recursive_function">Feature <code>recursive_function</code> (SQL)</a></li>
<li><a href="#feature-deeply_recursive_function">Feature <code>deeply_recursive_function</code> (SQL)</a></li>
<li><a href="#feature-body_recursive_function">Feature <code>body_recursive_function</code> (SQL)</a></li>
<li><a href="#feature-tail_recursive_function">Feature <code>tail_recursive_function</code> (SQL)</a></li>
</ul>
</li>
<li><a href="#conditionals">Conditionals</a><ul>
<li><a href="#feature-if">Feature <code>if</code></a></li>
<li><a href="#feature-if_test_atom">Feature <code>if_test_atom</code></a></li>
<li><a href="#feature-if_then_branch">Feature <code>if_then_branch</code></a></li>
<li><a href="#feature-if_elif_branch">Feature <code>if_elif_branch</code></a></li>
<li><a href="#feature-if_else_branch">Feature <code>if_else_branch</code></a></li>
<li><a href="#feature-if_without_else">Feature <code>if_without_else</code> (SQL)</a></li>
<li><a href="#feature-if_guard">Feature <code>if_guard</code> (SQL)</a></li>
<li><a href="#feature-nested_if">Feature <code>nested_if</code> (SQL)</a></li>
</ul>
</li>
<li><a href="#iterations">Iterations</a><ul>
<li><a href="#iteration-keywords">Iteration keywords</a></li>
<li><a href="#feature-for">Feature <code>for</code></a></li>
<li><a href="#feature-while">Feature <code>while</code></a></li>
<li><a href="#feature-loop">Feature <code>loop</code> (SQL)</a></li>
<li><a href="#feature-break">Feature <code>break</code></a></li>
<li><a href="#feature-loop_else">Feature <code>loop_else</code></a></li>
<li><a href="#feature-continue">Feature <code>continue</code></a></li>
<li><a href="#sequential-loops">Sequential loops</a></li>
<li><a href="#feature-for_each">Feature <code>for_each</code></a></li>
<li><a href="#feature-for_range">Feature <code>for_range</code> (SQL)</a></li>
<li><a href="#feature-for_indexes_elements">Feature <code>for_indexes_elements</code></a></li>
<li><a href="#feature-for_indexes">Feature <code>for_indexes</code></a></li>
<li><a href="#feature-nested_for">Feature <code>nested_for</code> (SQL)</a></li>
<li><a href="#feature-triangular_nested_for">Feature <code>triangular_nested_for</code></a></li>
<li><a href="#feature-square_nested_for">Feature <code>square_nested_for</code></a></li>
<li><a href="#non-sequential-loops">Non-sequential loops</a></li>
<li><a href="#feature-infinite_while">Feature <code>infinite_while</code></a></li>
<li><a href="#loop-exit">Loop exit</a></li>
<li><a href="#feature-loop_with_raise">Feature <code>loop_with_raise</code> (SQL)</a></li>
<li><a href="#feature-loop_with_return">Feature <code>loop_with_return</code> (SQL)</a></li>
<li><a href="#feature-loop_with_break">Feature <code>loop_with_break</code> (SQL)</a></li>
<li><a href="#feature-loop_with_early_exit">Feature <code>loop_with_early_exit</code> (SQL)</a></li>
<li><a href="#feature-loop_with_else">Feature <code>loop_with_else</code> (SQL)</a></li>
<li><a href="#feature-loop_with_late_exit">Feature <code>loop_with_late_exit</code> (SQL)</a></li>
</ul>
</li>
<li><a href="#various-statements">Various statements</a><ul>
<li><a href="#feature-assertion">Feature <code>assertion</code></a></li>
<li><a href="#feature-null_operation">Feature <code>null_operation</code></a></li>
<li><a href="#exceptions">Exceptions</a></li>
<li><a href="#feature-try">Feature <code>try</code></a></li>
<li><a href="#feature-raise">Feature <code>raise</code></a></li>
<li><a href="#feature-except">Feature <code>except</code></a></li>
<li><a href="#feature-try_raisetry_except">Feature <code>try_raise|try_except</code> (SQL)</a></li>
</ul>
</li>
<li><a href="#class-definitions">Class definitions</a><ul>
<li><a href="#feature-class">Feature <code>class</code></a></li>
<li><a href="#feature-method">Feature <code>method</code> (SQL)</a></li>
<li><a href="#feature-instance_methodclass_methodstatic_method">Feature <code>instance_method|class_method|static_method</code> (SQL)</a></li>
</ul>
</li>
<li><a href="#modules">Modules</a><ul>
<li><a href="#feature-import_module">Feature <code>import_module</code></a></li>
<li><a href="#feature-import_name">Feature <code>import_name</code></a></li>
<li><a href="#feature-import">Feature <code>import</code> (SQL)</a></li>
</ul>
</li>
<li><a href="#iterative-patterns">Iterative patterns</a></li>
<li><a href="#loops">Loops</a><ul>
<li><a href="#feature-count_elementscount_states">Feature <code>count_elements|count_states</code> (SQL)</a></li>
</ul>
</li>
<li><a href="#sequential-loops-1">Sequential loops</a><ul>
<li><a href="#sequential-loops-with-late-exit">Sequential loops with late exit</a></li>
<li><a href="#feature-accumulate_elements">Feature <code>accumulate_elements</code> (SQL)</a></li>
<li><a href="#feature-accumulate_some_elements">Feature <code>accumulate_some_elements</code> (SQL)</a></li>
<li><a href="#feature-accumulate_all_elements">Feature <code>accumulate_all_elements</code> (SQL)</a></li>
<li><a href="#feature-find_best_element">Feature <code>find_best_element</code> (SQL)</a></li>
<li><a href="#sequential-loops-with-early-exit">Sequential loops with early exit</a></li>
<li><a href="#feature-universal_quantificationexistential_quantification">Feature <code>universal_quantification|existential_quantification</code> (SQL)</a></li>
<li><a href="#feature-find_first_element">Feature <code>find_first_element</code> (SQL)</a></li>
</ul>
</li>
<li><a href="#non-sequential-loops-1">Non-sequential loops</a><ul>
<li><a href="#non-sequential-infinite-loops">Non-sequential infinite loops</a></li>
<li><a href="#feature-get_valid_input">Feature <code>get_valid_input</code> (SQL)</a></li>
<li><a href="#feature-count_inputs">Feature <code>count_inputs</code> (SQL)</a></li>
<li><a href="#feature-accumulate_inputs">Feature <code>accumulate_inputs</code> (SQL)</a></li>
</ul>
</li>
<li><a href="#programs">Programs</a><ul>
<li><a href="#feature-whole_span">Feature <code>whole_span</code></a></li>
<li><a href="#feature-topic">Feature <code>topic</code></a></li>
</ul>
</li>
<li><a href="#suggestions">Suggestions</a></li>
<li><a href="#assignments">Assignments</a><ul>
<li><a href="#feature-suggest_augmented_assignment">Feature <code>suggest_augmented_assignment</code></a></li>
</ul>
</li>
<li><a href="#expressions-1">Expressions</a><ul>
<li><a href="#feature-suggest_comparison_chaining">Feature <code>suggest_comparison_chaining</code></a></li>
<li><a href="#feature-suggest_constant_definition">Feature <code>suggest_constant_definition</code></a></li>
</ul>
</li>
<li><a href="#subroutines">Subroutines</a><ul>
<li><a href="#feature-suggest_condition_return">Feature <code>suggest_condition_return</code></a></li>
</ul>
</li>
</ul>
<h1 id="expressions">Expressions</h1>
<h2 id="literals">Literals</h2>
<hr>
<h4 id="feature-literal">Feature <code>literal</code></h4>
<p>Match <code>None</code>, <code>True</code>, <code>False</code>, and literal numbers, strings, tuples, dictionaries, sets and lists. For the first four, suffix with the literal value. For the others, there is no guarantee that the value is a constant.</p>
<p>Further categorization of numeric literals does not require to construct a sophisticated regular expression: the heavy lifting is already made in the given AST, which stores them under normalized form:
- integer literals are just sequences of digits, with an optional minus sign <code>-</code>;
- floating point literals consist of digits, minus signs and at least one symbol among <code>.</code> and <code>e</code>;
- imaginary literals contain the same symbols as floating point literals, plus a mandatory trailing symbol <code>j</code>.</p>
<h5 id="derivations">Derivations</h5>
<p><a href="#feature-concatenation_operatorreplication_operator">⬇️ feature <code>concatenation_operator|replication_operator</code></a>
<a href="#feature-string_formatting_operator">⬇️ feature <code>string_formatting_operator</code></a>
<a href="#feature-yoda_comparison">⬇️ feature <code>yoda_comparison</code></a></p>
<h5 id="specification">Specification</h5>
<pre><code class="re">           ^(.*)/_type=
(   # match True, False and None
                       NameConstant
\n(?:\1.+\n)*?\1/_pos=(?P&lt;POS&gt;.+)
\n(?:\1.+\n)*?\1/value=(?P&lt;SUFFIX&gt;.+)
|   # match numbers
                       Num
\n(?:\1.+\n)*?\1/_pos=(?P&lt;POS&gt;.+)
\n(?:\1.+\n)*?\1/n=(?P&lt;SUFFIX&gt;.+)
|   # match strings and containers
                       (?P&lt;SUFFIX&gt;Str|Tuple|Dict|Set|List)
\n(?:\1.+\n)*?\1/_pos=(?P&lt;POS&gt;.+)
)
</code></pre>
<h5 id="example">Example</h5>
<pre><code class="python">1   42
2   42.0
3   &quot;&quot;
4   (1, 1)
5   []
6   {}
7   {1, 2, 3}
8   True and False
9   None
10  {a, b, c}
11  [1, 2, 3]
12  -42
13  [1, {2, 3}, {&quot;a&quot;: &quot;b&quot;, &quot;c&quot;: &quot;d&quot;}]
14  [foo(4)]
15  {&quot;foo&quot;: &quot;bar&quot;}
</code></pre>
<h5 id="matches">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>literal:42</code></td>
<td align="left">1</td>
</tr>
<tr>
<td align="left"><code>literal:42.0</code></td>
<td align="left">2</td>
</tr>
<tr>
<td align="left"><code>literal:Str</code></td>
<td align="left">3, 13, 13, 13, 13, 15, 15</td>
</tr>
<tr>
<td align="left"><code>literal:1</code></td>
<td align="left">4, 4, 7, 11, 13</td>
</tr>
<tr>
<td align="left"><code>literal:Tuple</code></td>
<td align="left">4</td>
</tr>
<tr>
<td align="left"><code>literal:List</code></td>
<td align="left">5, 11, 13, 14</td>
</tr>
<tr>
<td align="left"><code>literal:Dict</code></td>
<td align="left">6, 13, 15</td>
</tr>
<tr>
<td align="left"><code>literal:2</code></td>
<td align="left">7, 11, 13</td>
</tr>
<tr>
<td align="left"><code>literal:3</code></td>
<td align="left">7, 11, 13</td>
</tr>
<tr>
<td align="left"><code>literal:Set</code></td>
<td align="left">7, 10, 13</td>
</tr>
<tr>
<td align="left"><code>literal:False</code></td>
<td align="left">8</td>
</tr>
<tr>
<td align="left"><code>literal:True</code></td>
<td align="left">8</td>
</tr>
<tr>
<td align="left"><code>literal:None</code></td>
<td align="left">9</td>
</tr>
<tr>
<td align="left"><code>literal:-42</code></td>
<td align="left">12</td>
</tr>
<tr>
<td align="left"><code>literal:4</code></td>
<td align="left">14</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-empty95literal">Feature <code>empty_literal</code></h4>
<p>Match <code>""</code> (empty string), <code>()</code> (empty tuple), <code>[]</code> (empty list) and <code>{}</code> (empty dictionary).</p>
<p>Generally speaking, all <em>falsey</em> constants (i.e., whose <a href="https://docs.python.org/3/library/stdtypes.html#truth-value-testing">truth value</a> is <code>False</code>) can be recognized by an existing feature:
- <code>None</code>: <code>literal:None</code>;
- <code>False</code>: <code>literal:False</code>;
- null integer: <code>literal:0</code>;
- null floating-point number: <code>literal:0.0</code>;
- null complex number: <code>literal:0j</code>;
- empty string: <code>free_call_without_arguments:str</code> or <code>empty_literal:Str</code>;
- empty tuple: <code>free_call_without_arguments:tuple</code> or <code>empty_literal:Tuple</code>;
- empty list: <code>free_call_without_arguments:list</code> or <code>empty_literal:List</code>;
- empty dictionary: <code>free_call_without_arguments:dict</code> or <code>empty_literal:Dict</code>;
- empty set: <code>free_call_without_arguments:set</code>;
- empty range: <code>range:0</code>.</p>
<h5 id="specification_1">Specification</h5>
<pre><code class="re">           ^(.*)/_type=
(
                       (?P&lt;SUFFIX&gt;Str)
\n(?:\1.+\n)* \1/_pos=(?P&lt;POS&gt;.+)
\n(?:\1.+\n)* \1/s=''
|
                       (?P&lt;SUFFIX&gt;Tuple|List|Dict)
\n(?:\1.+\n)* \1/_pos=(?P&lt;POS&gt;.+)
\n(?:\1.+\n)* \1/(elts|keys)/length=0
)
</code></pre>
<h5 id="example_1">Example</h5>
<pre><code class="python">1   &quot;&quot;
2   ()
3   []
4   {}
</code></pre>
<h5 id="matches_1">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>empty_literal:Str</code></td>
<td align="left">1</td>
</tr>
<tr>
<td align="left"><code>empty_literal:Tuple</code></td>
<td align="left">2</td>
</tr>
<tr>
<td align="left"><code>empty_literal:List</code></td>
<td align="left">3</td>
</tr>
<tr>
<td align="left"><code>empty_literal:Dict</code></td>
<td align="left">4</td>
</tr>
</tbody>
</table>
<hr>
<h2 id="subscripts">Subscripts</h2>
<hr>
<h4 id="feature-index">Feature <code>index</code></h4>
<p>Match an index in a sequence type or a key in a dictionary type, and suffix it by either an integer or an identifier if it is atomic, or <code>"_"</code> otherwise.</p>
<h5 id="derivations_1">Derivations</h5>
<p><a href="#feature-nested_index">⬇️ feature <code>nested_index</code></a></p>
<h5 id="specification_2">Specification</h5>
<pre><code class="re">           ^(.*)(?&lt;!/annotation)/_type=Subscript
\n(?:\1.+\n)*?\1/_pos=(?P&lt;POS&gt;.+)
\n(?:\1.+\n)*?\1/slice/_type=Index
\n            \1/slice/value
(
                            /_type=Name
\n(?:\1.+\n)* \1/slice/value/id=(?P&lt;SUFFIX&gt;.+)
|
                            /_type=Num
\n(?:\1.+\n)* \1/slice/value/n=(?P&lt;SUFFIX&gt;.+)
|
                            /(?P&lt;SUFFIX&gt;_)type=.+
)$
</code></pre>
<h5 id="example_2">Example</h5>
<pre><code class="python">1   a[42]
2   dictionary[key]
3   a[42:-1] # no match
4   a[i + 1]
5   def abs(l: List[int]) -&gt; int: # no match
6       pass
</code></pre>
<h5 id="matches_2">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>index:42</code></td>
<td align="left">1</td>
</tr>
<tr>
<td align="left"><code>index:key</code></td>
<td align="left">2</td>
</tr>
<tr>
<td align="left"><code>index:_</code></td>
<td align="left">4</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-nested95index">Feature <code>nested_index</code></h4>
<p>In pure Python, multidimensionnal arrays are lists of lists. Thus, accessing a cell (<em>i</em>, <em>j</em>) of a matrix <em>m</em> is done first
by accessing the <em>i</em>-th list of <em>m</em> (<code>m[i]</code>), then the <em>j</em>-th cell of this list (<code>m[i][j]</code>). The length of this index concatenation gives the dimension (or <em>shape</em>) of the array.</p>
<h5 id="derivations_2">Derivations</h5>
<p><a href="#feature-index">⬆️ feature <code>index</code></a></p>
<h5 id="specification_3">Specification</h5>
<pre><code class="sql">SELECT &quot;nested_index&quot;,
       count(*) + 1,
       i2.span,
       i2.path
FROM t_index i1
JOIN t_index i2 ON (i2.path GLOB i1.path || &quot;*-&quot;)
WHERE NOT EXISTS
    (SELECT *
     FROM t_index i0
     WHERE (i1.path REGEXP i0.path || &quot;\d+-$&quot;) )
GROUP BY i1.path
ORDER BY i1.path
</code></pre>
<h5 id="example_3">Example</h5>
<pre><code class="python">1   a[i] # no match
2   a[i][j]
3   a[i][j][k]
4   a[i][j][k][l]
5   a[i][j][k][l][m]
6   a[i][j][k][l][m][n]
7   a[i][j] + b[i][j][k]
</code></pre>
<h5 id="matches_3">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>nested_index:2</code></td>
<td align="left">2, 7</td>
</tr>
<tr>
<td align="left"><code>nested_index:3</code></td>
<td align="left">3, 7</td>
</tr>
<tr>
<td align="left"><code>nested_index:4</code></td>
<td align="left">4</td>
</tr>
<tr>
<td align="left"><code>nested_index:5</code></td>
<td align="left">5</td>
</tr>
<tr>
<td align="left"><code>nested_index:6</code></td>
<td align="left">6</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-index95arithmetic">Feature <code>index_arithmetic</code></h4>
<h5 id="specification_4">Specification</h5>
<pre><code class="re">           ^(.*)/_type=Subscript
\n(?:\1.+\n)*?\1/slice/_type=Index
\n(?:\1.+\n)*?\1/slice/value/_type=BinOp
\n(?:\1.+\n)*?\1/slice/value/_pos=(?P&lt;POS&gt;.+)
</code></pre>
<h5 id="example_4">Example</h5>
<pre><code class="python">1   a[i + j]
2   a[i] # no match
</code></pre>
<h5 id="matches_4">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>index_arithmetic</code></td>
<td align="left">1</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-negative95index">Feature <code>negative_index</code></h4>
<h5 id="specification_5">Specification</h5>
<pre><code class="re">           ^(.*)/_type=Subscript
\n(?:\1.+\n)*?\1/slice/_type=Index
(   # A negative number
\n(?:\1.+\n)*?\1/slice/value/_type=Num
\n(?:\1.+\n)*?\1/slice/value/_pos=(?P&lt;POS&gt;.+)
\n(?:\1.+\n)*?\1/slice/value/n=(?P&lt;SUFFIX&gt;-\d+)
|   # A negated non-literal expression
\n(?:\1.+\n)*?\1/slice/value/_pos=(?P&lt;POS&gt;.+)
\n(?:\1.+\n)*?\1/slice/value/op/_type=USub
|   # A binary operation whose left operand is negated
\n(?:\1.+\n)*?\1/slice/value/_type=BinOp
\n(?:\1.+\n)*?\1/slice/value/_pos=(?P&lt;POS&gt;.+)
\n(?:\1.+\n)*?\1/slice/value/left/_type=UnaryOp
\n(?:\1.+\n)*?\1/slice/value/left/op/_type=USub
|   # A complemented expression
\n(?:\1.+\n)*?\1/slice/value/_type=UnaryOp
\n(?:\1.+\n)*?\1/slice/value/_pos=(?P&lt;POS&gt;.+)
\n(?:\1.+\n)*?\1/slice/value/op/_type=Invert
)
</code></pre>
<h5 id="example_5">Example</h5>
<pre><code class="python">1   a[-1]
2   a[-i]
3   a[len(a) - i] # LIMITATION: no match
4   a[-i - 1]
5   a[~i]
</code></pre>
<p><em>Remark.</em> In line 4, <code>~i</code> evaluates to <code>-i - 1</code> (bitwise complement of <code>i</code>). Line 3 could be rewritten as <code>a[-i]</code>.</p>
<h5 id="matches_5">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>negative_index:-1</code></td>
<td align="left">1</td>
</tr>
<tr>
<td align="left"><code>negative_index</code></td>
<td align="left">2, 4, 5</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-slice95lower">Feature <code>slice_lower</code></h4>
<p>Match the lower bound of a slice, and suffix it by either <code>""</code> if it is omitted, an integer or an identifier if is is atomic, or <code>"_"</code> otherwise.</p>
<h5 id="derivations_3">Derivations</h5>
<p><a href="#feature-slice">⬇️ feature <code>slice</code></a></p>
<h5 id="specification_6">Specification</h5>
<pre><code class="re">           ^(.*)/_type=Subscript
\n(?:\1.+\n)*?\1/_pos=(?P&lt;POS&gt;.+)
\n(?:\1.+\n)* \1/slice/lower
(
                            =None(?P&lt;SUFFIX&gt;)
|
                            /_type=Name
\n(?:\1.+\n)* \1/slice/lower/id=(?P&lt;SUFFIX&gt;.+)
|
                            /_type=Num
\n(?:\1.+\n)* \1/slice/lower/n=(?P&lt;SUFFIX&gt;.+)
|
                            /(?P&lt;SUFFIX&gt;_)type=.+
)$
</code></pre>
<h5 id="example_6">Example</h5>
<pre><code class="python">1   a[:stop1]
2   a[start2:]
3   a[start3:stop3]
4   a[start4:stop4:step4]
5   a[foo(bar):fizz(buzz)]
6   a[0:2 * n:100]
7   a[:]
8   a[::2]
9   a[::-1]
</code></pre>
<h5 id="matches_6">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>slice_lower:</code></td>
<td align="left">1, 7, 8, 9</td>
</tr>
<tr>
<td align="left"><code>slice_lower:start2</code></td>
<td align="left">2</td>
</tr>
<tr>
<td align="left"><code>slice_lower:start3</code></td>
<td align="left">3</td>
</tr>
<tr>
<td align="left"><code>slice_lower:start4</code></td>
<td align="left">4</td>
</tr>
<tr>
<td align="left"><code>slice_lower:_</code></td>
<td align="left">5</td>
</tr>
<tr>
<td align="left"><code>slice_lower:0</code></td>
<td align="left">6</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-slice95upper">Feature <code>slice_upper</code></h4>
<p>Match the upper bound of a slice, and suffix it by either <code>""</code> if it is omitted, an integer or an identifier if it is atomic, or <code>"_"</code> otherwise.</p>
<h5 id="derivations_4">Derivations</h5>
<p><a href="#feature-slice">⬇️ feature <code>slice</code></a></p>
<h5 id="specification_7">Specification</h5>
<pre><code class="re">           ^(.*)/_type=Subscript
\n(?:\1.+\n)*?\1/_pos=(?P&lt;POS&gt;.+)
\n(?:\1.+\n)* \1/slice/upper
(
                            =None(?P&lt;SUFFIX&gt;)
|
                            /_type=Name
\n(?:\1.+\n)* \1/slice/upper/id=(?P&lt;SUFFIX&gt;.+)
|
                            /_type=Num
\n(?:\1.+\n)* \1/slice/upper/n=(?P&lt;SUFFIX&gt;.+)
|
                            /(?P&lt;SUFFIX&gt;_)type=.+
)$
</code></pre>
<h5 id="example_7">Example</h5>
<pre><code class="python">1   a[:stop1]
2   a[start2:]
3   a[start3:stop3]
4   a[start4:stop4:step4]
5   a[foo(bar):fizz(buzz)]
6   a[0:2 * n:100]
7   a[:]
8   a[::2]
9   a[::-1]
</code></pre>
<h5 id="matches_7">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>slice_upper:stop1</code></td>
<td align="left">1</td>
</tr>
<tr>
<td align="left"><code>slice_upper:</code></td>
<td align="left">2, 7, 8, 9</td>
</tr>
<tr>
<td align="left"><code>slice_upper:stop3</code></td>
<td align="left">3</td>
</tr>
<tr>
<td align="left"><code>slice_upper:stop4</code></td>
<td align="left">4</td>
</tr>
<tr>
<td align="left"><code>slice_upper:_</code></td>
<td align="left">5, 6</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-slice95step">Feature <code>slice_step</code></h4>
<p>Match the step of a slice, and suffix it by either <code>""</code> if it is omitted, an integer or an identifier if it is atomic, or <code>"_"</code> otherwise.</p>
<h5 id="derivations_5">Derivations</h5>
<p><a href="#feature-slice">⬇️ feature <code>slice</code></a></p>
<h5 id="specification_8">Specification</h5>
<pre><code class="re">           ^(.*)/_type=Subscript
\n(?:\1.+\n)*?\1/_pos=(?P&lt;POS&gt;.+)
\n(?:\1.+\n)*?\1/slice/step
(
                            =None(?P&lt;SUFFIX&gt;)
|
                            /_type=Name
\n(?:\1.+\n)* \1/slice/step/id=(?P&lt;SUFFIX&gt;.+)
|
                            /_type=Num
\n(?:\1.+\n)* \1/slice/step/n=(?P&lt;SUFFIX&gt;.+)
|
                            /(?P&lt;SUFFIX&gt;_)type=.+
)$
</code></pre>
<h5 id="example_8">Example</h5>
<pre><code class="python">1   a[:stop1]
2   a[start2:]
3   a[start3:stop3]
4   a[start4:stop4:step4]
5   a[foo(bar):fizz(buzz)]
6   a[0:2 * n:100]
7   a[:]
8   a[::2]
9   a[::-1]
</code></pre>
<h5 id="matches_8">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>slice_step:</code></td>
<td align="left">1, 2, 3, 5, 7</td>
</tr>
<tr>
<td align="left"><code>slice_step:step4</code></td>
<td align="left">4</td>
</tr>
<tr>
<td align="left"><code>slice_step:100</code></td>
<td align="left">6</td>
</tr>
<tr>
<td align="left"><code>slice_step:2</code></td>
<td align="left">8</td>
</tr>
<tr>
<td align="left"><code>slice_step:-1</code></td>
<td align="left">9</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-slice">Feature <code>slice</code></h4>
<p>Match a slice, and suffix it with three parts, either empty, atomic or replaced by an underscore: the lower bound, the upper bound and the step.</p>
<h5 id="derivations_6">Derivations</h5>
<p><a href="#feature-slice_lower">⬆️ feature <code>slice_lower</code></a>
<a href="#feature-slice_step">⬆️ feature <code>slice_step</code></a>
<a href="#feature-slice_upper">⬆️ feature <code>slice_upper</code></a></p>
<h5 id="specification_9">Specification</h5>
<pre><code class="sql">SELECT &quot;slice&quot;,
       lo.name_suffix || &quot;:&quot; || up.name_suffix || &quot;:&quot; || st.name_suffix,
       lo.span,
       lo.path
FROM t_slice_lower lo
JOIN t_slice_upper up USING (path)
JOIN t_slice_step st USING (path)
</code></pre>
<h5 id="example_9">Example</h5>
<pre><code class="python">1   a[:stop1]
2   a[start2:]
3   a[start3:stop3]
4   a[start4:stop4:step4]
5   a[foo(bar):fizz(buzz)]
6   a[0:2 * n:100]
7   a[:]
8   a[::2]
9   a[::-1]
</code></pre>
<h5 id="matches_9">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>slice::stop1:</code></td>
<td align="left">1</td>
</tr>
<tr>
<td align="left"><code>slice:start2::</code></td>
<td align="left">2</td>
</tr>
<tr>
<td align="left"><code>slice:start3:stop3:</code></td>
<td align="left">3</td>
</tr>
<tr>
<td align="left"><code>slice:start4:stop4:step4</code></td>
<td align="left">4</td>
</tr>
<tr>
<td align="left"><code>slice:_:_:</code></td>
<td align="left">5</td>
</tr>
<tr>
<td align="left"><code>slice:0:_:100</code></td>
<td align="left">6</td>
</tr>
<tr>
<td align="left"><code>slice:::</code></td>
<td align="left">7</td>
</tr>
<tr>
<td align="left"><code>slice:::2</code></td>
<td align="left">8</td>
</tr>
<tr>
<td align="left"><code>slice:::-1</code></td>
<td align="left">9</td>
</tr>
</tbody>
</table>
<hr>
<h2 id="operators">Operators</h2>
<hr>
<h4 id="feature-unary95operator">Feature <code>unary_operator</code></h4>
<h5 id="specification_10">Specification</h5>
<pre><code class="re">           ^(.*)/_type=UnaryOp
\n(?:\1.+\n)*?\1/_pos=(?P&lt;POS&gt;.+)
\n(?:\1.+\n)*?\1/op/_type=(?P&lt;SUFFIX&gt;.+)
</code></pre>
<h5 id="example_10">Example</h5>
<pre><code class="python">1   a = -b
2   b = not c
3   c = -1 # no match
</code></pre>
<p><em>Remark.</em> A negative literal is represented in the AST by a node <code>UnaryOp</code> with <code>USub</code> and <code>Num</code> children, and a <em>positive</em> value for <code>n</code>. Our pre-processing of the AST simplifies this into a node <code>Num</code> and a <em>negative</em> value for <code>n</code>.</p>
<h5 id="matches_10">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>unary_operator:USub</code></td>
<td align="left">1</td>
</tr>
<tr>
<td align="left"><code>unary_operator:Not</code></td>
<td align="left">2</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-binary95operator">Feature <code>binary_operator</code></h4>
<h5 id="derivations_7">Derivations</h5>
<p><a href="#feature-addition_operator">⬇️ feature <code>addition_operator</code></a>
<a href="#feature-concatenation_operatorreplication_operator">⬇️ feature <code>concatenation_operator|replication_operator</code></a>
<a href="#feature-modulo_operator">⬇️ feature <code>modulo_operator</code></a>
<a href="#feature-multiplication_operator">⬇️ feature <code>multiplication_operator</code></a>
<a href="#feature-string_formatting_operator">⬇️ feature <code>string_formatting_operator</code></a></p>
<h5 id="specification_11">Specification</h5>
<pre><code class="re">           ^(.*)/_type=BinOp
\n(?:\1.+\n)*?\1/_pos=(?P&lt;POS&gt;.+)
\n(?:\1.+\n)*?\1/op/_type=(?P&lt;SUFFIX&gt;.+)
</code></pre>
<h5 id="example_11">Example</h5>
<pre><code class="python">1   2**32768 - 1
</code></pre>
<h5 id="matches_11">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>binary_operator:Pow</code></td>
<td align="left">1</td>
</tr>
<tr>
<td align="left"><code>binary_operator:Sub</code></td>
<td align="left">1</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-conditional95expression">Feature <code>conditional_expression</code></h4>
<p>Match the so-called ternary operator.</p>
<h5 id="specification_12">Specification</h5>
<pre><code class="re">           ^(.*)/_type=IfExp
\n(?:\1.+\n)*?\1/_pos=(?P&lt;POS&gt;.+)
</code></pre>
<h5 id="example_12">Example</h5>
<pre><code class="python">1   foo if c else bar
</code></pre>
<h5 id="matches_12">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>conditional_expression</code></td>
<td align="left">1</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-concatenation_operatorreplication_operator">Feature <code>concatenation_operator|replication_operator</code></h4>
<p>Match replication operators whose one operand is either a string, a list or a tuple <strong>literal</strong>. Match their augmented assignment version too (although it should belong to the <a href="#statements">Statements section</a>).</p>
<h5 id="derivations_8">Derivations</h5>
<p><a href="#feature-augmented_assignment">⬆️ feature <code>augmented_assignment</code></a>
<a href="#feature-binary_operator">⬆️ feature <code>binary_operator</code></a>
<a href="#feature-literal">⬆️ feature <code>literal</code></a>
<a href="#feature-addition_operator">⬇️ feature <code>addition_operator</code></a>
<a href="#feature-multiplication_operator">⬇️ feature <code>multiplication_operator</code></a></p>
<h5 id="specification_13">Specification</h5>
<pre><code class="sql">SELECT CASE op.name_suffix
           WHEN &quot;Add&quot; THEN &quot;concatenation_operator&quot;
           ELSE &quot;replication_operator&quot;
       END,
       lit.name_suffix,
       op.span,
       op.path
FROM
  (SELECT *
   FROM t_binary_operator
   UNION ALL SELECT *
   FROM t_augmented_assignment) op
JOIN t_literal lit ON (lit.path REGEXP op.path || &quot;\d+-$&quot;)
WHERE op.name_suffix IN (&quot;Mult&quot;,
                         &quot;Add&quot;)
  AND lit.name_suffix IN (&quot;List&quot;,
                          &quot;Str&quot;,
                          &quot;Tuple&quot;)
GROUP BY op.path
</code></pre>
<h5 id="example_13">Example</h5>
<pre><code class="python">1   print(&quot;foo&quot; + &quot;bar&quot;)
2   l = l + [1]
3   l += [1]
4   print(&quot;-&quot; * 80)
5   a = [0] * 80
6   b = 80 * [0]
7   c = (1, 2, 3) * n
8   print(&quot;Fizz&quot; * (i % 3 == 0) + &quot;Buzz&quot; * (i % 5 == 0) or i)
</code></pre>
<h5 id="matches_13">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>concatenation_operator:Str</code></td>
<td align="left">1</td>
</tr>
<tr>
<td align="left"><code>concatenation_operator:List</code></td>
<td align="left">2, 3</td>
</tr>
<tr>
<td align="left"><code>replication_operator:Str</code></td>
<td align="left">4, 8, 8</td>
</tr>
<tr>
<td align="left"><code>replication_operator:List</code></td>
<td align="left">5, 6</td>
</tr>
<tr>
<td align="left"><code>replication_operator:Tuple</code></td>
<td align="left">7</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-string95formatting95operator">Feature <code>string_formatting_operator</code></h4>
<p>Match old-style <code>%</code> operators whose left operand is a string <strong>literal</strong>.</p>
<h5 id="derivations_9">Derivations</h5>
<p><a href="#feature-binary_operator">⬆️ feature <code>binary_operator</code></a>
<a href="#feature-literal">⬆️ feature <code>literal</code></a>
<a href="#feature-modulo_operator">⬇️ feature <code>modulo_operator</code></a></p>
<h5 id="specification_14">Specification</h5>
<pre><code class="sql">SELECT &quot;string_formatting_operator&quot;,
       &quot;&quot;,
       op.span,
       op.path
FROM t_binary_operator op
JOIN t_literal lit ON (lit.path REGEXP op.path || &quot;\d+-$&quot;)
WHERE op.name_suffix = &quot;Mod&quot;
  AND lit.name_suffix = &quot;Str&quot;
GROUP BY op.path
</code></pre>
<h5 id="example_14">Example</h5>
<pre><code class="python">1   s = &quot;hello, %s&quot; % world
2   n = n % 10
3   print(a % b)
</code></pre>
<h5 id="matches_14">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>string_formatting_operator</code></td>
<td align="left">1</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-addition95operator">Feature <code>addition_operator</code></h4>
<p>An addition operator is a binary operator <code>Add</code> which has not be classified as a concatenation operator.</p>
<h5 id="derivations_10">Derivations</h5>
<p><a href="#feature-binary_operator">⬆️ feature <code>binary_operator</code></a>
<a href="#feature-concatenation_operatorreplication_operator">⬆️ feature <code>concatenation_operator|replication_operator</code></a></p>
<h5 id="specification_15">Specification</h5>
<pre><code class="sql">SELECT &quot;addition_operator&quot;,
       &quot;&quot;,
       op.span,
       op.path
FROM t_binary_operator op
LEFT JOIN t_concatenation_operator con ON (op.span = con.span)
WHERE op.name_suffix=&quot;Add&quot;
  AND con.span IS NULL
</code></pre>
<h5 id="example_15">Example</h5>
<pre><code class="python">1   print(&quot;foo&quot; + &quot;bar&quot;)
2   l = l + [1]
3   l += [1]
4   print(a + 1)
</code></pre>
<h5 id="matches_15">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>addition_operator</code></td>
<td align="left">4</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-multiplication95operator">Feature <code>multiplication_operator</code></h4>
<p>A multiplication operator is a binary operator <code>Mult</code> which has not be classified as a replication operator.</p>
<h5 id="derivations_11">Derivations</h5>
<p><a href="#feature-binary_operator">⬆️ feature <code>binary_operator</code></a>
<a href="#feature-concatenation_operatorreplication_operator">⬆️ feature <code>concatenation_operator|replication_operator</code></a></p>
<h5 id="specification_16">Specification</h5>
<pre><code class="sql">SELECT &quot;multiplication_operator&quot;,
       &quot;&quot;,
       op.span,
       op.path
FROM t_binary_operator op
LEFT JOIN t_replication_operator rep ON (op.path = rep.path)
WHERE rep.span IS NULL
  AND op.name_suffix=&quot;Mult&quot;
</code></pre>
<h5 id="example_16">Example</h5>
<pre><code class="python">1   print(&quot;-&quot; * 80)
2   print(a * b)
3   c = (1, 2, 3) * n
</code></pre>
<h5 id="matches_16">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>multiplication_operator</code></td>
<td align="left">2</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-modulo95operator">Feature <code>modulo_operator</code></h4>
<p>A modulo operator is a binary operator <code>Mod</code> which has not be classified as an old-style format operator.</p>
<h5 id="derivations_12">Derivations</h5>
<p><a href="#feature-binary_operator">⬆️ feature <code>binary_operator</code></a>
<a href="#feature-string_formatting_operator">⬆️ feature <code>string_formatting_operator</code></a></p>
<h5 id="specification_17">Specification</h5>
<pre><code class="sql">SELECT &quot;modulo_operator&quot;,
       &quot;&quot;,
       op.span,
       op.path
FROM t_binary_operator op
LEFT JOIN t_string_formatting_operator f ON (op.path = f.path)
WHERE f.span IS NULL
  AND op.name_suffix=&quot;Mod&quot;
</code></pre>
<h5 id="example_17">Example</h5>
<pre><code class="python">1   s = &quot;hello, %s&quot; % world
2   n = n % 10
3   print(a % b)
</code></pre>
<h5 id="matches_17">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>modulo_operator</code></td>
<td align="left">2, 3</td>
</tr>
</tbody>
</table>
<hr>
<h2 id="boolean-expressions">Boolean expressions</h2>
<hr>
<h4 id="feature-boolean95operator">Feature <code>boolean_operator</code></h4>
<h5 id="specification_18">Specification</h5>
<pre><code class="re">           ^(.*)/_type=BoolOp
\n(?:\1.+\n)*?\1/_pos=(?P&lt;POS&gt;.+)
\n(?:\1.+\n)*?\1/op/_type=(?P&lt;SUFFIX&gt;.+)
</code></pre>
<h5 id="example_18">Example</h5>
<pre><code class="python">1   a and b
2   a or c
3   not x # no match
</code></pre>
<h5 id="matches_18">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>boolean_operator:And</code></td>
<td align="left">1</td>
</tr>
<tr>
<td align="left"><code>boolean_operator:Or</code></td>
<td align="left">2</td>
</tr>
</tbody>
</table>
<p><em>Remark.</em> <code>Not</code> is not a boolean operator in Python. To match it, use <a href="#feature-unary_operator">feature <code>unary_operator:Not</code></a>.</p>
<hr>
<h4 id="feature-comparison95operator">Feature <code>comparison_operator</code></h4>
<h5 id="derivations_13">Derivations</h5>
<p><a href="#feature-chained_equalitieschained_inequalities">⬇️ feature <code>chained_equalities|chained_inequalities</code></a>
<a href="#feature-yoda_comparison">⬇️ feature <code>yoda_comparison</code></a></p>
<h5 id="specification_19">Specification</h5>
<pre><code class="re">           ^(.*)/ops/        (?P&lt;_1&gt;\d+)/_type=(?P&lt;SUFFIX&gt;Eq|Lt|LtE|Gt|GtE|In|NotIn|NotEq|Is|IsNot)
\n(?:\1.+\n)*?\1/comparators/(?P=_1)    /_pos=(?P&lt;POS&gt;.+)
</code></pre>
<h5 id="example_19">Example</h5>
<pre><code class="python">1   print(a == 3)
2   if a == b == c:
3       pass
4   needle in haystack
5   3 + 4
</code></pre>
<h5 id="matches_19">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>comparison_operator:Eq</code></td>
<td align="left">1, 2, 2</td>
</tr>
<tr>
<td align="left"><code>comparison_operator:In</code></td>
<td align="left">4</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-yoda95comparison">Feature <code>yoda_comparison</code></h4>
<p>The so-called Yoda style puts the literal operand on the left side of a comparison. Although generally not recommended, this order is sometimes natural or even mandatory for certain non-commutative operators (see examples below).</p>
<h5 id="derivations_14">Derivations</h5>
<p><a href="#feature-comparison_operator">⬆️ feature <code>comparison_operator</code></a>
<a href="#feature-literal">⬆️ feature <code>literal</code></a></p>
<h5 id="specification_20">Specification</h5>
<pre><code class="sql">SELECT &quot;yoda_comparison&quot;,
       c.name_suffix,
       c.span,
       c.path
FROM t_comparison_operator c
JOIN t_literal lit ON (c.span = lit.span
                       AND c.path GLOB &quot;*-2-1-&quot;
                       AND lit.path GLOB &quot;*-0-&quot;)
WHERE substr(c.path, 1, length(c.path)-4) == substr(lit.path, 1, length(lit.path)-2)
  AND c.path NOT IN -- ensure that the RHS is not itself a literal
    (SELECT path
     FROM t_literal)
</code></pre>
<h5 id="example_20">Example</h5>
<pre><code class="python">1   assert 0 == x # match
2   assert x == 0 # no match
3   if &quot;A&quot; &lt;= symbol &lt;= &quot;Z&quot;: # match: filtered out on the taxonomy level
4       pass
5   assert (a, b) == (c, d) # no match, since the RHS is a literal too
6   assert &quot;needle&quot; not in haystack # match: filtered out on the taxonomy level
</code></pre>
<h5 id="matches_20">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>yoda_comparison:Eq</code></td>
<td align="left">1</td>
</tr>
<tr>
<td align="left"><code>yoda_comparison:LtE</code></td>
<td align="left">3</td>
</tr>
<tr>
<td align="left"><code>yoda_comparison:NotIn</code></td>
<td align="left">6</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-chained95comparison">Feature <code>chained_comparison</code></h4>
<h5 id="derivations_15">Derivations</h5>
<p><a href="#feature-chained_equalitieschained_inequalities">⬇️ feature <code>chained_equalities|chained_inequalities</code></a></p>
<h5 id="specification_21">Specification</h5>
<pre><code class="re">           ^(.*)/_type=Compare
\n(?:\1.+\n)*?\1/_pos=(?P&lt;POS&gt;.+)
\n(?:\1.+\n)*?\1/comparators/length=(?!1\n)(?P&lt;SUFFIX&gt;.+)
</code></pre>
<h5 id="example_21">Example</h5>
<pre><code class="python">1   a == 1
2   a == b == c
3   a &lt; b &lt; c &lt; d
</code></pre>
<h5 id="matches_21">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>chained_comparison:2</code></td>
<td align="left">2</td>
</tr>
<tr>
<td align="left"><code>chained_comparison:3</code></td>
<td align="left">3</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-chained_equalitieschained_inequalities">Feature <code>chained_equalities|chained_inequalities</code></h4>
<h5 id="derivations_16">Derivations</h5>
<p><a href="#feature-chained_comparison">⬆️ feature <code>chained_comparison</code></a>
<a href="#feature-comparison_operator">⬆️ feature <code>comparison_operator</code></a></p>
<h5 id="specification_22">Specification</h5>
<pre><code class="sql">SELECT CASE op.name_suffix
           WHEN &quot;Eq&quot; THEN &quot;chained_equalities&quot;
           ELSE &quot;chained_inequalities&quot;
       END,
       count(*),
       c.span,
       c.path
FROM t_chained_comparison c
JOIN t_comparison_operator op ON (op.path GLOB c.path || &quot;*-&quot;)
WHERE op.name_suffix REGEXP &quot;(Eq|Lt|LtE|Gt|GtE)$&quot;
GROUP BY c.path,
         op.name_suffix
HAVING count(*) &gt; 1 -- a chain has at least two operators
ORDER BY c.path
</code></pre>
<p><em>Remark.</em> Note the user-defined function <code>REGEXP</code> in the <code>WHERE</code>clause. It calls the function <code>match()</code> of the third-party <a href="https://pypi.org/project/regex/"><code>regex</code></a> library.</p>
<h5 id="example_22">Example</h5>
<pre><code class="python">1   a == 1                     # no match
2   a == b == c                # one chained equality with 2 = signs
3   a &lt; b &lt; c &lt; d              # one chained inequality with 3 &lt; signs
4   a == b == c and d &lt; e      # one more chained equality with 2 = signs
5   a &gt; b &gt; c and d &gt; e &gt; f    # two chained inequalities with 2 &gt; signs
6   a &lt; b &gt; c and a != b == c  # no match
</code></pre>
<h5 id="matches_22">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>chained_equalities:2</code></td>
<td align="left">2, 4</td>
</tr>
<tr>
<td align="left"><code>chained_inequalities:3</code></td>
<td align="left">3</td>
</tr>
<tr>
<td align="left"><code>chained_inequalities:2</code></td>
<td align="left">5, 5</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-divisibility95test">Feature <code>divisibility_test</code></h4>
<h5 id="specification_23">Specification</h5>
<pre><code class="re">           ^(.*)/_type=Compare
\n(?:\1.+\n)*?\1/_pos=(?P&lt;POS&gt;.+)
\n(?:\1.+\n)*?\1/left/op/_type=Mod
(   # try to match the % right operand with a number
\n(?:\1.+\n)*?\1/left/right/n=(?P&lt;SUFFIX&gt;.+)
)?
\n(?:\1.+\n)*?\1/ops/length=1
\n(?:\1.+\n)*?\1/ops/1/_type=(Eq|NotEq)
</code></pre>
<h5 id="example_23">Example</h5>
<pre><code class="python">1   a % b == 0
2   a % 2 == 0
3   a % 3 != 0
4   a % 4 == 1
5   a % 5 != 1
</code></pre>
<h5 id="matches_23">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>divisibility_test</code></td>
<td align="left">1</td>
</tr>
<tr>
<td align="left"><code>divisibility_test:2</code></td>
<td align="left">2</td>
</tr>
<tr>
<td align="left"><code>divisibility_test:3</code></td>
<td align="left">3</td>
</tr>
<tr>
<td align="left"><code>divisibility_test:4</code></td>
<td align="left">4</td>
</tr>
<tr>
<td align="left"><code>divisibility_test:5</code></td>
<td align="left">5</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-short95circuit">Feature <code>short_circuit</code></h4>
<p>When the value of the left operand suffices to determine the value of a boolean expression, short-circuit evaluation skips the right operand. This behaviour is sometimes desirable or even required, but Paroxython currently cannot detect the case: so, when commutating the operands would result in an error or a performance penalty, you should add manually the hint <code># paroxython: short_circuit</code> in the source-code. The suffix shoud be either <code>And</code>, <code>Or</code> or omitted.</p>
<h5 id="specification_24">Specification</h5>
<pre><code></code></pre>
<h5 id="example_24">Example</h5>
<pre><code class="python">1   def insertion_sort(a):
2       for i in range(1, len(a)):
3           aux = a[i]
4           j = i
5           while j &gt; 0 and a[j-1] &gt; aux:  # paroxython: short_circuit:And
6               a[j] = a[j-1]
7               j -= 1
8           a[j] = aux
</code></pre>
<h5 id="matches_24">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>short_circuit:And</code></td>
<td align="left">5</td>
</tr>
</tbody>
</table>
<hr>
<h2 id="calls">Calls</h2>
<h3 id="generalities">Generalities</h3>
<hr>
<h4 id="feature-call95argument">Feature <code>call_argument</code></h4>
<p>Match any argument of a free call or a member call. Suffix this argument when it is <strong>atomic</strong>, <em>i.e.</em> either:
- an identifier,
- a number literal,
- <code>True</code>, <code>False</code> or <code>None</code>.
Otherwise, suffix it with an empty string.</p>
<h5 id="derivations_17">Derivations</h5>
<p><a href="#feature-range">⬇️ feature <code>range</code></a>
<a href="#feature-update_by_member_call">⬇️ feature <code>update_by_member_call</code></a></p>
<h5 id="specification_25">Specification</h5>
<pre><code class="re">           ^(.*)/_type=Call
(
\n(?:\1.+\n)*?\1/(?P&lt;_1&gt;args/\d+)/_pos=(?P&lt;POS&gt;.+)
\n            \1/(?P=_1)         /(   # the next line denotes either an atomic argument
                                    (value|n|id)?=(?P&lt;SUFFIX&gt;.+) # capture it as suffix
                                    | # or a non-atomic argument
                                    (?P&lt;SUFFIX&gt;).+ # &quot;capture&quot; an empty suffix
                                  )
)+ # at least one argument
</code></pre>
<h5 id="example_25">Example</h5>
<pre><code class="python">1   bar() # no match
2   foo(&quot;a string&quot;) # empty suffix
3   foo(None)
4   foo(True)
5   foo(42)
6   buzz(x, 42)
7   buzz((x, 42))
8   fizz(foobar(x), 42) # empty suffix for the first argument
9   foo(a, b, c)
10  foo.bar(bizz, buzz)
11  def fun_def(f, g): # no match
12      f(g)
</code></pre>
<h5 id="matches_25">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>call_argument:</code></td>
<td align="left">2, 7, 8</td>
</tr>
<tr>
<td align="left"><code>call_argument:None</code></td>
<td align="left">3</td>
</tr>
<tr>
<td align="left"><code>call_argument:True</code></td>
<td align="left">4</td>
</tr>
<tr>
<td align="left"><code>call_argument:42</code></td>
<td align="left">5, 6, 8</td>
</tr>
<tr>
<td align="left"><code>call_argument:x</code></td>
<td align="left">6, 8</td>
</tr>
<tr>
<td align="left"><code>call_argument:a</code></td>
<td align="left">9</td>
</tr>
<tr>
<td align="left"><code>call_argument:b</code></td>
<td align="left">9</td>
</tr>
<tr>
<td align="left"><code>call_argument:c</code></td>
<td align="left">9</td>
</tr>
<tr>
<td align="left"><code>call_argument:bizz</code></td>
<td align="left">10</td>
</tr>
<tr>
<td align="left"><code>call_argument:buzz</code></td>
<td align="left">10</td>
</tr>
<tr>
<td align="left"><code>call_argument:g</code></td>
<td align="left">12</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-composition">Feature <code>composition</code></h4>
<p>Apply a function or a method to an expression involving the result of another function or method application, without using an intermediate variable.</p>
<h5 id="specification_26">Specification</h5>
<pre><code class="re">           ^(.*)/_type=Call
\n(?:\1.+\n)*?\1/_pos=(?P&lt;POS&gt;.+)
\n(?:\1.+\n)* \1/args/.*/_type=Call
</code></pre>
<h5 id="example_26">Example</h5>
<pre><code class="python">1   print(len(&quot;hello, world&quot;))
2   print(&quot;hello, world&quot;) # no match
3   print(a + abs(b))
4   print(s.upper())
</code></pre>
<h5 id="matches_26">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>composition</code></td>
<td align="left">1, 3, 4</td>
</tr>
</tbody>
</table>
<hr>
<h3 id="calls-of-the-form-callablearguments">Calls of the form <code>callable(arguments)</code></h3>
<p>In Python, this form can denote:</p>
<ul>
<li>the application of a function (generator, etc.);</li>
<li>the instanciation of a class (whose name should be CamelCased), including Exceptions;</li>
<li>the invocation of the method <code>__call__</code> of an object.</li>
</ul>
<p>We use the term <em>free call</em>, as opposed to <em>member call</em> (dot notation).</p>
<hr>
<h4 id="feature-free95call">Feature <code>free_call</code></h4>
<h5 id="derivations_18">Derivations</h5>
<p><a href="#feature-body_recursive_function">⬇️ feature <code>body_recursive_function</code></a>
<a href="#feature-deeply_recursive_function">⬇️ feature <code>deeply_recursive_function</code></a>
<a href="#feature-external_free_call">⬇️ feature <code>external_free_call</code></a>
<a href="#feature-higher-order-function">⬇️ feature <code>higher-order function</code></a>
<a href="#feature-internal_free_call">⬇️ feature <code>internal_free_call</code></a>
<a href="#feature-range">⬇️ feature <code>range</code></a>
<a href="#feature-recursive_function">⬇️ feature <code>recursive_function</code></a></p>
<h5 id="specification_27">Specification</h5>
<pre><code class="re">           ^(.*)/_type=Call
\n(?:\1.+\n)*?\1/_pos=(?P&lt;POS&gt;.+)
\n(?:\1.+\n)*?\1/func/id=(?P&lt;SUFFIX&gt;.+)
</code></pre>
<h5 id="example_27">Example</h5>
<pre><code class="python">1   foo(a, b, c)
2   bar()
3   buzz(x, 2)
4   fizz(foobar(x), 2)
5   baz.qux() # no match, see feature member_call
</code></pre>
<h5 id="matches_27">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>free_call:foo</code></td>
<td align="left">1</td>
</tr>
<tr>
<td align="left"><code>free_call:bar</code></td>
<td align="left">2</td>
</tr>
<tr>
<td align="left"><code>free_call:buzz</code></td>
<td align="left">3</td>
</tr>
<tr>
<td align="left"><code>free_call:fizz</code></td>
<td align="left">4</td>
</tr>
<tr>
<td align="left"><code>free_call:foobar</code></td>
<td align="left">4</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-free95call95without95result">Feature <code>free_call_without_result</code></h4>
<h5 id="specification_28">Specification</h5>
<pre><code class="re">^(.*/(?:body|orelse|loopelse)/\d+)/_type=Expr
\n(?:\1.+\n)*?\1                  /value/_type=Call
\n(?:\1.+\n)*?\1                  /value/_pos=(?P&lt;POS&gt;.+)
\n(?:\1.+\n)*?\1                  /value/func/id=(?P&lt;SUFFIX&gt;.+)
</code></pre>
<h5 id="example_28">Example</h5>
<pre><code class="python">1   a = foo(a, b, c) # no match
2   return bar() # no match
3   1 + buzz(x, 2) # no match
4   fizz(foobar(x), 2) # match for fizz, no match for foobar
5   baz.qux() # no match
</code></pre>
<h5 id="matches_28">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>free_call_without_result:fizz</code></td>
<td align="left">4</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-free95call95without95arguments">Feature <code>free_call_without_arguments</code></h4>
<h5 id="specification_29">Specification</h5>
<pre><code class="re">           ^(.*)/_type=Call
\n(?:\1.+\n)*?\1/_pos=(?P&lt;POS&gt;.+)
\n(?:\1.+\n)*?\1/func/id=(?P&lt;SUFFIX&gt;.+)
\n(?:\1.+\n)*?\1/args/length=0
\n(?:\1.+\n)*?\1/keywords/length=0
</code></pre>
<h5 id="example_29">Example</h5>
<pre><code class="python">1   foo()
2   bar(x=1) # no match
3   baz.qux() # no match
</code></pre>
<h5 id="matches_29">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>free_call_without_arguments:foo</code></td>
<td align="left">1</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-free95tail95call">Feature <code>free_tail_call</code></h4>
<p>A tail-call is a call whose result is immediately returned, without any further calculation. This property is not interesting as such, but will be used below as a basis for the recognition of tail-recursive functions.</p>
<h5 id="derivations_19">Derivations</h5>
<p><a href="#feature-body_recursive_function">⬇️ feature <code>body_recursive_function</code></a></p>
<h5 id="specification_30">Specification</h5>
<pre><code class="re">           ^(.*)/_type=Return
\n(?:\1.+\n)*?\1/value/(
                       _type=Call
\n(?:\1.+\n)*?\1/value/_pos=(?P&lt;POS&gt;.+)
\n(?:\1.+\n)*?\1/value/func/_type=Name
\n(?:\1.+\n)*?\1/value/func/id=(?P&lt;SUFFIX&gt;.+)
                       |
                       _type=BoolOp
\n(?:\1.+\n)*?\1/value/values/length=(?P&lt;LENGTH&gt;\d+)
\n(?:\1.+\n)*?\1/value/values/(?P=LENGTH)/_type=Call
\n(?:\1.+\n)*?\1/value/values/(?P=LENGTH)/_pos=(?P&lt;POS&gt;.+)
\n(?:\1.+\n)*?\1/value/values/(?P=LENGTH)/func/id=(?P&lt;SUFFIX&gt;.+)
                       |
                       _type=IfExp
(
\n(?:\1.+\n)*?\1/value/(?P&lt;_1&gt;body|orelse)/_type=Call
\n(?:\1.+\n)*?\1/value/(?P=_1)            /_pos=(?P&lt;POS&gt;.+)
\n(?:\1.+\n)*?\1/value/(?P=_1)            /func/_type=Name
\n(?:\1.+\n)*?\1/value/(?P=_1)            /func/id=(?P&lt;SUFFIX&gt;.+)
)+  # can match both branches
)
</code></pre>
<h5 id="example_30">Example</h5>
<pre><code class="python">1   def foobar():
2       return foo(m-1, 1)                   # tail call
3       return foo(m-1, bar(m, n-1))         # tail call / no match
4       return c and foo(m)                  # tail call
5       return c1 and c2 and foo(m)          # tail call
6       return (42 if c else foo(m + 1))     # tail call
7       return (foo(m) if c else 42)         # tail call
8       return (foo(m) if c else foo(m + 1)) # tail call / tail_call
9       return bar(m) and c  # no match
10      return bar(m) + 1    # no match
11      return 1 + bar(m)    # no match
12      return bar(m)[-1]    # no match
13      return (1, bar())    # no match
14      return {1: bar()}    # no match
15      return {bar(): 1}    # no match
16
17  def useless_assignment():
18      a = bar(n)
19      return a # LIMITATION: no match
20
21  def procedure():
22      if c1:
23          if c2:
24              bar(1) # LIMITATION: no match
25          else:
26              bar(2) # LIMITATION: no match
27      else:
28          bar(3) # LIMITATION: no match
</code></pre>
<p><em>Remark.</em> Since the short-circuit expression <code>c and foo(m)</code> is equivalent to the conditional expression <code>if c then foo(m) else False</code>, <code>foo(m)</code> is actually a tail-call.</p>
<h5 id="matches_30">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>free_tail_call:foo</code></td>
<td align="left">2, 3, 4, 5, 6, 7, 8, 8</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-internal95free95call">Feature <code>internal_free_call</code></h4>
<h5 id="derivations_20">Derivations</h5>
<p><a href="#feature-free_call">⬆️ feature <code>free_call</code></a>
<a href="#feature-function">⬆️ feature <code>function</code></a>
<a href="#feature-external_free_call">⬇️ feature <code>external_free_call</code></a></p>
<h5 id="specification_31">Specification</h5>
<pre><code class="sql">SELECT &quot;internal_free_call&quot;,
       c.name_suffix,
       c.span,
       c.path
FROM t_function f
JOIN t_free_call c USING (name_suffix)
</code></pre>
<h5 id="example_31">Example</h5>
<pre><code class="python">1   from external import bizz
2
3   def foo():
4       def buzz():
5           pass
6
7   foo()
8   bar()
9   buzz()
10  bizz()
11
12  def bar():
13      pass
</code></pre>
<h5 id="matches_31">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>internal_free_call:bar</code></td>
<td align="left">8</td>
</tr>
<tr>
<td align="left"><code>internal_free_call:buzz</code></td>
<td align="left">9</td>
</tr>
<tr>
<td align="left"><code>internal_free_call:foo</code></td>
<td align="left">7</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-external95free95call">Feature <code>external_free_call</code></h4>
<h5 id="derivations_21">Derivations</h5>
<p><a href="#feature-free_call">⬆️ feature <code>free_call</code></a>
<a href="#feature-internal_free_call">⬆️ feature <code>internal_free_call</code></a></p>
<h5 id="specification_32">Specification</h5>
<pre><code class="sql">SELECT &quot;external_free_call&quot;,
       c.name_suffix,
       c.span,
       c.path
FROM t_free_call c
LEFT JOIN t_internal_free_call USING(name_suffix)
WHERE t_internal_free_call.name_suffix IS NULL
</code></pre>
<h5 id="example_32">Example</h5>
<pre><code class="python">1   from external import bizz
2
3   def foo():
4       def buzz():
5           pass
6
7   foo()
8   bar()
9   buzz()
10  bizz()
11
12  def bar():
13      pass
</code></pre>
<h5 id="matches_32">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>external_free_call:bizz</code></td>
<td align="left">10</td>
</tr>
</tbody>
</table>
<hr>
<h3 id="calls-of-the-form-identifiercallablearguments">Calls of the form <code>identifier.callable(arguments)</code></h3>
<p>In Python, <code>identifier</code> can be the name of:
- a class instance (here, <code>callable</code> is a method name);
- a module (inside which <code>callable(arguments)</code> would be a free call);
- a <code>namedtuple</code> instance (in the rare case where an element would be callable).</p>
<hr>
<h4 id="feature-member95call">Feature <code>member_call</code></h4>
<h5 id="derivations_22">Derivations</h5>
<p><a href="#feature-update_by_member_call">⬇️ feature <code>update_by_member_call</code></a>
<a href="#feature-update_by_member_call_with">⬇️ feature <code>update_by_member_call_with</code></a></p>
<h5 id="specification_33">Specification</h5>
<pre><code class="re">           ^(.*)/_type=Call
\n(?:\1.+\n)*?\1/_pos=(?P&lt;POS&gt;.+)
\n(?:\1.+\n)*?\1/func/attr=(?P&lt;SUFFIX&gt;.+)
</code></pre>
<h5 id="example_33">Example</h5>
<pre><code class="python">1   seq.index(42)
2   foo(bar)  # no match
3   seq.index # no match
</code></pre>
<h5 id="matches_33">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>member_call:index</code></td>
<td align="left">1</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-member95call95without95result">Feature <code>member_call_without_result</code></h4>
<h5 id="specification_34">Specification</h5>
<pre><code class="re">^(.*/(?:body|orelse|loopelse)/\d+)/_type=Expr
\n(?:\1.+\n)*?\1                  /value/_type=Call
\n(?:\1.+\n)*?\1                  /value/_pos=(?P&lt;POS&gt;.+)
\n(?:\1.+\n)*?\1                  /value/func/attr=(?P&lt;SUFFIX&gt;.+)
</code></pre>
<h5 id="example_34">Example</h5>
<pre><code class="python">1   a = foo(a, b, c) # no match
2   return bar() # no match
3   1 + buzz(x, 2) # no match
4   fizz(foobar(x), 2) # no match
5   baz.qux() # match
</code></pre>
<h5 id="matches_34">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>member_call_without_result:qux</code></td>
<td align="left">5</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-member95call95object">Feature <code>member_call_object</code></h4>
<h5 id="derivations_23">Derivations</h5>
<p><a href="#feature-update_by_member_call">⬇️ feature <code>update_by_member_call</code></a></p>
<h5 id="specification_35">Specification</h5>
<pre><code class="re">           ^(.*)/value/_type=Call
\n(?:\1.+\n)*?\1/value/func/_type=Attribute
\n(?:\1.+\n)*?\1/value/func/value/_pos=(?P&lt;POS&gt;.+)
\n(?:\1.+\n)*?\1/value/func/value/id=(?P&lt;SUFFIX&gt;.+)
</code></pre>
<h5 id="example_35">Example</h5>
<pre><code class="python">1   seq.index(42)
2   foo(bar)  # no match
3   seq.index # no match
</code></pre>
<h5 id="matches_35">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>member_call_object:seq</code></td>
<td align="left">1</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-method95chaining">Feature <code>method_chaining</code></h4>
<h5 id="specification_36">Specification</h5>
<pre><code class="re">           ^(.*)/_type=Call
\n(?:\1.+\n)*?\1/_pos=(?P&lt;POS&gt;.+)
\n(?:\1.+\n)*?\1/func/_type=Attribute
\n(?:\1.+\n)*?\1/func/value/_type=Call
\n(?:\1.+\n)*?\1/func/value/func/_type=Attribute
</code></pre>
<h5 id="example_36">Example</h5>
<pre><code class="python">1   s.strip().split()
</code></pre>
<h5 id="matches_36">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>method_chaining</code></td>
<td align="left">1</td>
</tr>
</tbody>
</table>
<hr>
<h2 id="iterables">Iterables</h2>
<hr>
<h4 id="feature-range">Feature <code>range</code></h4>
<p>Match a call to <code>range()</code> and suffix it by its <a href="#feature-call_argument"><em>atomic</em></a> arguments, separated by a colon. Non-atomic arguments are replaced by <code>_</code>.</p>
<h5 id="derivations_24">Derivations</h5>
<p><a href="#feature-call_argument">⬆️ feature <code>call_argument</code></a>
<a href="#feature-free_call">⬆️ feature <code>free_call</code></a>
<a href="#feature-for_range">⬇️ feature <code>for_range</code></a></p>
<h5 id="specification_37">Specification</h5>
<pre><code class="sql">SELECT &quot;range&quot;,
       group_concat(name_suffix, &quot;:&quot;),
       span,
       path
FROM -- Only a subquery permits to sort the arguments before grouping them together.
  (SELECT f.rowid AS rowid,
          CASE arg.name_suffix
              WHEN &quot;&quot; THEN &quot;_&quot;
              ELSE arg.name_suffix
          END AS name_suffix,
          f.span AS span,
          f.path AS path
   FROM t_free_call f
   JOIN t_call_argument arg ON (arg.path GLOB f.path || &quot;*-&quot;)
   WHERE f.name_suffix = &quot;range&quot;
     AND length(f.path) + 4 = length(arg.path) -- Ensure that arg is a (direct) argument of range().
   ORDER BY arg.path)-- Thanks to the subquery, this clause...
GROUP BY rowid -- will be executed before this one.
</code></pre>
<h5 id="example_37">Example</h5>
<pre><code class="python">1   range(stop1)
2   range(start2, stop2)
3   range(start3, stop3, step3)
4   range(start4, stop4, -1)
5   range(foo(bar), fizz(buzz)) # bar and buzz are not direct arguments of range()
6   range(0, 2 * n, 100)
7   range(len(seq))
</code></pre>
<h5 id="matches_37">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>range:stop1</code></td>
<td align="left">1</td>
</tr>
<tr>
<td align="left"><code>range:start2:stop2</code></td>
<td align="left">2</td>
</tr>
<tr>
<td align="left"><code>range:start3:stop3:step3</code></td>
<td align="left">3</td>
</tr>
<tr>
<td align="left"><code>range:start4:stop4:-1</code></td>
<td align="left">4</td>
</tr>
<tr>
<td align="left"><code>range:_:_</code></td>
<td align="left">5</td>
</tr>
<tr>
<td align="left"><code>range:0:_:100</code></td>
<td align="left">6</td>
</tr>
<tr>
<td align="left"><code>range:_</code></td>
<td align="left">7</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-comprehension">Feature <code>comprehension</code></h4>
<h5 id="specification_38">Specification</h5>
<pre><code class="re">           ^(.*)/_type=((?P&lt;SUFFIX&gt;List|Dict|Set)Comp|(?P&lt;SUFFIX&gt;Generator)Exp)
\n(?:\1.+\n)*?\1/_pos=(?P&lt;POS&gt;.+)
</code></pre>
<h5 id="example_38">Example</h5>
<pre><code class="python">1   my_list = [x for x in seq]
2   my_set = {x for x in seq}
3   my_dict = {x: y for (x, y) in seq}
4   my_generator = (x for x in seq)
5   print([x for x in seq])
6   print(x for x in seq)
</code></pre>
<h5 id="matches_38">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>comprehension:List</code></td>
<td align="left">1, 5</td>
</tr>
<tr>
<td align="left"><code>comprehension:Set</code></td>
<td align="left">2</td>
</tr>
<tr>
<td align="left"><code>comprehension:Dict</code></td>
<td align="left">3</td>
</tr>
<tr>
<td align="left"><code>comprehension:Generator</code></td>
<td align="left">4, 6</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-comprehension95for95count">Feature <code>comprehension_for_count</code></h4>
<p>Suffix the number of <code>for</code> clauses in a given comprehension.</p>
<h5 id="specification_39">Specification</h5>
<pre><code class="re">           ^(.*)/_type=(ListComp|DictComp|SetComp|GeneratorExp)
\n(?:\1.+\n)*?\1/_pos=(?P&lt;POS&gt;.+)
\n(?:\1.+\n)*?\1/generators/length=(?P&lt;SUFFIX&gt;\d+)
</code></pre>
<h5 id="example_39">Example</h5>
<pre><code class="python">1   print([x for x in seq])
2   seq1 = [2, 3, 5]
3   seq2 = [7, 11]
4   acc = [i * j for i in seq1 for j in seq2]
5   acc2 = [[x1 * x2 for x1 in seq1] for x2 in seq2]
</code></pre>
<p><em>Remark.</em> Both lines 4 and 5 can be expressed with two nested <code>for</code> statements. However, the former uses one single accumulator and produces a list of numbers:</p>
<pre><code class="python">acc = []
for i in seq1:
    for j in seq2:
        acc.append(i * j)
assert acc == [14, 22, 21, 33, 35, 55]
</code></pre>
<p>&hellip; whereas the latter uses two accumulators and produces a list <em>of lists</em> of numbers:</p>
<pre><code class="python">acc2 = []
for j in seq2:
    acc1 = []
    for i in seq1:
        acc1.append(i * j)
    acc2.append(acc1)
assert acc2 == [[14, 21, 35], [22, 33, 55]]
</code></pre>
<p>Therefore, line 5 consists in two comprehensions, each with one <code>for</code> clause only.</p>
<h5 id="matches_39">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>comprehension_for_count:1</code></td>
<td align="left">1, 5, 5</td>
</tr>
<tr>
<td align="left"><code>comprehension_for_count:2</code></td>
<td align="left">4</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-filtered95comprehension">Feature <code>filtered_comprehension</code></h4>
<p>Match a comprehension with an <code>if</code> clause.</p>
<h5 id="specification_40">Specification</h5>
<pre><code class="re">/generators/\d+/ifs/1/_pos=(?P&lt;POS&gt;.+)
</code></pre>
<h5 id="example_40">Example</h5>
<pre><code class="python">1   [x for x in seq if foo(x)]
2   acc = [i * j for i in seq1 if foo(i) for j in seq2 if foo(j)]
</code></pre>
<h5 id="matches_40">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>filtered_comprehension</code></td>
<td align="left">1, 2, 2</td>
</tr>
</tbody>
</table>
<hr>
<h2 id="various">Various</h2>
<hr>
<h4 id="feature-lambda95function">Feature <code>lambda_function</code></h4>
<h5 id="specification_41">Specification</h5>
<pre><code class="re">           ^(.*)/_type=Lambda
\n(?:\1.+\n)*?\1/_pos=(?P&lt;POS&gt;.+)
</code></pre>
<h5 id="example_41">Example</h5>
<pre><code class="python">1   lambda x: x + 1
</code></pre>
<h5 id="matches_41">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>lambda_function</code></td>
<td align="left">1</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-f95string">Feature <code>f_string</code></h4>
<h5 id="specification_42">Specification</h5>
<pre><code class="re">           ^(.*)/value/args/1/_type=JoinedStr
\n(?:\1.+\n)*?\1/value/args/1/_pos=(?P&lt;POS&gt;.+)
</code></pre>
<h5 id="example_42">Example</h5>
<pre><code class="python">1   print(f&quot;hello, {world}&quot;)
</code></pre>
<h5 id="matches_42">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>f_string</code></td>
<td align="left">1</td>
</tr>
</tbody>
</table>
<hr>
<h1 id="statements">Statements</h1>
<h2 id="bindings">Bindings</h2>
<hr>
<h4 id="feature-assignment">Feature <code>assignment</code></h4>
<h5 id="derivations_25">Derivations</h5>
<p><a href="#feature-update_by_assignment">⬇️ feature <code>update_by_assignment</code></a>
<a href="#feature-update_by_assignment_with">⬇️ feature <code>update_by_assignment_with</code></a></p>
<h5 id="specification_43">Specification</h5>
<pre><code class="re">           ^(.*)/_type=Assign
\n(?:\1.+\n)*?\1/_pos=(?P&lt;POS&gt;.+)
\n(?:\1.+\n)*?\1/assignvalue/_type=
(
                                   BinOp
\n(?:\1.+\n)*?\1/assignvalue/op/_type=(?P&lt;SUFFIX&gt;.+)
|
                                   Call
\n(?:\1.+\n)*?\1/assignvalue/func/(attr|id)=(?P&lt;SUFFIX&gt;.+)
|
                                   Num
\n(?:\1.+\n)*?\1/assignvalue/n=(?P&lt;SUFFIX&gt;.+)
|
                                   NameConstant
\n(?:\1.+\n)*?\1/assignvalue/value=(?P&lt;SUFFIX&gt;.+)
|
)

</code></pre>
<h5 id="example_43">Example</h5>
<pre><code class="python">1   a = 42
2   (a, b) = (1, 2)
3   a[0] = b[0]
4   a = foo(a, b)
5   a = b + c * d
6   a = foo.bar(b)
</code></pre>
<h5 id="matches_43">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>assignment:42</code></td>
<td align="left">1</td>
</tr>
<tr>
<td align="left"><code>assignment</code></td>
<td align="left">2, 3</td>
</tr>
<tr>
<td align="left"><code>assignment:foo</code></td>
<td align="left">4</td>
</tr>
<tr>
<td align="left"><code>assignment:Add</code></td>
<td align="left">5</td>
</tr>
<tr>
<td align="left"><code>assignment:bar</code></td>
<td align="left">6</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-unbinding">Feature <code>unbinding</code></h4>
<p>Deleting a name removes the binding of that name from the local or global namespace. Not to be confused with the deletion of attribute references, subscriptions and slicings.</p>
<h5 id="specification_44">Specification</h5>
<pre><code class="re">           ^(.*)/_type=Delete
\n(?:\1.+\n)*?\1/_pos=(?P&lt;POS&gt;.+)
(
\n(?:\1.+\n)*?\1/(?P&lt;_1&gt;targets/\d+)/_type=Name
\n(?:\1.+\n)*?\1/(?P=_1)            /id=(?P&lt;SUFFIX&gt;.+)
)+
</code></pre>
<h5 id="example_44">Example</h5>
<pre><code class="python">1   del a
2   del b, c, d
3   del array[1] # no match
4   del e, array[2], f # match only e and f
5   del array[3:4], array[3:4:5], array[:] # no match
6   del foo.bar # no match
</code></pre>
<h5 id="matches_44">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>unbinding:a</code></td>
<td align="left">1</td>
</tr>
<tr>
<td align="left"><code>unbinding:b</code></td>
<td align="left">2</td>
</tr>
<tr>
<td align="left"><code>unbinding:c</code></td>
<td align="left">2</td>
</tr>
<tr>
<td align="left"><code>unbinding:d</code></td>
<td align="left">2</td>
</tr>
<tr>
<td align="left"><code>unbinding:e</code></td>
<td align="left">4</td>
</tr>
<tr>
<td align="left"><code>unbinding:f</code></td>
<td align="left">4</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-single95assignment">Feature <code>single_assignment</code></h4>
<h5 id="derivations_26">Derivations</h5>
<p><a href="#feature-find_best_element">⬇️ feature <code>find_best_element</code></a></p>
<h5 id="specification_45">Specification</h5>
<pre><code class="re">           ^(.*)/_type=Assign
\n(?:\1.+\n)*?\1/_pos=(?P&lt;POS&gt;.+)
\n(?:\1.+\n)*?\1/assigntargets/length=1
\n(?:\1.+\n)*?\1/assigntargets/1/id=(?P&lt;SUFFIX&gt;.+)
</code></pre>
<h5 id="example_45">Example</h5>
<pre><code class="python">1   a = b
2   c = 42
3   d[0] = e # no match
4   (f, g) = divmod(42, 7) # no match
</code></pre>
<h5 id="matches_45">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>single_assignment:a</code></td>
<td align="left">1</td>
</tr>
<tr>
<td align="left"><code>single_assignment:c</code></td>
<td align="left">2</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-parallel95assignment">Feature <code>parallel_assignment</code></h4>
<p>Match a tuple unpacking assignment, and suffix it with the tuple size.</p>
<h5 id="specification_46">Specification</h5>
<pre><code class="re">           ^(.*)/_type=Assign
\n(?:\1.+\n)*?\1/_pos=(?P&lt;POS&gt;.+)
\n(?:\1.+\n)*?\1/assigntargets/length=1
\n(?:\1.+\n)*?\1/assigntargets/1/_type=Tuple
\n(?:\1.+\n)*?\1/assigntargets/1/elts/length=(?P&lt;SUFFIX&gt;.+)
</code></pre>
<h5 id="example_46">Example</h5>
<pre><code class="python">1   a = b # no match
2   c = 42 # no match
3   d[0] = e # no match
4   (f, g) = divmod(42, 7)
</code></pre>
<h5 id="matches_46">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>parallel_assignment:2</code></td>
<td align="left">4</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-augmented95assignment">Feature <code>augmented_assignment</code></h4>
<h5 id="derivations_27">Derivations</h5>
<p><a href="#feature-concatenation_operatorreplication_operator">⬇️ feature <code>concatenation_operator|replication_operator</code></a>
<a href="#feature-update_by_augmented_assignment">⬇️ feature <code>update_by_augmented_assignment</code></a>
<a href="#feature-update_by_augmented_assignment_with">⬇️ feature <code>update_by_augmented_assignment_with</code></a></p>
<h5 id="specification_47">Specification</h5>
<pre><code class="re">           ^(.*)/_type=AugAssign
\n            \1/_pos=(?P&lt;POS&gt;.+)
\n(?:\1.+\n)* \1/op/_type=(?P&lt;SUFFIX&gt;.+)
</code></pre>
<h5 id="example_47">Example</h5>
<pre><code class="python">1   a += 1
2   a = a + 1
3   a += b
4   a *= foo(bar(a, b, c))
5   a[3] += 1
6   a[b] //= 2
7   a += [x]
</code></pre>
<h5 id="matches_47">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>augmented_assignment:Add</code></td>
<td align="left">1, 3, 5, 7</td>
</tr>
<tr>
<td align="left"><code>augmented_assignment:Mult</code></td>
<td align="left">4</td>
</tr>
<tr>
<td align="left"><code>augmented_assignment:FloorDiv</code></td>
<td align="left">6</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-subscript95augmented95assignment">Feature <code>subscript_augmented_assignment</code></h4>
<h5 id="specification_48">Specification</h5>
<pre><code class="re">           ^(.*)/_type=AugAssign
\n            \1/_pos=(?P&lt;POS&gt;.+)
\n(?:\1.+\n)* \1/assigntarget/_type=Subscript
\n(?:\1.+\n)* \1/op/_type=(?P&lt;SUFFIX&gt;.+)
</code></pre>
<h5 id="example_48">Example</h5>
<pre><code class="python">1   a[i] += 1
</code></pre>
<h5 id="matches_48">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>subscript_augmented_assignment:Add</code></td>
<td align="left">1</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-chained95assignment">Feature <code>chained_assignment</code></h4>
<h5 id="specification_49">Specification</h5>
<pre><code class="re">           ^(.*)/_type=Assign
\n(?:\1.+\n)*?\1/_pos=(?P&lt;POS&gt;.+)
\n(?:\1.+\n)*?\1/assigntargets/length=(?!1\n).+
</code></pre>
<h5 id="example_49">Example</h5>
<pre><code class="python">1   a = 42
2   a = b = 42
3   a = b = c = 42
</code></pre>
<h5 id="matches_49">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>chained_assignment</code></td>
<td align="left">2, 3</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-assignment95lhs95identifier">Feature <code>assignment_lhs_identifier</code></h4>
<p>Capture any identifier appearing on the left hand side of an assignment (possibly augmented).</p>
<h5 id="derivations_28">Derivations</h5>
<p><a href="#feature-accumulate_inputs">⬇️ feature <code>accumulate_inputs</code></a>
<a href="#feature-count_elementscount_states">⬇️ feature <code>count_elements|count_states</code></a>
<a href="#feature-count_inputs">⬇️ feature <code>count_inputs</code></a>
<a href="#feature-find_best_element">⬇️ feature <code>find_best_element</code></a>
<a href="#feature-get_valid_input">⬇️ feature <code>get_valid_input</code></a>
<a href="#feature-update_by_assignment">⬇️ feature <code>update_by_assignment</code></a>
<a href="#feature-update_by_augmented_assignment">⬇️ feature <code>update_by_augmented_assignment</code></a></p>
<h5 id="specification_50">Specification</h5>
<pre><code class="re">^(.*/assigntarget(s/\d+)?(|/value|/elts/\d+|/elts/\d+/value))/_pos=(?P&lt;POS&gt;.+)
\n(?:\1.+\n)*?\1                                             /id=(?P&lt;SUFFIX&gt;.+)
</code></pre>
<h5 id="example_50">Example</h5>
<pre><code class="python">1   _ = 1
2   a = 1
3   (b, c) = (1, 1)
4   [d, e] = [1, 1]
5   f[g] = 1             # no match for g
6   if foo:
7       h = 1
8   def bar():
9       i = 1
10  j = k = 1
11  l.m = 1              # LIMITATION: no match for m
12  (n, *o) = [1, 1, 1]
13  a += 1
14  f[g] += 1            # no match for g
15  for i in seq:        # no match for i
16      pass
17  del a                # no match for a
18  first = second = third
</code></pre>
<h5 id="matches_50">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>assignment_lhs_identifier:_</code></td>
<td align="left">1</td>
</tr>
<tr>
<td align="left"><code>assignment_lhs_identifier:a</code></td>
<td align="left">2, 13</td>
</tr>
<tr>
<td align="left"><code>assignment_lhs_identifier:b</code></td>
<td align="left">3</td>
</tr>
<tr>
<td align="left"><code>assignment_lhs_identifier:c</code></td>
<td align="left">3</td>
</tr>
<tr>
<td align="left"><code>assignment_lhs_identifier:d</code></td>
<td align="left">4</td>
</tr>
<tr>
<td align="left"><code>assignment_lhs_identifier:e</code></td>
<td align="left">4</td>
</tr>
<tr>
<td align="left"><code>assignment_lhs_identifier:f</code></td>
<td align="left">5, 14</td>
</tr>
<tr>
<td align="left"><code>assignment_lhs_identifier:h</code></td>
<td align="left">7</td>
</tr>
<tr>
<td align="left"><code>assignment_lhs_identifier:i</code></td>
<td align="left">9</td>
</tr>
<tr>
<td align="left"><code>assignment_lhs_identifier:j</code></td>
<td align="left">10</td>
</tr>
<tr>
<td align="left"><code>assignment_lhs_identifier:k</code></td>
<td align="left">10</td>
</tr>
<tr>
<td align="left"><code>assignment_lhs_identifier:l</code></td>
<td align="left">11</td>
</tr>
<tr>
<td align="left"><code>assignment_lhs_identifier:n</code></td>
<td align="left">12</td>
</tr>
<tr>
<td align="left"><code>assignment_lhs_identifier:o</code></td>
<td align="left">12</td>
</tr>
<tr>
<td align="left"><code>assignment_lhs_identifier:first</code></td>
<td align="left">18</td>
</tr>
<tr>
<td align="left"><code>assignment_lhs_identifier:second</code></td>
<td align="left">18</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-assignment95rhs95atom">Feature <code>assignment_rhs_atom</code></h4>
<p>Capture any <a href="#feature-call_argument"><em>atom</em></a> appearing on the right hand side of an assignment (possibly augmented), except the function names.</p>
<h5 id="derivations_29">Derivations</h5>
<p><a href="#feature-find_best_element">⬇️ feature <code>find_best_element</code></a>
<a href="#feature-update_by_assignment">⬇️ feature <code>update_by_assignment</code></a>
<a href="#feature-update_by_augmented_assignment">⬇️ feature <code>update_by_augmented_assignment</code></a></p>
<h5 id="specification_51">Specification</h5>
<pre><code class="re">^(.*/assignvalue\b.*)/_pos=(?P&lt;POS&gt;.+)
\n                 \1/(value|n|(?&lt;!func/)id)=(?P&lt;SUFFIX&gt;.+)
</code></pre>
<h5 id="example_51">Example</h5>
<pre><code class="python">1   a = a + b + c
2   a += a + b + c
3   a = a[b[c]]
4   a += a[b[c]]
5   a = foo(bar()) # no match
6   a += foo(bar) # matches &quot;bar&quot; only
7   a = a + i
8   a += i
9   a[i] = b
10  first = second = third # matches &quot;third&quot; only
11  a = 42
12  a = True
13  a = None
14  a = [] # no match
15  a = foo.bar(fizz) # matches &quot;foo&quot; and &quot;fizz&quot; only
</code></pre>
<h5 id="matches_51">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>assignment_rhs_atom:a</code></td>
<td align="left">1, 2, 3, 4, 7</td>
</tr>
<tr>
<td align="left"><code>assignment_rhs_atom:b</code></td>
<td align="left">1, 2, 3, 4, 9</td>
</tr>
<tr>
<td align="left"><code>assignment_rhs_atom:c</code></td>
<td align="left">1, 2, 3, 4</td>
</tr>
<tr>
<td align="left"><code>assignment_rhs_atom:bar</code></td>
<td align="left">6</td>
</tr>
<tr>
<td align="left"><code>assignment_rhs_atom:i</code></td>
<td align="left">7, 8</td>
</tr>
<tr>
<td align="left"><code>assignment_rhs_atom:third</code></td>
<td align="left">10</td>
</tr>
<tr>
<td align="left"><code>assignment_rhs_atom:42</code></td>
<td align="left">11</td>
</tr>
<tr>
<td align="left"><code>assignment_rhs_atom:True</code></td>
<td align="left">12</td>
</tr>
<tr>
<td align="left"><code>assignment_rhs_atom:None</code></td>
<td align="left">13</td>
</tr>
<tr>
<td align="left"><code>assignment_rhs_atom:foo</code></td>
<td align="left">15</td>
</tr>
<tr>
<td align="left"><code>assignment_rhs_atom:fizz</code></td>
<td align="left">15</td>
</tr>
</tbody>
</table>
<hr>
<h3 id="assignment-idioms">Assignment idioms</h3>
<hr>
<h4 id="feature-update95by95assignment">Feature <code>update_by_assignment</code></h4>
<p>Match the reassignment of a variable <code>x</code> and capture its name in the first part of the suffix. In the second part, match any atom distinct from <code>x</code> and participating in the update (this excludes any function name).</p>
<h5 id="derivations_30">Derivations</h5>
<p><a href="#feature-assignment">⬆️ feature <code>assignment</code></a>
<a href="#feature-assignment_lhs_identifier">⬆️ feature <code>assignment_lhs_identifier</code></a>
<a href="#feature-assignment_rhs_atom">⬆️ feature <code>assignment_rhs_atom</code></a>
<a href="#feature-update">⬇️ feature <code>update</code></a>
<a href="#feature-update_by_assignment_with">⬇️ feature <code>update_by_assignment_with</code></a></p>
<h5 id="specification_52">Specification</h5>
<pre><code class="sql">SELECT &quot;update_by_assignment&quot;,
       lhs_acc.name_suffix || &quot;:&quot; || rhs_var.name_suffix,
       op.span,
       op.path
FROM t_assignment AS op
JOIN t_assignment_lhs_identifier AS lhs_acc ON (lhs_acc.path GLOB op.path || &quot;*-&quot;)
JOIN t_assignment_rhs_atom AS rhs_acc ON (rhs_acc.path GLOB op.path || &quot;*-&quot;)
JOIN t_assignment_rhs_atom AS rhs_var ON (rhs_var.path GLOB op.path || &quot;*-&quot;)
WHERE rhs_acc.name_suffix = lhs_acc.name_suffix -- The same identifier must appear on both LHS and RHS...
  AND rhs_acc.name_suffix != rhs_var.name_suffix -- and an atom distinct from this identifier must appear on RHS.
GROUP BY op.span,
         lhs_acc.name,
         rhs_var.name
</code></pre>
<h5 id="example_52">Example</h5>
<pre><code class="python">1   foo = foo + a
2   bar = bar.mult(5)
3   bar = mult(bar, 5)
4   (x, y) = (y, x)
5   (a, b) = (b, a + b)
</code></pre>
<h5 id="matches_52">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>update_by_assignment:foo:a</code></td>
<td align="left">1</td>
</tr>
<tr>
<td align="left"><code>update_by_assignment:bar:5</code></td>
<td align="left">2, 3</td>
</tr>
<tr>
<td align="left"><code>update_by_assignment:x:y</code></td>
<td align="left">4</td>
</tr>
<tr>
<td align="left"><code>update_by_assignment:y:x</code></td>
<td align="left">4</td>
</tr>
<tr>
<td align="left"><code>update_by_assignment:a:b</code></td>
<td align="left">5</td>
</tr>
<tr>
<td align="left"><code>update_by_assignment:b:a</code></td>
<td align="left">5</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-update95by95augmented95assignment">Feature <code>update_by_augmented_assignment</code></h4>
<p>Match the augmented assignment of a variable <code>x</code> and capture its name in the first part of the suffix. In the second part, match any atom participating to the update (this excludes any function name).</p>
<h5 id="derivations_31">Derivations</h5>
<p><a href="#feature-assignment_lhs_identifier">⬆️ feature <code>assignment_lhs_identifier</code></a>
<a href="#feature-assignment_rhs_atom">⬆️ feature <code>assignment_rhs_atom</code></a>
<a href="#feature-augmented_assignment">⬆️ feature <code>augmented_assignment</code></a>
<a href="#feature-update">⬇️ feature <code>update</code></a>
<a href="#feature-update_by_augmented_assignment_with">⬇️ feature <code>update_by_augmented_assignment_with</code></a></p>
<h5 id="specification_53">Specification</h5>
<pre><code class="sql">SELECT &quot;update_by_augmented_assignment&quot;,
       lhs_acc.name_suffix || &quot;:&quot; || rhs_var.name_suffix,
       op.span,
       op.path
FROM t_augmented_assignment AS op
JOIN t_assignment_lhs_identifier AS lhs_acc ON (lhs_acc.path GLOB op.path || &quot;*-&quot;)
JOIN t_assignment_rhs_atom AS rhs_var ON (rhs_var.path GLOB op.path || &quot;*-&quot;)
GROUP BY op.span,
         lhs_acc.name,
         rhs_var.name
</code></pre>
<h5 id="example_53">Example</h5>
<pre><code class="python">1   foo += a
2   foo += [a]
3   buzz += a + b + c
4   s *= (x - 1) / x
5   c[j] += c[i- 1]
</code></pre>
<h5 id="matches_53">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>update_by_augmented_assignment:foo:a</code></td>
<td align="left">1, 2</td>
</tr>
<tr>
<td align="left"><code>update_by_augmented_assignment:buzz:a</code></td>
<td align="left">3</td>
</tr>
<tr>
<td align="left"><code>update_by_augmented_assignment:buzz:b</code></td>
<td align="left">3</td>
</tr>
<tr>
<td align="left"><code>update_by_augmented_assignment:buzz:c</code></td>
<td align="left">3</td>
</tr>
<tr>
<td align="left"><code>update_by_augmented_assignment:s:1</code></td>
<td align="left">4</td>
</tr>
<tr>
<td align="left"><code>update_by_augmented_assignment:s:x</code></td>
<td align="left">4</td>
</tr>
<tr>
<td align="left"><code>update_by_augmented_assignment:c:1</code></td>
<td align="left">5</td>
</tr>
<tr>
<td align="left"><code>update_by_augmented_assignment:c:c</code></td>
<td align="left">5</td>
</tr>
<tr>
<td align="left"><code>update_by_augmented_assignment:c:i</code></td>
<td align="left">5</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-update95by95member95call">Feature <code>update_by_member_call</code></h4>
<p>The method must mutate the object it is applied on. Obviously, only a handful of such methods can be statically detected.</p>
<h5 id="derivations_32">Derivations</h5>
<p><a href="#feature-call_argument">⬆️ feature <code>call_argument</code></a>
<a href="#feature-member_call">⬆️ feature <code>member_call</code></a>
<a href="#feature-member_call_object">⬆️ feature <code>member_call_object</code></a>
<a href="#feature-update">⬇️ feature <code>update</code></a>
<a href="#feature-update_by_member_call_with">⬇️ feature <code>update_by_member_call_with</code></a></p>
<h5 id="specification_54">Specification</h5>
<pre><code class="sql">SELECT &quot;update_by_member_call&quot;,
       lhs_acc.name_suffix || &quot;:&quot; || rhs_var.name_suffix,
       op.span,
       op.path
FROM t_member_call AS op
JOIN t_member_call_object AS lhs_acc ON (lhs_acc.path GLOB op.path || &quot;*-&quot;)
JOIN t_call_argument AS rhs_var ON (rhs_var.path GLOB op.path || &quot;*-&quot;)
WHERE rhs_var.name_suffix != &quot;&quot;
  AND op.name_suffix REGEXP &quot;(append|extend|insert|add|update|remove|pop)$&quot;
GROUP BY op.span,
         lhs_acc.name,
         rhs_var.name
</code></pre>
<h5 id="example_54">Example</h5>
<pre><code class="python">1   foo.append(a)
2   seq.append(int(s))
</code></pre>
<h5 id="matches_54">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>update_by_member_call:foo:a</code></td>
<td align="left">1</td>
</tr>
<tr>
<td align="left"><code>update_by_member_call:seq:s</code></td>
<td align="left">2</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-update">Feature <code>update</code></h4>
<p>Match the update of a variable <code>x</code> and capture its name in the first part of the suffix. In the second part, match any atom distinct from <code>x</code> and participating to the update (this excludes any function name).</p>
<h5 id="derivations_33">Derivations</h5>
<p><a href="#feature-update_by_assignment">⬆️ feature <code>update_by_assignment</code></a>
<a href="#feature-update_by_augmented_assignment">⬆️ feature <code>update_by_augmented_assignment</code></a>
<a href="#feature-update_by_member_call">⬆️ feature <code>update_by_member_call</code></a>
<a href="#feature-accumulate_elements">⬇️ feature <code>accumulate_elements</code></a>
<a href="#feature-accumulate_inputs">⬇️ feature <code>accumulate_inputs</code></a>
<a href="#feature-accumulate_some_elements">⬇️ feature <code>accumulate_some_elements</code></a></p>
<h5 id="specification_55">Specification</h5>
<pre><code class="sql">SELECT &quot;update&quot;,
       t.name_suffix,
       t.span,
       t.path
FROM t
WHERE name_prefix IN (&quot;update_by_assignment&quot;,
                      &quot;update_by_augmented_assignment&quot;,
                      &quot;update_by_member_call&quot;)
</code></pre>
<h5 id="example_55">Example</h5>
<pre><code class="python">1   foo = foo + a
2   foo += a
3   foo.append(a)
4   foo += [a]
5
6   bar = bar.mult(5)
7   bar = mult(bar, 5)
8
9   fizz = fizz.upper() # no match
10  fizz.process(a) # no match
11
12  buzz += a + b + c
13  s *= (x - 1) / x
14  c[j] += c[i- 1]
15  (x, y) = (y, x)
16  (a, b) = (b, a + b)
17  seq.append(int(s))
</code></pre>
<h5 id="matches_55">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>update:foo:a</code></td>
<td align="left">1, 2, 4, 3</td>
</tr>
<tr>
<td align="left"><code>update:bar:5</code></td>
<td align="left">6, 7</td>
</tr>
<tr>
<td align="left"><code>update:buzz:a</code></td>
<td align="left">12</td>
</tr>
<tr>
<td align="left"><code>update:buzz:b</code></td>
<td align="left">12</td>
</tr>
<tr>
<td align="left"><code>update:buzz:c</code></td>
<td align="left">12</td>
</tr>
<tr>
<td align="left"><code>update:s:1</code></td>
<td align="left">13</td>
</tr>
<tr>
<td align="left"><code>update:s:x</code></td>
<td align="left">13</td>
</tr>
<tr>
<td align="left"><code>update:c:1</code></td>
<td align="left">14</td>
</tr>
<tr>
<td align="left"><code>update:c:c</code></td>
<td align="left">14</td>
</tr>
<tr>
<td align="left"><code>update:c:i</code></td>
<td align="left">14</td>
</tr>
<tr>
<td align="left"><code>update:x:y</code></td>
<td align="left">15</td>
</tr>
<tr>
<td align="left"><code>update:y:x</code></td>
<td align="left">15</td>
</tr>
<tr>
<td align="left"><code>update:a:b</code></td>
<td align="left">16</td>
</tr>
<tr>
<td align="left"><code>update:b:a</code></td>
<td align="left">16</td>
</tr>
<tr>
<td align="left"><code>update:seq:s</code></td>
<td align="left">17</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-update95by95assignment95with">Feature <code>update_by_assignment_with</code></h4>
<h5 id="derivations_34">Derivations</h5>
<p><a href="#feature-assignment">⬆️ feature <code>assignment</code></a>
<a href="#feature-update_by_assignment">⬆️ feature <code>update_by_assignment</code></a>
<a href="#feature-update_with">⬇️ feature <code>update_with</code></a></p>
<h5 id="specification_56">Specification</h5>
<pre><code class="sql">SELECT &quot;update_by_assignment_with&quot;,
       op.name_suffix,
       op.span,
       op.path
FROM t_assignment AS op
JOIN t_update_by_assignment USING (path)
GROUP BY op.path
</code></pre>
<h5 id="example_56">Example</h5>
<pre><code class="python">1   foo = foo + a
2   bar = bar.mult(5)
3   bar = mult(bar, 5)
4   (x, y) = (y, x)
5   (a, b) = (b, a + b)
</code></pre>
<h5 id="matches_56">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>update_by_assignment_with:Add</code></td>
<td align="left">1</td>
</tr>
<tr>
<td align="left"><code>update_by_assignment_with:mult</code></td>
<td align="left">2, 3</td>
</tr>
<tr>
<td align="left"><code>update_by_assignment_with</code></td>
<td align="left">4, 5</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-update95by95augmented95assignment95with">Feature <code>update_by_augmented_assignment_with</code></h4>
<h5 id="derivations_35">Derivations</h5>
<p><a href="#feature-augmented_assignment">⬆️ feature <code>augmented_assignment</code></a>
<a href="#feature-update_by_augmented_assignment">⬆️ feature <code>update_by_augmented_assignment</code></a>
<a href="#feature-update_with">⬇️ feature <code>update_with</code></a></p>
<h5 id="specification_57">Specification</h5>
<pre><code class="sql">SELECT &quot;update_by_augmented_assignment_with&quot;,
       op.name_suffix,
       op.span,
       op.path
FROM t_augmented_assignment op
JOIN t_update_by_augmented_assignment USING (path)
GROUP BY path
</code></pre>
<h5 id="example_57">Example</h5>
<pre><code class="python">1   foo += a
2   foo += [a]
3   buzz += a + b + c
4   s *= (x - 1) / x
5   c[j] += c[i- 1]
</code></pre>
<h5 id="matches_57">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>update_by_augmented_assignment_with:Add</code></td>
<td align="left">1, 2, 3, 5</td>
</tr>
<tr>
<td align="left"><code>update_by_augmented_assignment_with:Mult</code></td>
<td align="left">4</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-update95by95member95call95with">Feature <code>update_by_member_call_with</code></h4>
<h5 id="derivations_36">Derivations</h5>
<p><a href="#feature-member_call">⬆️ feature <code>member_call</code></a>
<a href="#feature-update_by_member_call">⬆️ feature <code>update_by_member_call</code></a>
<a href="#feature-update_with">⬇️ feature <code>update_with</code></a></p>
<h5 id="specification_58">Specification</h5>
<pre><code class="sql">SELECT &quot;update_by_member_call_with&quot;,
       op.name_suffix,
       op.span,
       op.path
FROM t_member_call AS op
JOIN t_update_by_member_call USING (path)
GROUP BY op.path
</code></pre>
<h5 id="example_58">Example</h5>
<pre><code class="python">1   foo.append(a)
2   seq.append(int(s))
</code></pre>
<h5 id="matches_58">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>update_by_member_call_with:append</code></td>
<td align="left">1, 2</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-update95with">Feature <code>update_with</code></h4>
<h5 id="derivations_37">Derivations</h5>
<p><a href="#feature-update_by_assignment_with">⬆️ feature <code>update_by_assignment_with</code></a>
<a href="#feature-update_by_augmented_assignment_with">⬆️ feature <code>update_by_augmented_assignment_with</code></a>
<a href="#feature-update_by_member_call_with">⬆️ feature <code>update_by_member_call_with</code></a>
<a href="#feature-accumulate_elements">⬇️ feature <code>accumulate_elements</code></a>
<a href="#feature-accumulate_some_elements">⬇️ feature <code>accumulate_some_elements</code></a></p>
<h5 id="specification_59">Specification</h5>
<pre><code class="sql">SELECT &quot;update_with&quot;,
       t.name_suffix,
       t.span,
       t.path
FROM t
WHERE name_prefix IN (&quot;update_by_assignment_with&quot;,
                      &quot;update_by_augmented_assignment_with&quot;,
                      &quot;update_by_member_call_with&quot;)
</code></pre>
<h5 id="example_59">Example</h5>
<pre><code class="python">1   foo = foo + a
2   foo += a
3   foo.append(a)
4   foo += [a]
5
6   bar = bar.mult(5)
7   bar = mult(bar, 5)
8
9   fizz = fizz.upper() # no match
10  fizz.process(a) # no match
11
12  buzz += a + b + c
13  s *= (x - 1) / x
14  c[j] += c[i- 1]
15  (x, y) = (y, x)
16  (a, b) = (b, a + b)
17  seq.append(int(s))
</code></pre>
<h5 id="matches_59">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>update_with:Add</code></td>
<td align="left">1, 14, 2, 4, 12</td>
</tr>
<tr>
<td align="left"><code>update_with:mult</code></td>
<td align="left">6, 7</td>
</tr>
<tr>
<td align="left"><code>update_with:Mult</code></td>
<td align="left">13</td>
</tr>
<tr>
<td align="left"><code>update_with</code></td>
<td align="left">15, 16</td>
</tr>
<tr>
<td align="left"><code>update_with:append</code></td>
<td align="left">17, 3</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-increment">Feature <code>increment</code></h4>
<h5 id="derivations_38">Derivations</h5>
<p><a href="#feature-count_elementscount_states">⬇️ feature <code>count_elements|count_states</code></a>
<a href="#feature-count_inputs">⬇️ feature <code>count_inputs</code></a></p>
<h5 id="specification_60">Specification</h5>
<pre><code class="re">               ^(.*)/_type=
(   # augmented assignment
                           AugAssign
    \n(?:\1.+\n)*?\1/_pos=(?P&lt;POS&gt;.+)
    (
        \n(?:\1.+\n)*?\1/assigntarget/id=(?P&lt;SUFFIX&gt;.+)
    )?
    \n(?:\1.+\n)*?\1/op/_type=Add
    \n(?:\1.+\n)*?\1/assignvalue/n=1
|   # simple assignment
                           Assign
    \n(?:\1.+\n)*?\1/_pos=(?P&lt;POS&gt;.+)
    \n(?:\1.+\n)*?\1/assigntargets/1/_hash=(?P&lt;HASH&gt;.+) # capture _hash
    \n(?:\1.+\n)*?\1/assignvalue/_type=BinOp
    \n(?:\1.+\n)*?\1/assignvalue/left/_hash=(?P=HASH) # match _hash
    (
        \n(?:\1.+\n)*?\1/assignvalue/left/id=(?P&lt;SUFFIX&gt;.+)
    )?
    \n(?:\1.+\n)*?\1/assignvalue/op/_type=Add
    \n(?:\1.+\n)*?\1/assignvalue/right/n=1
)
</code></pre>
<h5 id="example_60">Example</h5>
<pre><code class="python">1   a = a + 1
2   a = 1 + a # LIMITATION: no match for Yoda style
3   b += 1
4   a[i+j] += 1
5   b[foo()] = b[foo()] + 1
</code></pre>
<h5 id="matches_60">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>increment:a</code></td>
<td align="left">1</td>
</tr>
<tr>
<td align="left"><code>increment:b</code></td>
<td align="left">3</td>
</tr>
<tr>
<td align="left"><code>increment</code></td>
<td align="left">4, 5</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-swap">Feature <code>swap</code></h4>
<p>Swap two variables or two elements of an array with a 2-element tuple or list.</p>
<h5 id="specification_61">Specification</h5>
<pre><code class="re">           ^(.*)/_type=Assign
\n(?:\1.+\n)*?\1/_pos=(?P&lt;POS&gt;.+)
\n(?:\1.+\n)*?\1/assigntargets/1/elts/1/_hash=(?P&lt;HASH_A&gt;.+)
\n(?:\1.+\n)*?\1/assigntargets/1/elts/2/_hash=(?P&lt;HASH_B&gt;.+)
\n(?:\1.+\n)*?\1/assignvalue/elts/1/_hash=(?P=HASH_B)
\n(?:\1.+\n)*?\1/assignvalue/elts/2/_hash=(?P=HASH_A)
</code></pre>
<h5 id="example_61">Example</h5>
<pre><code class="python">1   (a, b) = (b, a)
2   [a, b] = [b, a]
3   (a[0], a[1]) = (a[1], a[0])
4   (a[i], a[i + 1]) = (a[i + 1], a[i])
5
6   aux = x # LIMITATION: no match for the traditional method with a temporary variable
7   x = y
8   y = aux
</code></pre>
<h5 id="matches_61">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>swap</code></td>
<td align="left">1, 2, 3, 4</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-slide">Feature <code>slide</code></h4>
<p>« Slide » a window on two variables, the value of the second one being copied in the first one.</p>
<h5 id="specification_62">Specification</h5>
<pre><code class="re">           ^(.*)/_type=Assign
\n(?:\1.+\n)*?\1/_pos=(?P&lt;POS&gt;.+)
\n(?:\1.+\n)*?\1/assigntargets/1/elts/1/_hash=(?P&lt;HASH_A&gt;.+)
\n(?:\1.+\n)*?\1/assigntargets/1/elts/2/_hash=(?P&lt;HASH_B&gt;.+)
\n(?:\1.+\n)*?\1/assignvalue/elts/1/_hash=(?P=HASH_B)
\n(?:\1.+\n)*?\1/assignvalue/elts/2/_hash=(?!(?P=HASH_A)).+
</code></pre>
<h5 id="example_62">Example</h5>
<pre><code class="python">1   (a, b) = (b, a + b) # cf. Fibonacci
2   (a, b) = (b, a % b) # cf. Greatest Common Divisor
3   (array[pivot_index], array[i]) = (array[i], pivot) # cf. Quick Sort
4   (a, b) = (b, a) # no match
</code></pre>
<h5 id="matches_62">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>slide</code></td>
<td align="left">1, 2, 3</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-negate">Feature <code>negate</code></h4>
<p>Update a variable by negating it.</p>
<h5 id="specification_63">Specification</h5>
<pre><code class="re">           ^(.*)/_type=Assign
\n(?:\1.+\n)*?\1/_pos=(?P&lt;POS&gt;.+)
\n(?:\1.+\n)*?\1/assigntargets/1/_hash=(?P&lt;HASH&gt;.+) # capture hash
\n(?:\1.+\n)*?\1/assignvalue/_type=UnaryOp
\n(?:\1.+\n)*?\1/assignvalue/op/_type=USub
\n(?:\1.+\n)*?\1/assignvalue/operand/_hash=(?P=HASH) # match hash
</code></pre>
<h5 id="example_63">Example</h5>
<pre><code class="python">1   a = -a
2   numbers[i] = -numbers[i]
3   a -= 2 * a # LIMITATION: no match
4   a = -1 * a # LIMITATION: no match
5   a = -abs(a) # no match
</code></pre>
<h5 id="matches_63">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>negate</code></td>
<td align="left">1, 2</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-verbose95conditional95assignment">Feature <code>verbose_conditional_assignment</code></h4>
<p>A conditional statement whose each branch consists solely in a assignment to the same variable (could be rewritten as a conditional expression).</p>
<h5 id="specification_64">Specification</h5>
<pre><code class="re">           ^(.*)/_type=If
\n(?:\1.+\n)*?\1/_pos=(?P&lt;POS&gt;.+)
\n(?:\1.+\n)*?\1/body/length=1
\n(?:\1.+\n)*?\1/body/1/_type=Assign
\n(?:\1.+\n)*?\1/body/1/assigntargets/1/_hash=(?P&lt;HASH&gt;.+)
\n(?:\1.+\n)*?\1/orelse/length=1
\n(?:\1.+\n)*?\1/orelse/1/_type=Assign
\n(?:\1.+\n)*?\1/orelse/1/_pos=(?P&lt;POS&gt;.+)
\n(?:\1.+\n)*?\1/orelse/1/assigntargets/1/_hash=(?P=HASH)
</code></pre>
<h5 id="example_64">Example</h5>
<pre><code class="python">1   if condition:
2       a[i] = 1
3   else:
4       a[i] = 2
5
6   if condition:
7       a = 1
8       b = 0
9   else:
10      a = 2
11
12  if condition:
13      a = 1
14  else:
15      b = 0
16      a = 2
</code></pre>
<h5 id="matches_64">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>verbose_conditional_assignment</code></td>
<td align="left">1-4</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-compact95conditional95assignment">Feature <code>compact_conditional_assignment</code></h4>
<p>Assignment to the result of a conditional expression.</p>
<h5 id="specification_65">Specification</h5>
<pre><code class="re">           ^(.*)/assignvalue/_type=IfExp
\n(?:\1.+\n)*?\1/assignvalue/_pos=(?P&lt;POS&gt;.+)
</code></pre>
<h5 id="example_65">Example</h5>
<pre><code class="python">1   a[i] = 1 if condition else 2
</code></pre>
<h5 id="matches_65">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>compact_conditional_assignment</code></td>
<td align="left">1</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-corrective95conditional95assignment">Feature <code>corrective_conditional_assignment</code></h4>
<p>Assign a “default” value to a variable, then if a certain condition is satisfied, update it. This form is sometimes preferred, especially when the plain form would require the repetition of a complex sub-expression.</p>
<h5 id="specification_66">Specification</h5>
<pre><code class="re">           ^(.*)/(?P&lt;_1&gt;\d+)/_type=Assign
\n(?:\1/(?P=_1).+\n)*?\1/(?P=_1)/_pos=(?P&lt;POS&gt;.+)
\n(?:\1/(?P=_1).+\n)*?\1/(?P=_1)/assigntargets/1/_hash=(?P&lt;HASH&gt;.+)
\n(?:\1/(?P=_1).+\n)*?\1/(?P&lt;_2&gt;\d+)/_type=If
\n(?:\1/(?P=_2).+\n)*?\1/(?P=_2)    /body/length=1
\n(?:\1/(?P=_2).+\n)*?\1/(?P=_2)    /body/1/_type=(?:Aug)?Assign
\n(?:\1/(?P=_2).+\n)*?\1/(?P=_2)    /body/1/_pos=(?P&lt;POS&gt;.+)
\n(?:\1/(?P=_2).+\n)*?\1/(?P=_2)    /body/1/assigntarget(s/1)?/_hash=(?P=HASH)
\n(?:\1/(?P=_2).+\n)*?\1/(?P=_2)    /orelse/length=0
</code></pre>
<h5 id="example_66">Example</h5>
<pre><code class="python">1   double = 2 * int(number[-i - 1])
2   if double &gt; 9:
3       double -= 9
4
5   double = 2 * int(number[-i - 1])
6   if double &gt; 9:
7       double = double - 9
</code></pre>
<h5 id="matches_66">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>corrective_conditional_assignment</code></td>
<td align="left">1-3, 5-7</td>
</tr>
</tbody>
</table>
<hr>
<h2 id="function-definitions">Function definitions</h2>
<h3 id="interface">Interface</h3>
<hr>
<h4 id="feature-function">Feature <code>function</code></h4>
<p>In Python, the term "function" encompasses any type of subroutine, be it a method, a procedure, a generator or a "pure" function.</p>
<h5 id="derivations_39">Derivations</h5>
<p><a href="#feature-closure">⬇️ feature <code>closure</code></a>
<a href="#feature-deeply_recursive_function">⬇️ feature <code>deeply_recursive_function</code></a>
<a href="#feature-function_returning_nothing">⬇️ feature <code>function_returning_nothing</code></a>
<a href="#feature-function_returning_something">⬇️ feature <code>function_returning_something</code></a>
<a href="#feature-generator">⬇️ feature <code>generator</code></a>
<a href="#feature-higher-order-function">⬇️ feature <code>higher-order function</code></a>
<a href="#feature-if_guard">⬇️ feature <code>if_guard</code></a>
<a href="#feature-internal_free_call">⬇️ feature <code>internal_free_call</code></a>
<a href="#feature-method">⬇️ feature <code>method</code></a>
<a href="#feature-recursive_function">⬇️ feature <code>recursive_function</code></a></p>
<h5 id="specification_67">Specification</h5>
<pre><code class="re">           ^(.*)/_type=FunctionDef
\n(?:\1.+\n)*?\1/_pos=(?P&lt;POS&gt;.+)
\n(?:\1.+\n)*?\1/name=(?P&lt;SUFFIX&gt;.+)
\n(?:\1.+\n)* \1/.+/_pos=(?P&lt;POS&gt;.+)
</code></pre>
<h5 id="example_67">Example</h5>
<pre><code class="python">1   def foo(bar):
2       def fizz(buzz):
3           a += 1
4           print(a)
5
6       bar += 1
7       print(bar)
8
9   @decoration
10  def christmas_tree():
11      pass
12
13  def function_with_types(x: Int) -&gt; Int:
14      return x + 1
15
16  class Foo:
17
18      def bar(self):
19          pass
20
21  def generator():
22      yield x
</code></pre>
<h5 id="matches_67">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>function:foo</code></td>
<td align="left">1-7</td>
</tr>
<tr>
<td align="left"><code>function:fizz</code></td>
<td align="left">2-4</td>
</tr>
<tr>
<td align="left"><code>function:christmas_tree</code></td>
<td align="left">9-11</td>
</tr>
<tr>
<td align="left"><code>function:function_with_types</code></td>
<td align="left">13-14</td>
</tr>
<tr>
<td align="left"><code>function:bar</code></td>
<td align="left">18-19</td>
</tr>
<tr>
<td align="left"><code>function:generator</code></td>
<td align="left">21-22</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-return">Feature <code>return</code></h4>
<p>Match <code>return</code> statements and, when the returned object is an <a href="#feature-call_argument"><em>atom</em></a>, suffix it. Note that a <code>return</code> statement returning no value is denoted by <code>return:None</code>, not to be confounded with <code>return</code> (without suffix), which denotes the return of a non-atomic object.</p>
<h5 id="derivations_40">Derivations</h5>
<p><a href="#feature-accumulate_inputs">⬇️ feature <code>accumulate_inputs</code></a>
<a href="#feature-closure">⬇️ feature <code>closure</code></a>
<a href="#feature-count_inputs">⬇️ feature <code>count_inputs</code></a>
<a href="#feature-find_first_element">⬇️ feature <code>find_first_element</code></a>
<a href="#feature-function_returning_something">⬇️ feature <code>function_returning_something</code></a>
<a href="#feature-get_valid_input">⬇️ feature <code>get_valid_input</code></a>
<a href="#feature-if_guard">⬇️ feature <code>if_guard</code></a>
<a href="#feature-loop_with_return">⬇️ feature <code>loop_with_return</code></a>
<a href="#feature-universal_quantificationexistential_quantification">⬇️ feature <code>universal_quantification|existential_quantification</code></a></p>
<h5 id="specification_68">Specification</h5>
<pre><code class="re">           ^(.*)/_type=Return
\n(?:\1.+\n)*?\1/_pos=(?P&lt;POS&gt;.+)
(
\n(?:\1.+\n)*?\1/value(/value|/n|/id)?=(?P&lt;SUFFIX&gt;.+)
)?
</code></pre>
<h5 id="example_68">Example</h5>
<pre><code class="python">1   def foobar():
2       return a
3       return (b, c) # no suffix
4       return d(e)   # no suffix
5       return f + g  # no suffix
6       return 2
7       return True
8       return None
9       return
10      return &quot;foobar&quot;
</code></pre>
<h5 id="matches_68">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>return:a</code></td>
<td align="left">2</td>
</tr>
<tr>
<td align="left"><code>return</code></td>
<td align="left">3, 4, 5, 10</td>
</tr>
<tr>
<td align="left"><code>return:2</code></td>
<td align="left">6</td>
</tr>
<tr>
<td align="left"><code>return:True</code></td>
<td align="left">7</td>
</tr>
<tr>
<td align="left"><code>return:None</code></td>
<td align="left">8, 9</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-yield">Feature <code>yield</code></h4>
<p>Match <code>yield</code> and <code>yieldfrom</code> <em><a href="https://docs.python.org/3/reference/expressions.html#yield-expressions">expressions</a></em> (generally used as statements) and, when the yielded object is an <a href="#feature-call_argument">atom</a>, suffix it.</p>
<h5 id="derivations_41">Derivations</h5>
<p><a href="#feature-generator">⬇️ feature <code>generator</code></a></p>
<h5 id="specification_69">Specification</h5>
<pre><code class="re">           ^(.*)/_type=Yield(From)?
\n(?:\1.+\n)*?\1/_pos=(?P&lt;POS&gt;.+)
(
\n(?:\1.+\n)*?\1/value(/value|/n|/id)?=(?P&lt;SUFFIX&gt;.+)
)?
</code></pre>
<h5 id="example_69">Example</h5>
<pre><code class="python">1   def foobar():
2       yield a
3       yield (b, c) # no suffix
4       yield d(e)   # no suffix
5       yield f + g  # no suffix
6       yield 2
7       yield True
8       yield None
9       yield
10      yield from seq
</code></pre>
<h5 id="matches_69">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>yield:a</code></td>
<td align="left">2</td>
</tr>
<tr>
<td align="left"><code>yield</code></td>
<td align="left">3, 4, 5</td>
</tr>
<tr>
<td align="left"><code>yield:2</code></td>
<td align="left">6</td>
</tr>
<tr>
<td align="left"><code>yield:True</code></td>
<td align="left">7</td>
</tr>
<tr>
<td align="left"><code>yield:None</code></td>
<td align="left">8, 9</td>
</tr>
<tr>
<td align="left"><code>yield:seq</code></td>
<td align="left">10</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-generator">Feature <code>generator</code></h4>
<h5 id="derivations_42">Derivations</h5>
<p><a href="#feature-function">⬆️ feature <code>function</code></a>
<a href="#feature-yield">⬆️ feature <code>yield</code></a>
<a href="#feature-function_returning_nothing">⬇️ feature <code>function_returning_nothing</code></a></p>
<h5 id="specification_70">Specification</h5>
<pre><code class="sql">SELECT &quot;generator&quot;,
       f.name_suffix,
       max(f.span_start) || &quot;-&quot; || min(f.span_end),
       max(f.path)
FROM t_function f
JOIN t_yield y ON (y.path GLOB f.path || &quot;*-&quot;)
GROUP BY y.rowid
</code></pre>
<h5 id="example_70">Example</h5>
<pre><code class="python">1   def foo():
2       for x in s:
3           yield bar
4
5   def energy():
6       yield from waste
</code></pre>
<h5 id="matches_70">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>generator:foo</code></td>
<td align="left">1-3</td>
</tr>
<tr>
<td align="left"><code>generator:energy</code></td>
<td align="left">5-6</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-function95returning95something">Feature <code>function_returning_something</code></h4>
<p>A function returning at least one value distinct from <code>None</code> is the smallest <code>function</code> featuring <code>return_something</code>.</p>
<h5 id="derivations_43">Derivations</h5>
<p><a href="#feature-function">⬆️ feature <code>function</code></a>
<a href="#feature-return">⬆️ feature <code>return</code></a>
<a href="#feature-function_returning_nothing">⬇️ feature <code>function_returning_nothing</code></a></p>
<h5 id="specification_71">Specification</h5>
<pre><code class="sql">SELECT &quot;function_returning_something&quot;,
       f.name_suffix,
       max(f.span_start) || &quot;-&quot; || min(f.span_end),
       max(f.path)
FROM t_function f
JOIN t_return r ON (r.path GLOB f.path || &quot;*-&quot;)
WHERE r.name_suffix != &quot;None&quot;
GROUP BY r.rowid
</code></pre>
<h5 id="example_71">Example</h5>
<pre><code class="python">1   def a():
2       return x
3
4   def b():
5       return
6
7   def c():
8       if foobar:
9           return 0
10      return
11
12  def d():
13      yield x
14
15  def e():
16      def f():
17          return x
18      pass
19
20  def g():
21      def h():
22          pass
23      return x
</code></pre>
<h5 id="matches_71">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>function_returning_something:a</code></td>
<td align="left">1-2</td>
</tr>
<tr>
<td align="left"><code>function_returning_something:c</code></td>
<td align="left">7-10</td>
</tr>
<tr>
<td align="left"><code>function_returning_something:f</code></td>
<td align="left">16-17</td>
</tr>
<tr>
<td align="left"><code>function_returning_something:g</code></td>
<td align="left">20-23</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-function95returning95nothing">Feature <code>function_returning_nothing</code></h4>
<p>A function returning nothing (<em>aka</em> a procedure) is a function which is neither a generator or a function returning something.</p>
<h5 id="derivations_44">Derivations</h5>
<p><a href="#feature-function">⬆️ feature <code>function</code></a>
<a href="#feature-function_returning_something">⬆️ feature <code>function_returning_something</code></a>
<a href="#feature-generator">⬆️ feature <code>generator</code></a></p>
<h5 id="specification_72">Specification</h5>
<pre><code class="sql">SELECT &quot;function_returning_nothing&quot;,
       t_function.name_suffix,
       t_function.span,
       t_function.path
FROM t_function
LEFT JOIN t ON (t_function.span = t.span
                AND t.name_prefix IN (&quot;function_returning_something&quot;,
                                      &quot;generator&quot;))
WHERE t.span IS NULL
</code></pre>
<h5 id="example_72">Example</h5>
<pre><code class="python">1   def a():
2       return x
3
4   def b():
5       return
6
7   def c():
8       if foobar:
9           return 0
10      return
11
12  def d():
13      yield x
14
15  def e():
16      def f():
17          return x
18      pass
19
20  def g():
21      def h():
22          pass
23      return x
</code></pre>
<h5 id="matches_72">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>function_returning_nothing:b</code></td>
<td align="left">4-5</td>
</tr>
<tr>
<td align="left"><code>function_returning_nothing:e</code></td>
<td align="left">15-18</td>
</tr>
<tr>
<td align="left"><code>function_returning_nothing:h</code></td>
<td align="left">21-22</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-function95argument">Feature <code>function_argument</code></h4>
<h5 id="derivations_45">Derivations</h5>
<p><a href="#feature-higher-order-function">⬇️ feature <code>higher-order function</code></a>
<a href="#feature-instance_methodclass_methodstatic_method">⬇️ feature <code>instance_method|class_method|static_method</code></a></p>
<h5 id="specification_73">Specification</h5>
<pre><code class="re">           ^(.*)/_type=arg
\n            \1/_pos=(?P&lt;POS&gt;.+)
\n            \1/arg=(?P&lt;SUFFIX&gt;.+)
</code></pre>
<h5 id="example_73">Example</h5>
<pre><code class="python">1   def foobar(a, b, *c, d=42, e=None, **f):
2       pass
</code></pre>
<h5 id="matches_73">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>function_argument:a</code></td>
<td align="left">1</td>
</tr>
<tr>
<td align="left"><code>function_argument:b</code></td>
<td align="left">1</td>
</tr>
<tr>
<td align="left"><code>function_argument:c</code></td>
<td align="left">1</td>
</tr>
<tr>
<td align="left"><code>function_argument:d</code></td>
<td align="left">1</td>
</tr>
<tr>
<td align="left"><code>function_argument:e</code></td>
<td align="left">1</td>
</tr>
<tr>
<td align="left"><code>function_argument:f</code></td>
<td align="left">1</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-function95argument95flavor">Feature <code>function_argument_flavor</code></h4>
<p>Give the category of each function argument among:
- <code>arg</code>: positional argument;
- <code>vararg</code>: list of unnamed arguments;
- <code>kwonlyarg</code>: keyword argument;
- <code>kwarg</code>: dictionary of named arguments.</p>
<p><em>Remark.</em> The actual name of an argument can be retrieved by joining with <code>function_argument</code> using its <code>path</code>.</p>
<h5 id="specification_74">Specification</h5>
<pre><code class="re">^(.*/(?P&lt;SUFFIX&gt;arg|vararg|kwonlyarg|kwarg)(s/\d+)?)/_type=arg
\n                                                \1/_pos=(?P&lt;POS&gt;.+)

</code></pre>
<h5 id="example_74">Example</h5>
<pre><code class="python">1   def foobar(a, b, *c, d=42, e=None, **f):
2       pass
</code></pre>
<h5 id="matches_74">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>function_argument_flavor:arg</code></td>
<td align="left">1, 1</td>
</tr>
<tr>
<td align="left"><code>function_argument_flavor:kwarg</code></td>
<td align="left">1</td>
</tr>
<tr>
<td align="left"><code>function_argument_flavor:kwonlyarg</code></td>
<td align="left">1, 1</td>
</tr>
<tr>
<td align="left"><code>function_argument_flavor:vararg</code></td>
<td align="left">1</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-function95without95arguments">Feature <code>function_without_arguments</code></h4>
<h5 id="specification_75">Specification</h5>
<pre><code class="re">           ^(.*)/_type=FunctionDef
\n(?:\1.+\n)*?\1/_pos=(?P&lt;POS&gt;.+)
\n(?:\1.+\n)*?\1/name=(?P&lt;SUFFIX&gt;.+)
\n(?:\1.+\n)*?\1/args/args/length=0
\n(?:\1.+\n)*?\1/args/vararg=None
\n(?:\1.+\n)*?\1/args/kwonlyargs/length=0
\n(?:\1.+\n)*?\1/args/kwarg=None
\n(?:\1.+\n)* \1/.+/_pos=(?P&lt;POS&gt;.+)
</code></pre>
<h5 id="example_75">Example</h5>
<pre><code class="python">1   def bizz():
2       pass
3
4   def foo(a, b=&quot;c&quot;): # no match
5       pass
6
7   def bar(b=&quot;c&quot;): # no match
8       pass
9
10  def qux(*args, **kwargs): # no match
11      pass
</code></pre>
<h5 id="matches_75">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>function_without_arguments:bizz</code></td>
<td align="left">1-2</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-decorated95function">Feature <code>decorated_function</code></h4>
<h5 id="specification_76">Specification</h5>
<pre><code class="re">           ^(.*)/_type=FunctionDef
\n(?:\1.+\n)*?\1/_pos=(?P&lt;POS&gt;.+)
\n(?:\1.+\n)*?\1/name=(?P&lt;SUFFIX&gt;.+)
\n(?:\1.+\n)*?\1/decorator_list/length=(?!0\n).+
\n(?:\1.+\n)* \1/.+/_pos=(?P&lt;POS&gt;.+)
</code></pre>
<h5 id="example_76">Example</h5>
<pre><code class="python">1   @bizz
2   @foo
3   @bar
4   def qux(*args, **kwargs):
5       pass
</code></pre>
<p><em>Remark.</em> The span starts from the first decorator.</p>
<h5 id="matches_76">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>decorated_function:qux</code></td>
<td align="left">1-5</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-function95decorator">Feature <code>function_decorator</code></h4>
<h5 id="specification_77">Specification</h5>
<pre><code class="re">           ^(.*)/_type=FunctionDef
\n(?:\1.+\n)*?\1/_pos=(?P&lt;POS&gt;.+)
(
\n(?:\1.+\n)*?\1/(?P&lt;_1&gt;decorator_list/\d+)/_pos=(?P&lt;POS&gt;.+)  # force len(d[&quot;POS&quot;]) != len(d[&quot;SUFFIX&quot;])
\n(?:\1.+\n)*?\1/(?P=_1)                   /id=(?P&lt;SUFFIX&gt;.+)
)+
\n(?:\1.+\n)* \1/.+/_pos=(?P&lt;POS&gt;.+)
</code></pre>
<h5 id="example_77">Example</h5>
<pre><code class="python">1   @bizz
2   @foo
3   @bar
4   def qux(*args, **kwargs):
5       pass
6   @clip
7   @crap
8   def bang(*args, **kwargs):
9       pass
</code></pre>
<p><em>Remark.</em> The span and the path are the same as those of the function.</p>
<h5 id="matches_77">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>function_decorator:bar</code></td>
<td align="left">1-5</td>
</tr>
<tr>
<td align="left"><code>function_decorator:bizz</code></td>
<td align="left">1-5</td>
</tr>
<tr>
<td align="left"><code>function_decorator:clip</code></td>
<td align="left">6-9</td>
</tr>
<tr>
<td align="left"><code>function_decorator:crap</code></td>
<td align="left">6-9</td>
</tr>
<tr>
<td align="left"><code>function_decorator:foo</code></td>
<td align="left">1-5</td>
</tr>
</tbody>
</table>
<hr>
<h3 id="nesting">Nesting</h3>
<hr>
<h4 id="feature-nested95function">Feature <code>nested_function</code></h4>
<h5 id="specification_78">Specification</h5>
<pre><code class="re">           ^(.*)/_type=FunctionDef
\n(?:\1.+\n)*?\1/_pos=(?P&lt;POS&gt;.+)
\n(?:\1.+\n)*?\1/name=(?P&lt;SUFFIX&gt;.+)
\n(?:\1.+\n)*?\1/.+/_type=FunctionDef
\n(?:\1.+\n)* \1/.+/_pos=(?P&lt;POS&gt;.+)
</code></pre>
<h5 id="example_78">Example</h5>
<pre><code class="python">1   def outer_function(a, b):
2       c = a + b
3       def inner_function(c):
4           print(c)
5       return inner_function(c)
</code></pre>
<h5 id="matches_78">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>nested_function:outer_function</code></td>
<td align="left">1-5</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-closure">Feature <code>closure</code></h4>
<p>Function enclosing the definition of an inner function and returning it. Beware that the current definition does not check whether the inner function refers to a variable defined in the enclosing function.</p>
<h5 id="derivations_46">Derivations</h5>
<p><a href="#feature-function">⬆️ feature <code>function</code></a>
<a href="#feature-return">⬆️ feature <code>return</code></a></p>
<h5 id="specification_79">Specification</h5>
<pre><code class="sql">SELECT &quot;closure&quot;,
       f.name_suffix,
       max(f.span_start) || &quot;-&quot; || min(f.span_end),
       max(f.path)
FROM t_function f
JOIN t_function c ON (c.path GLOB f.path || &quot;*-&quot;)
JOIN t_return r ON (r.path GLOB f.path || &quot;*-&quot;)
WHERE r.name_suffix = c.name_suffix
GROUP BY c.rowid
</code></pre>
<h5 id="example_79">Example</h5>
<pre><code class="python">1   def outer_function(a, b):
2       c = a + b
3       def inner_function():
4           print(c)
5       return inner_function
</code></pre>
<h5 id="matches_79">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>closure:outer_function</code></td>
<td align="left">1-5</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-higher-order-function">Feature <code>higher-order function</code></h4>
<p>Match a function having another function as an argument, at least when the latter is called inside the former.</p>
<h5 id="derivations_47">Derivations</h5>
<p><a href="#feature-free_call">⬆️ feature <code>free_call</code></a>
<a href="#feature-function">⬆️ feature <code>function</code></a>
<a href="#feature-function_argument">⬆️ feature <code>function_argument</code></a></p>
<h5 id="specification_80">Specification</h5>
<pre><code class="sql">SELECT &quot;higher_order_function&quot;,
       a.name_suffix,
       f.span,
       f.path
FROM t_function f
JOIN t_function_argument a ON (a.path GLOB f.path || &quot;*-&quot;)
JOIN t_free_call c ON (c.name_suffix = a.name_suffix
                       AND c.path GLOB f.path || &quot;*-&quot;)
GROUP BY f.path,
         a.name_suffix
</code></pre>
<h5 id="example_80">Example</h5>
<pre><code class="python">1   def bar(f, g):
2       def foo(h, a, b):
3           x = h(a)
4           y = h(b)
5           z = g(a, b)
6           return x + y + z
7       foo(f, 1, 2)
</code></pre>
<h5 id="matches_80">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>higher_order_function:g</code></td>
<td align="left">1-7</td>
</tr>
<tr>
<td align="left"><code>higher_order_function:h</code></td>
<td align="left">1-7, 2-6</td>
</tr>
</tbody>
</table>
<hr>
<h3 id="recursion">Recursion</h3>
<hr>
<h4 id="feature-recursive95function">Feature <code>recursive_function</code></h4>
<h5 id="derivations_48">Derivations</h5>
<p><a href="#feature-free_call">⬆️ feature <code>free_call</code></a>
<a href="#feature-function">⬆️ feature <code>function</code></a>
<a href="#feature-body_recursive_function">⬇️ feature <code>body_recursive_function</code></a>
<a href="#feature-tail_recursive_function">⬇️ feature <code>tail_recursive_function</code></a></p>
<h5 id="specification_81">Specification</h5>
<pre><code class="sql">SELECT &quot;recursive_function&quot;,
       f.name_suffix,
       f.span,
       f.path
FROM t_function f
JOIN t_free_call c ON (c.path GLOB f.path || &quot;*-&quot;)
WHERE c.name_suffix = f.name_suffix
</code></pre>
<h5 id="example_81">Example</h5>
<pre><code class="python">1   def gob_program():
2       print(&quot;PENUS&quot;)
3       gob_program()
</code></pre>
<h5 id="matches_81">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>recursive_function:gob_program</code></td>
<td align="left">1-3</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-deeply95recursive95function">Feature <code>deeply_recursive_function</code></h4>
<p>Any function <code>f</code> which features a nested call to itself (<code>f(&hellip;, f(&hellip;), &hellip;)</code>), e.g. the <a href="https://en.wikipedia.org/wiki/Ackermann_function">Ackermann function</a>.</p>
<h5 id="derivations_49">Derivations</h5>
<p><a href="#feature-free_call">⬆️ feature <code>free_call</code></a>
<a href="#feature-function">⬆️ feature <code>function</code></a></p>
<h5 id="specification_82">Specification</h5>
<pre><code class="sql">SELECT &quot;deeply_recursive_function&quot;,
       f.name_suffix,
       f.span,
       f.path
FROM t_function f
JOIN t_free_call c1 ON (c1.path GLOB f.path || &quot;*-&quot;)
JOIN t_free_call c2 ON (c2.path GLOB c1.path || &quot;*-&quot;)
WHERE c1.name_suffix = f.name_suffix
  AND c2.name_suffix = f.name_suffix
</code></pre>
<h5 id="example_82">Example</h5>
<pre><code class="python">1   def gob_program():
2       print(&quot;PENUS&quot;)
3       gob_program(gob_program())
</code></pre>
<h5 id="matches_82">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>deeply_recursive_function:gob_program</code></td>
<td align="left">1-3</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-body95recursive95function">Feature <code>body_recursive_function</code></h4>
<p>A function is body-recursive if and only if at least one of its recursive calls is not a tail call.</p>
<p><strong>BUG.</strong> Since the procedure tail calls are not recognized by <code>free_tail_call</code>, the tail recursive procedures are incorrectly labelled as body recursive.</p>
<h5 id="derivations_50">Derivations</h5>
<p><a href="#feature-free_call">⬆️ feature <code>free_call</code></a>
<a href="#feature-free_tail_call">⬆️ feature <code>free_tail_call</code></a>
<a href="#feature-recursive_function">⬆️ feature <code>recursive_function</code></a>
<a href="#feature-tail_recursive_function">⬇️ feature <code>tail_recursive_function</code></a></p>
<h5 id="specification_83">Specification</h5>
<pre><code class="sql">SELECT &quot;body_recursive_function&quot;,
       t_recursive_function.name_suffix,
       t_recursive_function.span,
       t_recursive_function.path
FROM t_recursive_function
JOIN t_free_call ON (t_free_call.path GLOB t_recursive_function.path || &quot;*-&quot;)
WHERE t_free_call.name_suffix = t_recursive_function.name_suffix
  AND NOT EXISTS
    (SELECT 1
     FROM t_free_tail_call
     WHERE t_free_tail_call.path = t_free_call.path )
GROUP BY t_recursive_function.span
</code></pre>
<h5 id="example_83">Example</h5>
<pre><code class="python">1   def gcd(a, b): # no match
2       if b == 0:
3           return a
4       else:
5           return gcd(b, a % b)
6
7   def gcd(a, b): # no match
8       return (gcd(b, a % b) if b else a)
9
10  def ack(m, n): # body-recursive
11      if m == 0:
12          return n + 1
13      elif n == 0:
14          return ack(m-1, 1)
15      else:
16          return ack(m-1, ack(m, n-1))
17
18  def divisor_count(n): # no match (not recursive)
19      def recurs(candidates): # body_recursive
20          if len(candidates) == 0:
21              return 0
22          if n % candidates[0] == 0:
23              return 1 + recurs(candidates[1:])
24          return recurs(candidates[1:])
25      return recurs(range(1, n+1))
26
27  def place(x = 1, y = 1, queens = []): # BUG: incorrectly labelled as body recursive
28      if x &gt; SIZE:
29          print(queens)
30      else:
31          if possible(x, y, queens):
32              place(x + 1, 1, queens + [(x, y)])
33          if y &lt; SIZE:
34              place(x, y + 1, queens)
</code></pre>
<h5 id="matches_83">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>body_recursive_function:ack</code></td>
<td align="left">10-16</td>
</tr>
<tr>
<td align="left"><code>body_recursive_function:place</code></td>
<td align="left">27-34</td>
</tr>
<tr>
<td align="left"><code>body_recursive_function:recurs</code></td>
<td align="left">19-24</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-tail95recursive95function">Feature <code>tail_recursive_function</code></h4>
<p>A function is tail-recursive if and only if all its recursive calls are tail calls.</p>
<h5 id="derivations_51">Derivations</h5>
<p><a href="#feature-body_recursive_function">⬆️ feature <code>body_recursive_function</code></a>
<a href="#feature-recursive_function">⬆️ feature <code>recursive_function</code></a></p>
<h5 id="specification_84">Specification</h5>
<pre><code class="sql">SELECT &quot;tail_recursive_function&quot;,
       f.name_suffix,
       f.span,
       f.path
FROM t_recursive_function f
LEFT JOIN t_body_recursive_function USING (span)
WHERE t_body_recursive_function.rowid IS NULL
</code></pre>
<p><em>LIMITATION.</em> Currently, the tail recursive procedures (<em>i.e.</em>, without <code>return</code>, e.g. the drawing of a fractal) are not recognized.</p>
<h5 id="example_84">Example</h5>
<pre><code class="python">1   def gcd(a, b):
2       if b == 0:
3           return a
4       else:
5           return gcd(b, a % b)
6
7   def gcd(a, b):
8       return (gcd(b, a % b) if b else a)
9
10  def ack(m, n):
11      if m == 0:
12          return n + 1
13      elif n == 0:
14          return ack(m-1, 1)
15      else:
16          return ack(m-1, ack(m, n-1))
17
18  def divisor_count(n):
19      def recurs(candidates):
20          if len(candidates) == 0:
21              return 0
22          if n % candidates[0] == 0:
23              return 1 + recurs(candidates[1:])
24          return recurs(candidates[1:])
25      return recurs(range(1, n+1))
26
27  def place(x = 1, y = 1, queens = []):
28      if x &gt; SIZE:
29          print(queens)
30      else:
31          if possible(x, y, queens):
32              place(x + 1, 1, queens + [(x, y)])
33          if y &lt; SIZE:
34              place(x, y + 1, queens)
</code></pre>
<h5 id="matches_84">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>tail_recursive_function:gcd</code></td>
<td align="left">1-5, 7-8</td>
</tr>
</tbody>
</table>
<hr>
<h2 id="conditionals">Conditionals</h2>
<hr>
<h4 id="feature-if">Feature <code>if</code></h4>
<p>Match an entire conditional (from the <code>if</code> clause to the last line of its body).</p>
<h5 id="derivations_52">Derivations</h5>
<p><a href="#feature-accumulate_inputs">⬇️ feature <code>accumulate_inputs</code></a>
<a href="#feature-accumulate_some_elements">⬇️ feature <code>accumulate_some_elements</code></a>
<a href="#feature-count_inputs">⬇️ feature <code>count_inputs</code></a>
<a href="#feature-find_best_element">⬇️ feature <code>find_best_element</code></a>
<a href="#feature-find_first_element">⬇️ feature <code>find_first_element</code></a>
<a href="#feature-get_valid_input">⬇️ feature <code>get_valid_input</code></a>
<a href="#feature-if_without_else">⬇️ feature <code>if_without_else</code></a>
<a href="#feature-nested_if">⬇️ feature <code>nested_if</code></a>
<a href="#feature-universal_quantificationexistential_quantification">⬇️ feature <code>universal_quantification|existential_quantification</code></a></p>
<h5 id="specification_85">Specification</h5>
<pre><code class="re">           ^(.*)/_type=If
\n(?:\1.+\n)*?\1/_pos=(?P&lt;POS&gt;.+)
\n(?:\1.+\n)* \1/.+/_pos=(?P&lt;POS&gt;.+)
</code></pre>
<h5 id="example_85">Example</h5>
<pre><code class="python">1   if condition_1:     # match
2       if condition_2: # |     match
3           pass        # |     |
4   elif condition_3:   # |     match: cf. remark
5       if condition_4: # |     |     match
6           pass        # |     |     |
7   else:               # |     |
8       if condition_5: # |     |     match
9           pass        # |     |     |
10      pass            # |     |
</code></pre>
<p><em>Remark.</em> There is no such thing as an <code>elif</code> clause in the AST. Consequently, this code has the same representation as:</p>
<pre><code class="python">if condition_1:
    if condition_2:
        pass
else:
    if condition_3:
        if condition_4:
            pass
    else:
        if condition_5:
            pass
        pass
</code></pre>
<p>&hellip; which should help figure out why the <code>elif</code> of line 4 counts as a regular <code>if</code>.</p>
<h5 id="matches_85">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>if</code></td>
<td align="left">1-10, 2-3, 4-10, 5-6, 8-9</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-if95test95atom">Feature <code>if_test_atom</code></h4>
<p>Match and suffix any <a href="#feature-call_argument">atom</a> present in the condition of an <code>if</code> statement.</p>
<h5 id="derivations_53">Derivations</h5>
<p><a href="#feature-accumulate_inputs">⬇️ feature <code>accumulate_inputs</code></a>
<a href="#feature-count_inputs">⬇️ feature <code>count_inputs</code></a>
<a href="#feature-find_best_element">⬇️ feature <code>find_best_element</code></a>
<a href="#feature-find_first_element">⬇️ feature <code>find_first_element</code></a>
<a href="#feature-get_valid_input">⬇️ feature <code>get_valid_input</code></a>
<a href="#feature-universal_quantificationexistential_quantification">⬇️ feature <code>universal_quantification|existential_quantification</code></a></p>
<h5 id="specification_86">Specification</h5>
<pre><code class="re">           ^(.*)/_type=If
(
\n(?:\1.+\n)*?\1/test(?P&lt;_1&gt;/.*)   /_pos=(?P&lt;POS&gt;.+)
\n            \1/test(?P=_1)       /(value|n|(?&lt;!func/)id)=(?P&lt;SUFFIX&gt;.+)
)+
</code></pre>
<h5 id="example_86">Example</h5>
<pre><code class="python">1   if foo(bar) == biz: # no match for &quot;foo&quot;
2       pass
3   if a.b(c) &gt; (d + e) / 2: # no match for &quot;b&quot;
4       pass
</code></pre>
<h5 id="matches_86">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>if_test_atom:bar</code></td>
<td align="left">1</td>
</tr>
<tr>
<td align="left"><code>if_test_atom:biz</code></td>
<td align="left">1</td>
</tr>
<tr>
<td align="left"><code>if_test_atom:2</code></td>
<td align="left">3</td>
</tr>
<tr>
<td align="left"><code>if_test_atom:a</code></td>
<td align="left">3</td>
</tr>
<tr>
<td align="left"><code>if_test_atom:c</code></td>
<td align="left">3</td>
</tr>
<tr>
<td align="left"><code>if_test_atom:d</code></td>
<td align="left">3</td>
</tr>
<tr>
<td align="left"><code>if_test_atom:e</code></td>
<td align="left">3</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-if95then95branch">Feature <code>if_then_branch</code></h4>
<p>Match the body of the branch “<code>then</code>” of an <code>if</code> statement.</p>
<h5 id="derivations_54">Derivations</h5>
<p><a href="#feature-if_without_else">⬇️ feature <code>if_without_else</code></a>
<a href="#feature-nested_if">⬇️ feature <code>nested_if</code></a></p>
<h5 id="specification_87">Specification</h5>
<pre><code class="re">(^  # capture any body block
                   .*/body/\d+
|   # capture any orelse block whose length is greater than 1
    (?&lt;!length=1\n).*/orelse/\d+
)
                /_type=If
\n(?:\1.+\n)*?\1/body/1/_pos=(?P&lt;POS&gt;.+)
(
\n(?:\1.+\n)* \1/body/.*/_pos=(?P&lt;POS&gt;.+)
)?
</code></pre>
<h5 id="example_87">Example</h5>
<pre><code class="python">1   if condition_1:
2       pass             # match
3   elif condition_2:
4       pass             # no match: this is an elif branch
5   else:
6       pass             # no match: this is an else branch
7
8   if condition_3:
9       pass             # match
10  else:
11      if condition_4:
12          pass         # match: there are 2 statements in the else clause of line 10
13          pass         # |
14      pass
15
16  if condition_5:
17      pass             # match
18      pass             # |
19  else:
20      if condition_4:  # no match: this is an elif branch in disguise
21          pass
22          pass
</code></pre>
<h5 id="matches_87">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>if_then_branch</code></td>
<td align="left">2, 9, 12-13, 17-18</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-if95elif95branch">Feature <code>if_elif_branch</code></h4>
<p>Match the body of an <code>elif</code> clause, which is (or could be rewritten as) an <code>else</code> branch consisting in a single statement <code>if</code>.</p>
<h5 id="derivations_55">Derivations</h5>
<p><a href="#feature-nested_if">⬇️ feature <code>nested_if</code></a></p>
<h5 id="specification_88">Specification</h5>
<pre><code class="re">           ^(.*)/orelse/length=1
\n(?:\1.+\n)*?\1/orelse/1/_type=If
\n(?:\1.+\n)*?\1/orelse/1/body/1/_pos=(?P&lt;POS&gt;.+)
(
\n(?:\1.+\n)* \1/orelse/1/body/.+/_pos=(?P&lt;POS&gt;.+)
)?
</code></pre>
<h5 id="example_88">Example</h5>
<pre><code class="python">1   if condition_1:
2       if condition_2:
3           pass
4   elif condition_3:
5       if condition_4: # match
6           pass        # |
7   elif condition_5:
8       pass            # match
9       pass            # |
10  else:
11      if condition_6:
12          pass        # no match
13      pass            # ... since this else branch has more than one statement
14
15  if condition_7:
16      pass
17  else:
18      if condition_8:
19          pass        # match: this is an elif in disguise
20
21  for foo in bar:
22      if condition_9:
23          break
24  else:
25      if condition_10:
26          pass        # no match
</code></pre>
<p><em>Remark.</em> Lines 17-18 could/should be rewritten as <code>elif condition_8</code>. This results in a span of <code>19</code> for the implicit <code>elif</code>.</p>
<h5 id="matches_88">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>if_elif_branch</code></td>
<td align="left">5-6, 8-9, 19</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-if95else95branch">Feature <code>if_else_branch</code></h4>
<p>Match the body of the possible <code>else</code> branch of an <code>if</code> statement.</p>
<h5 id="derivations_56">Derivations</h5>
<p><a href="#feature-nested_if">⬇️ feature <code>nested_if</code></a></p>
<h5 id="specification_89">Specification</h5>
<pre><code class="re">           ^(.*)/_type=If
\n(?:\1.+\n)*?\1/orelse/
(   # there is at least two statements in the else branch,
                        length=\d+(?&lt;![01])
\n(?:\1.+\n)*?\1/orelse/1/_pos=(?P&lt;POS&gt;.+)
|   # or only one, but distinct from If (otherwise, this is an elif)
                        length=1
\n(?:\1.+\n)*?\1/orelse/1/_type=.+?(?&lt;!If)
\n(?:\1.+\n)*?\1/orelse/1/_pos=(?P&lt;POS&gt;.+)
)
(
\n(?:\1.+\n)* \1/orelse/.+/_pos=(?P&lt;POS&gt;.+)
)?
</code></pre>
<h5 id="example_89">Example</h5>
<pre><code class="python">1   if condition_1:
2       if condition_2:
3           pass
4   elif condition_3: # no match: this is an elif
5       if condition_4:
6           pass
7   else:
8       if condition_5: # match
9           pass        # |
10      else:           # |
11          pass        # |      match
12      pass            # |
13
14  for foo in bar:
15      if condition_6:
16          break
17  else:
18      pass # no match for a loop else
</code></pre>
<h5 id="matches_89">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>if_else_branch</code></td>
<td align="left">8-12, 11</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-if95without95else">Feature <code>if_without_else</code></h4>
<h5 id="derivations_57">Derivations</h5>
<p><a href="#feature-if">⬆️ feature <code>if</code></a>
<a href="#feature-if_then_branch">⬆️ feature <code>if_then_branch</code></a>
<a href="#feature-if_guard">⬇️ feature <code>if_guard</code></a></p>
<h5 id="specification_90">Specification</h5>
<pre><code class="sql">SELECT &quot;if_without_else&quot;,
       &quot;&quot;,
       t_if.span,
       t_if.path
FROM t_if
JOIN t_if_then_branch branch ON (t_if.span_start + 1 == branch.span_start
                                 AND t_if.span_end == branch.span_end)
</code></pre>
<h5 id="example_90">Example</h5>
<pre><code class="python">1   if condition_1:         # no match (&quot;else&quot; on line 5)
2       if condition_2:     # match
3           if condition_3: # |        match
4               pass        # |        |
5   else:
6       if condition_4:     # match
7           pass            # |
8       if condition_5:     # match
9           pass            # |
10
11  if condition_6:         # no match (&quot;elif&quot; on line 13)
12      pass
13  elif condition_7:
14      pass
15
16  if condition_8:         # match
17      for foo in bar:     # |
18          if condition_9: # |        match
19              pass        # |        |
</code></pre>
<h5 id="matches_90">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>if_without_else</code></td>
<td align="left">2-4, 3-4, 6-7, 8-9, 16-19, 18-19</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-if95guard">Feature <code>if_guard</code></h4>
<p>A guard clause is a conditional which provides an early exit from a subroutine.</p>
<p>The heuristic ensures that:</p>
<ol>
<li>it is at the first level of the subroutine;</li>
<li>it does not extend to the end of the subroutine;</li>
<li>it ends by a <code>return</code> clause that is not followed by an <code>else</code> or an <code>elif</code> branch.</li>
</ol>
<p>Condition 2 is probably too weak in numerous situations, but in case of false positive, it is always possible for the programmer to make condition 3 fail by adding an <code>else</code>clause. As a general rule, this style may be recommended to highlight the difference between a guard and a simple returning conditional in the main treatment.</p>
<h5 id="derivations_58">Derivations</h5>
<p><a href="#feature-function">⬆️ feature <code>function</code></a>
<a href="#feature-if_without_else">⬆️ feature <code>if_without_else</code></a>
<a href="#feature-return">⬆️ feature <code>return</code></a></p>
<h5 id="specification_91">Specification</h5>
<pre><code class="sql">SELECT &quot;if_guard&quot;,
       &quot;&quot;,
       guard.span,
       guard.path
FROM t_if_without_else guard
JOIN t_function f ON (guard.path GLOB f.path || &quot;?-?-&quot;
                      AND f.span_start &lt; guard.span_start
                      AND guard.span_end &lt; f.span_end)
JOIN t_return ret ON (guard.span_end == ret.span_end)
</code></pre>
<h5 id="example_91">Example</h5>
<pre><code class="python">1   def foo():
2       if condition_1:     # match
3           return
4       if condition_2:     # match
5           return
6       pass # at least one line
7   def foo():
8       if condition_1:     # no match, since it is followed by an elif branch
9           return
10      elif condition_2:   # no match, since it is not on the first level
11          return
12      pass # at least one line
13  def foo():
14      if condition_1:     # match
15          return
16      if condition_2:     # no match, since this is the last line of the function
17          return
</code></pre>
<h5 id="matches_91">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>if_guard</code></td>
<td align="left">2-3, 4-5, 14-15</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-nested95if">Feature <code>nested_if</code></h4>
<p>Match an <code>if</code> clause nested in <em>n</em> other <code>if</code> clauses, suffixing it by <em>n</em>.</p>
<h5 id="derivations_59">Derivations</h5>
<p><a href="#feature-if">⬆️ feature <code>if</code></a>
<a href="#feature-if_elif_branch">⬆️ feature <code>if_elif_branch</code></a>
<a href="#feature-if_else_branch">⬆️ feature <code>if_else_branch</code></a>
<a href="#feature-if_then_branch">⬆️ feature <code>if_then_branch</code></a></p>
<h5 id="specification_92">Specification</h5>
<pre><code class="sql">SELECT &quot;nested_if&quot;,
       count(*),
       t_if.span,
       t_if.path
FROM t branch
JOIN t_if ON (branch.span_start &lt;= t_if.span_start
              AND t_if.span_end &lt;= branch.span_end)
WHERE branch.name_prefix IN (&quot;if_then_branch&quot;,
                             &quot;if_else_branch&quot;,
                             &quot;if_elif_branch&quot;)
GROUP BY t_if.span
ORDER BY t_if.span_start
</code></pre>
<p><em>Remark.</em> A join condition <code>(inner_if.path GLOB branch.path || "*-")</code> would not work here, since an <code>else</code> branch has no specific path in the AST.</p>
<h5 id="example_92">Example</h5>
<pre><code class="python">1   if condition_1:
2       if condition_2:     # match
3           if condition_3: # |        match (nesting depth = 2)
4               pass        # |        |
5   else:
6       if condition_4:     # match
7           pass            # |
8       if condition_5:     # match
9           pass            # |
10
11  if condition_6:
12      pass
13  elif condition_7:
14      pass
15
16  if condition_8:
17      for foo in bar:
18          if condition_9: # match
19              pass        # |
</code></pre>
<h5 id="matches_92">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>nested_if:1</code></td>
<td align="left">2-4, 6-7, 8-9, 18-19</td>
</tr>
<tr>
<td align="left"><code>nested_if:2</code></td>
<td align="left">3-4</td>
</tr>
</tbody>
</table>
<hr>
<h2 id="iterations">Iterations</h2>
<h3 id="iteration-keywords">Iteration keywords</h3>
<hr>
<h4 id="feature-for">Feature <code>for</code></h4>
<p>Match sequential loops, along with their iteration variable(s).</p>
<h5 id="derivations_60">Derivations</h5>
<p><a href="#feature-accumulate_elements">⬇️ feature <code>accumulate_elements</code></a>
<a href="#feature-accumulate_some_elements">⬇️ feature <code>accumulate_some_elements</code></a>
<a href="#feature-find_best_element">⬇️ feature <code>find_best_element</code></a>
<a href="#feature-find_first_element">⬇️ feature <code>find_first_element</code></a>
<a href="#feature-for_range">⬇️ feature <code>for_range</code></a>
<a href="#feature-loop">⬇️ feature <code>loop</code></a>
<a href="#feature-nested_for">⬇️ feature <code>nested_for</code></a>
<a href="#feature-universal_quantificationexistential_quantification">⬇️ feature <code>universal_quantification|existential_quantification</code></a></p>
<h5 id="specification_93">Specification</h5>
<pre><code class="re">           ^(.*)/_type=For
\n(?:\1.+\n)*?\1/_pos=(?P&lt;POS&gt;.+)
(
\n(?:\1.+\n)*?\1/(?P&lt;_1&gt;target(/.+)?)/_pos=(?P&lt;POS&gt;.+) # force len(d[&quot;POS&quot;]) != len(d[&quot;SUFFIX&quot;])
\n(?:\1.+\n)*?\1/(?P=_1)             /id=(?P&lt;SUFFIX&gt;.+)
)+
\n(?:\1.+\n)* \1/.*/_pos=(?P&lt;POS&gt;.+)
</code></pre>
<h5 id="example_93">Example</h5>
<pre><code class="python">1   for x in seq_1:
2       for y in range(len(seq_3)):
3           pass
4       for (a, (b, c)) in seq_2:
5           pass
6       else:
7           pass
8   for (i, j) in enumerate(seq):
9       pass
</code></pre>
<h5 id="matches_93">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>for:x</code></td>
<td align="left">1-7</td>
</tr>
<tr>
<td align="left"><code>for:y</code></td>
<td align="left">2-3</td>
</tr>
<tr>
<td align="left"><code>for:a</code></td>
<td align="left">4-7</td>
</tr>
<tr>
<td align="left"><code>for:b</code></td>
<td align="left">4-7</td>
</tr>
<tr>
<td align="left"><code>for:c</code></td>
<td align="left">4-7</td>
</tr>
<tr>
<td align="left"><code>for:i</code></td>
<td align="left">8-9</td>
</tr>
<tr>
<td align="left"><code>for:j</code></td>
<td align="left">8-9</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-while">Feature <code>while</code></h4>
<h5 id="derivations_61">Derivations</h5>
<p><a href="#feature-loop">⬇️ feature <code>loop</code></a></p>
<h5 id="specification_94">Specification</h5>
<pre><code class="re">           ^(.*)/_type=While
\n(?:\1.+\n)*?\1/_pos=(?P&lt;POS&gt;.+)
\n(?:\1.+\n)* \1/.*/_pos=(?P&lt;POS&gt;.+)
</code></pre>
<h5 id="example_94">Example</h5>
<pre><code class="python">1   while foo():
2       while bar():
3           pass
4       while biz():
5           pass
6       else:
7           pass
</code></pre>
<h5 id="matches_94">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>while</code></td>
<td align="left">1-7, 2-3, 4-7</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-loop">Feature <code>loop</code></h4>
<h5 id="derivations_62">Derivations</h5>
<p><a href="#feature-for">⬆️ feature <code>for</code></a>
<a href="#feature-while">⬆️ feature <code>while</code></a>
<a href="#feature-count_elementscount_states">⬇️ feature <code>count_elements|count_states</code></a>
<a href="#feature-loop_with_break">⬇️ feature <code>loop_with_break</code></a>
<a href="#feature-loop_with_else">⬇️ feature <code>loop_with_else</code></a>
<a href="#feature-loop_with_late_exit">⬇️ feature <code>loop_with_late_exit</code></a>
<a href="#feature-loop_with_raise">⬇️ feature <code>loop_with_raise</code></a>
<a href="#feature-loop_with_return">⬇️ feature <code>loop_with_return</code></a></p>
<h5 id="specification_95">Specification</h5>
<pre><code class="sql">SELECT &quot;loop&quot;,
       name_prefix,
       span,
       path
FROM t
WHERE name_prefix IN (&quot;for&quot;,
                      &quot;while&quot;)
GROUP BY path
</code></pre>
<h5 id="example_95">Example</h5>
<pre><code class="python">1   while foo():
2       while bar():
3           pass
4       for x in s:
5           pass
6
7   for (i, x) in enumerate(seq):
8       if foo(x):
9           bar(i)
</code></pre>
<h5 id="matches_95">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>loop:while</code></td>
<td align="left">1-5, 2-3</td>
</tr>
<tr>
<td align="left"><code>loop:for</code></td>
<td align="left">4-5, 7-9</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-break">Feature <code>break</code></h4>
<h5 id="derivations_63">Derivations</h5>
<p><a href="#feature-loop_with_break">⬇️ feature <code>loop_with_break</code></a></p>
<h5 id="specification_96">Specification</h5>
<pre><code class="re">           ^(.*)/_type=Break
\n            \1/_pos=(?P&lt;POS&gt;.+)
</code></pre>
<h5 id="example_96">Example</h5>
<pre><code class="python">1   for x in seq:
2       if foo():
3           break
4   else:
5       bar()
6       biz()
</code></pre>
<h5 id="matches_96">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>break</code></td>
<td align="left">3</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-loop95else">Feature <code>loop_else</code></h4>
<h5 id="derivations_64">Derivations</h5>
<p><a href="#feature-loop_with_else">⬇️ feature <code>loop_with_else</code></a></p>
<h5 id="specification_97">Specification</h5>
<pre><code class="re">  ^(.*/loopelse)/1/_type=.+
\n            \1/1/_pos=(?P&lt;POS&gt;.+)
(
\n(?:\1.+\n)+ \1/.*_pos=(?P&lt;POS&gt;.+)
)*
</code></pre>
<h5 id="example_97">Example</h5>
<pre><code class="python">1   for x in seq:
2       if foo():
3           break
4   else:
5       bar()
6       biz()
</code></pre>
<h5 id="matches_97">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>loop_else</code></td>
<td align="left">5-6</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-continue">Feature <code>continue</code></h4>
<h5 id="specification_98">Specification</h5>
<pre><code class="re">           ^(.*)/_type=Continue
\n            \1/_pos=(?P&lt;POS&gt;.+)
</code></pre>
<h5 id="example_98">Example</h5>
<pre><code class="python">1   for x in seq:
2       if foo():
3           continue
4       if bar():
5           continue
6       pass
</code></pre>
<h5 id="matches_98">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>continue</code></td>
<td align="left">3, 5</td>
</tr>
</tbody>
</table>
<hr>
<h3 id="sequential-loops">Sequential loops</h3>
<hr>
<h4 id="feature-for95each">Feature <code>for_each</code></h4>
<p>Iterate over the elements of a (named) collection.</p>
<h5 id="specification_99">Specification</h5>
<pre><code class="re">           ^(.*)/_type=For
\n(?:\1.+\n)*?\1/_pos=(?P&lt;POS&gt;.+)
\n(?:\1.+\n)*?\1/iter/_type=Name
\n(?:\1.+\n)* \1/.*/_pos=(?P&lt;POS&gt;.+)
</code></pre>
<h5 id="example_99">Example</h5>
<pre><code class="python">1   for x in seq_1:
2       for y in range(len(seq_3)): # no match
3           pass
4       for i in seq_2:
5           pass
</code></pre>
<h5 id="matches_99">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>for_each</code></td>
<td align="left">1-5, 4-5</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-for95range">Feature <code>for_range</code></h4>
<p>Iterate over a range object.</p>
<h5 id="derivations_65">Derivations</h5>
<p><a href="#feature-for">⬆️ feature <code>for</code></a>
<a href="#feature-range">⬆️ feature <code>range</code></a></p>
<h5 id="specification_100">Specification</h5>
<pre><code class="sql">SELECT &quot;for_range&quot;,
       t_range.name_suffix,
       t_for.span,
       t_for.path
FROM t_for
JOIN t_range ON (t_range.path GLOB t_for.path || &quot;*-&quot;)
</code></pre>
<h5 id="example_100">Example</h5>
<pre><code class="python">1   for i in range(stop):
2       pass
3   for i in range(start, stop):
4       pass
5   for i in range(start, stop, step):
6       pass
7   for i in range(start, stop, -1):
8       pass
9   for i in range(len(seq)):
10       pass
</code></pre>
<h5 id="matches_100">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>for_range:stop</code></td>
<td align="left">1-2</td>
</tr>
<tr>
<td align="left"><code>for_range:start:stop</code></td>
<td align="left">3-4</td>
</tr>
<tr>
<td align="left"><code>for_range:start:stop:step</code></td>
<td align="left">5-6</td>
</tr>
<tr>
<td align="left"><code>for_range:start:stop:-1</code></td>
<td align="left">7-8</td>
</tr>
<tr>
<td align="left"><code>for_range:_</code></td>
<td align="left">9-10</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-for95indexes95elements">Feature <code>for_indexes_elements</code></h4>
<p>Iterate over index numbers and elements of a collection.</p>
<h5 id="specification_101">Specification</h5>
<pre><code class="re">           ^(.*)/_type=For
\n(?:\1.+\n)*?\1/iter/_pos=(?P&lt;POS&gt;.+)
\n(?:\1.+\n)*?\1/iter/func/id=enumerate
\n(?:\1.+\n)* \1/.*/_pos=(?P&lt;POS&gt;.+)
</code></pre>
<h5 id="example_101">Example</h5>
<pre><code class="python">1   for (i, element) in enumerate(elements):
2       pass
</code></pre>
<h5 id="matches_101">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>for_indexes_elements</code></td>
<td align="left">1-2</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-for95indexes">Feature <code>for_indexes</code></h4>
<p>Iterate over index numbers of a collection.</p>
<h5 id="specification_102">Specification</h5>
<pre><code class="re">           ^(.*)/_type=For
\n(?:\1.+\n)*?\1/_pos=(?P&lt;POS&gt;.+)
\n(?:\1.+\n)*?\1/iter/_type=Call
\n(?:\1.+\n)*?\1/iter/func/id=range
\n(?:\1.+\n)*?\1/iter/args/length=1
\n(?:\1.+\n)*?\1/iter/args/1/_type=Call
\n(?:\1.+\n)*?\1/iter/args/1/func/id=len
\n(?:\1.+\n)*?\1/iter/keywords/length=0
\n(?:\1.+\n)* \1/.*/_pos=(?P&lt;POS&gt;.+)
</code></pre>
<h5 id="example_102">Example</h5>
<pre><code class="python">1   for i in range(len(elements)):
2       pass
</code></pre>
<h5 id="matches_102">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>for_indexes</code></td>
<td align="left">1-2</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-nested95for">Feature <code>nested_for</code></h4>
<p>Match a <code>for</code> statement nested in <em>n</em> other <code>for</code> statements, suffixing it by <em>n</em>.</p>
<h5 id="derivations_66">Derivations</h5>
<p><a href="#feature-for">⬆️ feature <code>for</code></a></p>
<h5 id="specification_103">Specification</h5>
<pre><code class="sql">SELECT &quot;nested_for&quot;,
       count(DISTINCT outer_loop.span),
       inner_loop.span,
       inner_loop.path
FROM t_for outer_loop
JOIN t_for inner_loop ON (inner_loop.path GLOB outer_loop.path || &quot;*-&quot;)
GROUP BY inner_loop.span
ORDER BY inner_loop.span_start
</code></pre>
<h5 id="example_103">Example</h5>
<pre><code class="python">1   for x_1 in seq_1:
2       for x_2 in seq_2:
3           pass
4           for x_3 in seq_3:
5               pass
6       pass
7   for (i1, i2) in enumerate(seq):
8       for (j1, j2) in enumerate(seq):
9           pass
</code></pre>
<h5 id="matches_103">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>nested_for:1</code></td>
<td align="left">2-5, 8-9</td>
</tr>
<tr>
<td align="left"><code>nested_for:2</code></td>
<td align="left">4-5</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-triangular95nested95for">Feature <code>triangular_nested_for</code></h4>
<p>A <code>for</code> loop with a counter <code>i</code> and a nested <code>for</code> loop which makes <code>i</code> iterations. The total number of iterations is a <a href="https://en.wikipedia.org/wiki/Triangular_number">triangular number</a>.</p>
<h5 id="specification_104">Specification</h5>
<pre><code class="re">           ^(.*)/_type=For
\n(?:\1.+\n)*?\1/_pos=(?P&lt;POS&gt;.+)
\n(?:\1.+\n)*?\1/target/id=(?P&lt;VAR&gt;.+) # capture iteration variable
\n(?:\1.+\n)*?\1/iter/_type=Call
\n(?:\1.+\n)*?\1/iter/func/id=range
\n(?:\1.+\n)*?\1/iter/args/length=1 # only range(arg1)
(   # i goes from 0 to n, and j from 0 to i
\n(?:\1.+\n)* \1/(?P&lt;_1&gt;(?:body|orelse)/\d+)/_type=For
\n(?:\1.+\n)*?\1/(?P=_1)                    /iter/_type=Call
\n(?:\1.+\n)*?\1/(?P=_1)                    /iter/func/id=range
\n(?:\1.+\n)*?\1/(?P=_1)                    /iter/args/length=1 # only range(arg1)
\n(?:\1.+\n)* \1/(?P=_1)                    /iter/args/1.*/id=(?P=VAR) # match iteration variable
|   # i goes from 0 to n, and j from i to n
\n(?:\1.+\n)*?\1/iter/args/1/_hash=(?P&lt;STOP&gt;.+) # capture stop expression
\n(?:\1.+\n)* \1/(?P&lt;_1&gt;(?:body|orelse)/\d+)/_type=For
\n(?:\1.+\n)*?\1/(?P=_1)                    /iter/_type=Call
\n(?:\1.+\n)*?\1/(?P=_1)                    /iter/func/id=range
\n(?:\1.+\n)*?\1/(?P=_1)                    /iter/args/length=2 # only range(arg1, arg2)
\n(?:\1.+\n)* \1/(?P=_1)                    /iter/args/1(/.+)*/id=(?P=VAR) # match iteration variable
\n(?:\1.+\n)* \1/(?P=_1)                    /iter/args/2(/.+)*/_hash=(?P=STOP) # match stop expression
)
\n(?:\1.+\n)* \1/.*/_pos=(?P&lt;POS&gt;.+)
</code></pre>
<h5 id="example_104">Example</h5>
<pre><code class="python">1   for i in range(n):
2       for j in range(i - 1):
3           pass
4
5   for i in range(n):
6       for j in range(i+1, n):
7           pass
</code></pre>
<h5 id="matches_104">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>triangular_nested_for</code></td>
<td align="left">1-3, 5-7</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-square95nested95for">Feature <code>square_nested_for</code></h4>
<p>Two nested <code>for</code> loops doing the same number of iterations.</p>
<h5 id="specification_105">Specification</h5>
<pre><code class="re">           ^(.*)/_type=For
\n(?:\1.+\n)*?\1/_pos=(?P&lt;POS&gt;.+)
\n(?:\1.+\n)*?\1/iter/_hash=(?P&lt;HASH&gt;.+) # capture _hash
\n(?:\1.+\n)* \1/(?P&lt;_1&gt;(?:body|orelse)/\d+)/_type=For
\n(?:\1.+\n)*?\1/(?P=_1)                    /iter/_hash=(?P=HASH) # match _hash
\n(?:\1.+\n)* \1/.*/_pos=(?P&lt;POS&gt;.+)
</code></pre>
<h5 id="example_105">Example</h5>
<pre><code class="python">1   for i in range(1, 2 * n, step):
2       for j in range(1, 2 * n, step):
3           pass
4
5   for x in seq:
6       for y in seq:
7           pass
</code></pre>
<h5 id="matches_105">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>square_nested_for</code></td>
<td align="left">1-3, 5-7</td>
</tr>
</tbody>
</table>
<hr>
<h3 id="non-sequential-loops">Non-sequential loops</h3>
<hr>
<h4 id="feature-infinite95while">Feature <code>infinite_while</code></h4>
<p>Match an infinite loop denoted by <code>while True</code> (preferred) or <code>while 1</code>.</p>
<h5 id="derivations_67">Derivations</h5>
<p><a href="#feature-accumulate_inputs">⬇️ feature <code>accumulate_inputs</code></a>
<a href="#feature-count_inputs">⬇️ feature <code>count_inputs</code></a>
<a href="#feature-get_valid_input">⬇️ feature <code>get_valid_input</code></a></p>
<h5 id="specification_106">Specification</h5>
<pre><code class="re">           ^(.*)/_type=While
\n(?:\1.+\n)*?\1/_pos=(?P&lt;POS&gt;.+)
\n(?:\1.+\n)*?\1/test/(value=True|n=1)
\n(?:\1.+\n)* \1/.*/_pos=(?P&lt;POS&gt;.+)
</code></pre>
<h5 id="example_106">Example</h5>
<pre><code class="python">1   while True:
2       while bar():
3           pass
4       while 1:
5           pass
6       else:
7           pass
</code></pre>
<h5 id="matches_106">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>infinite_while</code></td>
<td align="left">1-7, 4-7</td>
</tr>
</tbody>
</table>
<hr>
<h3 id="loop-exit">Loop exit</h3>
<hr>
<h4 id="feature-loop95with95raise">Feature <code>loop_with_raise</code></h4>
<h5 id="derivations_68">Derivations</h5>
<p><a href="#feature-loop">⬆️ feature <code>loop</code></a>
<a href="#feature-raise">⬆️ feature <code>raise</code></a>
<a href="#feature-loop_with_early_exit">⬇️ feature <code>loop_with_early_exit</code></a></p>
<h5 id="specification_107">Specification</h5>
<pre><code class="sql">SELECT &quot;loop_with_raise&quot;,
       l.name_suffix,
       l.span,
       l.path
FROM t_loop l
JOIN t_raise r ON (r.path GLOB l.path || &quot;*-&quot;)
GROUP BY l.rowid
</code></pre>
<h5 id="example_107">Example</h5>
<pre><code class="python">1   def fail():
2       for x in seq:
3           if foobar(x):
4               raise ValueError
5
6   def fail_2():
7       for y in seq: # match: false positive
8           try:
9               for z in seq:
10                  if foobar(x):
11                      raise ValueError
12          except:
13              pass
</code></pre>
<p><em>LIMITATION.</em> False positive when the exception is catch inside the outer loop.</p>
<h5 id="matches_107">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>loop_with_raise:for</code></td>
<td align="left">2-4, 7-13, 9-11</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-loop95with95return">Feature <code>loop_with_return</code></h4>
<h5 id="derivations_69">Derivations</h5>
<p><a href="#feature-loop">⬆️ feature <code>loop</code></a>
<a href="#feature-return">⬆️ feature <code>return</code></a>
<a href="#feature-loop_with_early_exit">⬇️ feature <code>loop_with_early_exit</code></a></p>
<h5 id="specification_108">Specification</h5>
<pre><code class="sql">SELECT &quot;loop_with_return&quot;,
       l.name_suffix,
       l.span,
       l.path
FROM t_loop l
JOIN t_return r ON (r.path GLOB l.path || &quot;*-&quot;)
GROUP BY l.rowid
</code></pre>
<h5 id="example_108">Example</h5>
<pre><code class="python">1   def func():
2       for x in seq_x:
3           for y in seq_y:
4               while foo():
5                   if bar():
6                       return
</code></pre>
<h5 id="matches_108">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>loop_with_return:for</code></td>
<td align="left">2-6, 3-6</td>
</tr>
<tr>
<td align="left"><code>loop_with_return:while</code></td>
<td align="left">4-6</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-loop95with95break">Feature <code>loop_with_break</code></h4>
<h5 id="derivations_70">Derivations</h5>
<p><a href="#feature-break">⬆️ feature <code>break</code></a>
<a href="#feature-loop">⬆️ feature <code>loop</code></a>
<a href="#feature-loop_with_early_exit">⬇️ feature <code>loop_with_early_exit</code></a></p>
<h5 id="specification_109">Specification</h5>
<pre><code class="sql">SELECT &quot;loop_with_break&quot;,
       l.name_suffix,
       max(l.span_start) || &quot;-&quot; || min(l.span_end),
       max(l.path)
FROM t_loop l
JOIN t_break b ON (b.path GLOB l.path || &quot;*-&quot;)
GROUP BY b.rowid
</code></pre>
<h5 id="example_109">Example</h5>
<pre><code class="python">1   def func():
2       for x in seq_x:
3           for y in seq_y:
4               if foo():
5                   break
</code></pre>
<h5 id="matches_109">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>loop_with_break:for</code></td>
<td align="left">3-5</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-loop95with95early95exit">Feature <code>loop_with_early_exit</code></h4>
<h5 id="derivations_71">Derivations</h5>
<p><a href="#feature-loop_with_break">⬆️ feature <code>loop_with_break</code></a>
<a href="#feature-loop_with_raise">⬆️ feature <code>loop_with_raise</code></a>
<a href="#feature-loop_with_return">⬆️ feature <code>loop_with_return</code></a>
<a href="#feature-loop_with_late_exit">⬇️ feature <code>loop_with_late_exit</code></a></p>
<h5 id="specification_110">Specification</h5>
<pre><code class="sql">SELECT &quot;loop_with_early_exit&quot;,
       name_suffix || &quot;:&quot; || substr(name_prefix, 11), -- 11 == length(&quot;loop_with_&quot;) + 1
 span,
 path
FROM t
WHERE t.name_prefix IN (&quot;loop_with_raise&quot;,
                        &quot;loop_with_return&quot;,
                        &quot;loop_with_break&quot;)
</code></pre>
<h5 id="example_110">Example</h5>
<pre><code class="python">1   for x in seq_x:
2       for y in seq_y:
3           if foo():
4               break
5       else:
6           while True:
7               if bizz():
8                   break
9   def func():
10      for x in seq_x:
11          for y in seq_y:
12              if foo():
13                  return
14          while True:
15              if bizz():
16                  return
17  def fail():
18      for x in seq:
19          if foobar(x):
20              raise ValueError
</code></pre>
<h5 id="matches_110">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>loop_with_early_exit:for:break</code></td>
<td align="left">2-8</td>
</tr>
<tr>
<td align="left"><code>loop_with_early_exit:while:break</code></td>
<td align="left">6-8</td>
</tr>
<tr>
<td align="left"><code>loop_with_early_exit:for:raise</code></td>
<td align="left">18-20</td>
</tr>
<tr>
<td align="left"><code>loop_with_early_exit:for:return</code></td>
<td align="left">10-16, 11-13</td>
</tr>
<tr>
<td align="left"><code>loop_with_early_exit:while:return</code></td>
<td align="left">14-16</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-loop95with95else">Feature <code>loop_with_else</code></h4>
<h5 id="derivations_72">Derivations</h5>
<p><a href="#feature-loop">⬆️ feature <code>loop</code></a>
<a href="#feature-loop_else">⬆️ feature <code>loop_else</code></a></p>
<h5 id="specification_111">Specification</h5>
<pre><code class="sql">SELECT &quot;loop_with_else&quot;,
       name_suffix,
       span,
       path
FROM t_loop
JOIN
  (SELECT max(l.span_start) AS span_start
   FROM t_loop l
   JOIN t_loop_else e ON (e.path GLOB l.path || &quot;*-&quot;)
   GROUP BY e.rowid) USING (span_start)
</code></pre>
<h5 id="example_111">Example</h5>
<pre><code class="python">1   for x in seq:
2       if foo():
3           break
4   else:
5       bar()
6       biz()
</code></pre>
<h5 id="matches_111">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>loop_with_else:for</code></td>
<td align="left">1-6</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-loop95with95late95exit">Feature <code>loop_with_late_exit</code></h4>
<p>A loop without early exit.</p>
<h5 id="derivations_73">Derivations</h5>
<p><a href="#feature-loop">⬆️ feature <code>loop</code></a>
<a href="#feature-loop_with_early_exit">⬆️ feature <code>loop_with_early_exit</code></a></p>
<h5 id="specification_112">Specification</h5>
<pre><code class="sql">SELECT &quot;loop_with_late_exit&quot;,
       l1.name_suffix,
       l1.span,
       l1.path
FROM t_loop l1
LEFT JOIN t_loop_with_early_exit l2 ON (l1.span = l2.span)
WHERE l2.span IS NULL
</code></pre>
<h5 id="example_112">Example</h5>
<pre><code class="python">1   for x in seq:
2       if foo():
3           break
4   for x in seq:
5       if foo():
6           pass
</code></pre>
<h5 id="matches_112">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>loop_with_late_exit:for</code></td>
<td align="left">4-6</td>
</tr>
</tbody>
</table>
<hr>
<h2 id="various-statements">Various statements</h2>
<hr>
<h4 id="feature-assertion">Feature <code>assertion</code></h4>
<h5 id="specification_113">Specification</h5>
<pre><code class="re">           ^(.*)/_type=Assert
\n(?:\1.+\n)*?\1/_pos=(?P&lt;POS&gt;.+)
</code></pre>
<h5 id="example_113">Example</h5>
<pre><code class="python">1   assert a == 42
</code></pre>
<h5 id="matches_113">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>assertion</code></td>
<td align="left">1</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-null95operation">Feature <code>null_operation</code></h4>
<h5 id="specification_114">Specification</h5>
<pre><code class="re">           ^(.*)/_type=Pass
\n(?:\1.+\n)*?\1/_pos=(?P&lt;POS&gt;.+)
</code></pre>
<h5 id="example_114">Example</h5>
<pre><code class="python">1   def foobar():
2       pass
</code></pre>
<h5 id="matches_114">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>null_operation</code></td>
<td align="left">2</td>
</tr>
</tbody>
</table>
<hr>
<h3 id="exceptions">Exceptions</h3>
<hr>
<h4 id="feature-try">Feature <code>try</code></h4>
<h5 id="derivations_74">Derivations</h5>
<p><a href="#feature-try_raisetry_except">⬇️ feature <code>try_raise|try_except</code></a></p>
<h5 id="specification_115">Specification</h5>
<pre><code class="re">           ^(.*)/_type=Try
\n(?:\1.+\n)* \1/_pos=(?P&lt;POS&gt;.+)
\n(?:\1.+\n)* \1/.*/_pos=(?P&lt;POS&gt;.+)
</code></pre>
<h5 id="example_115">Example</h5>
<pre><code class="python">1   try:
2       try:
3           raise e1
4       except e1:
5           raise e2
6   except e2:
7       pass
</code></pre>
<h5 id="matches_115">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>try</code></td>
<td align="left">1-7, 2-5</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-raise">Feature <code>raise</code></h4>
<h5 id="derivations_75">Derivations</h5>
<p><a href="#feature-loop_with_raise">⬇️ feature <code>loop_with_raise</code></a>
<a href="#feature-try_raisetry_except">⬇️ feature <code>try_raise|try_except</code></a></p>
<h5 id="specification_116">Specification</h5>
<pre><code class="re">           ^(.*)/_type=Raise
\n(?:\1.+\n)*?\1/_pos=(?P&lt;POS&gt;.+)
\n(?:\1.+\n)*?\1/exc(=(?P&lt;SUFFIX&gt;None)|/.*\bid=(?P&lt;SUFFIX&gt;.+))
</code></pre>
<h5 id="example_116">Example</h5>
<pre><code class="python">1   try:
2       if n &lt; 0:
3           raise ValueLessThanZero
4       elif n &lt; min_threshold:
5           raise ValueTooSmallError
6       elif n &gt; max_threshold:
7           raise ValueTooLargeError(argument)
8       elif n == 0:
9           raise
10  except ValueLessThanZero:
11      pass
12  except ValueTooSmallError(a):
13      pass
14  except (e1, e2):
15      pass
16  except:
17      pass
</code></pre>
<h5 id="matches_116">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>raise:None</code></td>
<td align="left">9</td>
</tr>
<tr>
<td align="left"><code>raise:ValueLessThanZero</code></td>
<td align="left">3</td>
</tr>
<tr>
<td align="left"><code>raise:ValueTooLargeError</code></td>
<td align="left">7</td>
</tr>
<tr>
<td align="left"><code>raise:ValueTooSmallError</code></td>
<td align="left">5</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-except">Feature <code>except</code></h4>
<h5 id="derivations_76">Derivations</h5>
<p><a href="#feature-try_raisetry_except">⬇️ feature <code>try_raise|try_except</code></a></p>
<h5 id="specification_117">Specification</h5>
<pre><code class="re">           ^(.*)/(?P&lt;_1&gt;handlers/\d+/(type/(func/|elts/\d+/)?)?)_pos=(?P&lt;POS&gt;.+)
\n(?:\1.+\n)*?\1/(?P=_1)                                        (id=(?P&lt;SUFFIX&gt;.+)|type=(?P&lt;SUFFIX&gt;None))
</code></pre>
<h5 id="example_117">Example</h5>
<pre><code class="python">1   try:
2       if n &lt; 0:
3           raise ValueLessThanZero
4       elif n &lt; min_threshold:
5           raise ValueTooSmallError
6       elif n &gt; max_threshold:
7           raise ValueTooLargeError(argument)
8       elif n == 0:
9           raise
10  except ValueLessThanZero:
11      pass
12  except ValueTooSmallError(a):
13      pass
14  except (e1, e2):
15      pass
16  except:
17      pass
</code></pre>
<h5 id="matches_117">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>except:None</code></td>
<td align="left">16</td>
</tr>
<tr>
<td align="left"><code>except:ValueLessThanZero</code></td>
<td align="left">10</td>
</tr>
<tr>
<td align="left"><code>except:ValueTooSmallError</code></td>
<td align="left">12</td>
</tr>
<tr>
<td align="left"><code>except:e1</code></td>
<td align="left">14</td>
</tr>
<tr>
<td align="left"><code>except:e2</code></td>
<td align="left">14</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-try_raisetry_except">Feature <code>try_raise|try_except</code></h4>
<h5 id="derivations_77">Derivations</h5>
<p><a href="#feature-except">⬆️ feature <code>except</code></a>
<a href="#feature-raise">⬆️ feature <code>raise</code></a>
<a href="#feature-try">⬆️ feature <code>try</code></a></p>
<h5 id="specification_118">Specification</h5>
<pre><code class="sql">SELECT &quot;try_&quot; || e.name_prefix,
       e.name_suffix,
       max(t.span_start) || &quot;-&quot; || min(t.span_end),
       max(t.path)
FROM t_try t
JOIN t e ON (e.path GLOB t.path || &quot;*-&quot;)
WHERE e.name_prefix IN (&quot;raise&quot;,
                        &quot;except&quot;)
GROUP BY e.rowid
</code></pre>
<h5 id="example_118">Example</h5>
<pre><code class="python">1   try:
2       try:
3           raise e1
4       except e1:
5           pass
6       raise e2
7   except e3:
8       pass
9   try:
10      raise e1
11  except e1:
12      pass
</code></pre>
<h5 id="matches_118">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>try_except:e1</code></td>
<td align="left">2-5, 9-12</td>
</tr>
<tr>
<td align="left"><code>try_except:e3</code></td>
<td align="left">1-8</td>
</tr>
<tr>
<td align="left"><code>try_raise:e1</code></td>
<td align="left">2-5, 9-12</td>
</tr>
<tr>
<td align="left"><code>try_raise:e2</code></td>
<td align="left">1-8</td>
</tr>
</tbody>
</table>
<hr>
<h2 id="class-definitions">Class definitions</h2>
<hr>
<h4 id="feature-class">Feature <code>class</code></h4>
<p>Match a class definition.</p>
<h5 id="derivations_78">Derivations</h5>
<p><a href="#feature-method">⬇️ feature <code>method</code></a></p>
<h5 id="specification_119">Specification</h5>
<pre><code class="re">           ^(.*)/_type=ClassDef
\n(?:\1.+\n)*?\1/_pos=(?P&lt;POS&gt;.+)
\n(?:\1.+\n)*?\1/name=(?P&lt;SUFFIX&gt;.+)
\n(?:\1.+\n)* \1/.+/_pos=(?P&lt;POS&gt;.+)
</code></pre>
<h5 id="example_119">Example</h5>
<pre><code class="python">1   class MyClass:
2       &quot;&quot;&quot;A simple example class&quot;&quot;&quot;
3       i = 12345
4
5       def f(self):
6           return 'hello world'
7
8   instance = MyClass()
</code></pre>
<h5 id="matches_119">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>class:MyClass</code></td>
<td align="left">1-6</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-method">Feature <code>method</code></h4>
<h5 id="derivations_79">Derivations</h5>
<p><a href="#feature-class">⬆️ feature <code>class</code></a>
<a href="#feature-function">⬆️ feature <code>function</code></a>
<a href="#feature-instance_methodclass_methodstatic_method">⬇️ feature <code>instance_method|class_method|static_method</code></a></p>
<h5 id="specification_120">Specification</h5>
<pre><code class="sql">SELECT &quot;method&quot;,
       f.name_suffix,
       f.span,
       f.path
FROM t_class c
JOIN t_function f ON (f.path GLOB c.path || &quot;*-*-&quot;)
</code></pre>
<h5 id="example_120">Example</h5>
<pre><code class="python">1   class MyClass:
2
3       def an_instance_method(self, a, b, c):
4           pass
5
6       @staticmethod
7       def a_static_method(f, g):
8           pass
9
10      @classmethod
11      def a_class_method(cls, d, e):
12          pass
</code></pre>
<h5 id="matches_120">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>method:an_instance_method</code></td>
<td align="left">3-4</td>
</tr>
<tr>
<td align="left"><code>method:a_static_method</code></td>
<td align="left">6-8</td>
</tr>
<tr>
<td align="left"><code>method:a_class_method</code></td>
<td align="left">10-12</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-instance_methodclass_methodstatic_method">Feature <code>instance_method|class_method|static_method</code></h4>
<h5 id="derivations_80">Derivations</h5>
<p><a href="#feature-function_argument">⬆️ feature <code>function_argument</code></a>
<a href="#feature-method">⬆️ feature <code>method</code></a></p>
<h5 id="specification_121">Specification</h5>
<pre><code class="sql">SELECT CASE a.name_suffix
           WHEN &quot;self&quot; THEN &quot;instance_method&quot;
           WHEN &quot;cls&quot; THEN &quot;class_method&quot;
           ELSE &quot;static_method&quot;
       END,
       m.name_suffix,
       m.span,
       m.path
FROM t_method m
LEFT JOIN t_function_argument a ON (a.path GLOB m.path || &quot;*-*-&quot;
                                    AND a.name_suffix IN (&quot;self&quot;,
                                                          &quot;cls&quot;))
</code></pre>
<p><em>Remark.</em>: the presence of a decorator <code>classmethod</code> or <code>staticmethod</code> is unchecked, nor is the flavor of the arguments <code>self</code> and <code>cls</code> (they should be positional arguments). In other words, it is enough that a method has an argument <code>self</code> (resp. <code>cls</code>) for being categorized as an instance (resp. class) method, or else as a static method.</p>
<h5 id="example_121">Example</h5>
<pre><code class="python">1   class MyClass:
2
3       def an_instance_method(self, a, b, c):
4           pass
5
6       @classmethod
7       def a_class_method(cls, d, e):
8           pass
9
10      @staticmethod
11      def a_static_method(f, g):
12          pass
</code></pre>
<h5 id="matches_121">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>instance_method:an_instance_method</code></td>
<td align="left">3-4</td>
</tr>
<tr>
<td align="left"><code>class_method:a_class_method</code></td>
<td align="left">6-8</td>
</tr>
<tr>
<td align="left"><code>static_method:a_static_method</code></td>
<td align="left">10-12</td>
</tr>
</tbody>
</table>
<hr>
<h2 id="modules">Modules</h2>
<hr>
<h4 id="feature-import95module">Feature <code>import_module</code></h4>
<h5 id="derivations_81">Derivations</h5>
<p><a href="#feature-import">⬇️ feature <code>import</code></a></p>
<h5 id="specification_122">Specification</h5>
<pre><code class="re">           ^(.*)/_type=Import(From)?
\n(?:\1.+\n)*?\1/_pos=(?P&lt;POS&gt;.+)
(
\n(?:\1.+\n)*?\1/module='(?P&lt;SUFFIX&gt;.+)'
|
(
\n(?:\1.+\n)*?\1/names/\d+/name=(?P&lt;SUFFIX&gt;.+)
)+
)
</code></pre>
<h5 id="example_122">Example</h5>
<pre><code class="python">1   import m1, m2, m3
2   import m4
3   from m5 import n1, n2
4   from m6 import n3 as n4
5   from . import m7
6   from .m8 import n5
</code></pre>
<h5 id="matches_122">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>import_module:m1</code></td>
<td align="left">1</td>
</tr>
<tr>
<td align="left"><code>import_module:m2</code></td>
<td align="left">1</td>
</tr>
<tr>
<td align="left"><code>import_module:m3</code></td>
<td align="left">1</td>
</tr>
<tr>
<td align="left"><code>import_module:m4</code></td>
<td align="left">2</td>
</tr>
<tr>
<td align="left"><code>import_module:m5</code></td>
<td align="left">3</td>
</tr>
<tr>
<td align="left"><code>import_module:m6</code></td>
<td align="left">4</td>
</tr>
<tr>
<td align="left"><code>import_module:m7</code></td>
<td align="left">5</td>
</tr>
<tr>
<td align="left"><code>import_module:m8</code></td>
<td align="left">6</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-import95name">Feature <code>import_name</code></h4>
<h5 id="derivations_82">Derivations</h5>
<p><a href="#feature-import">⬇️ feature <code>import</code></a></p>
<h5 id="specification_123">Specification</h5>
<pre><code class="re">           ^(.*)/_type=ImportFrom
\n(?:\1.+\n)*?\1/_pos=(?P&lt;POS&gt;.+)
\n(?:\1.+\n)*?\1/module='.+'
(
\n(?:\1.+\n)*?\1/names/\d+/name=(?P&lt;SUFFIX&gt;.+)
)+
</code></pre>
<h5 id="example_123">Example</h5>
<pre><code class="python">1   import m1, m2, m3
2   import m4
3   from m5 import n1, n2
4   from m6 import n3 as n4
5   from . import m7
6   from .m8 import n5
</code></pre>
<h5 id="matches_123">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>import_name:n1</code></td>
<td align="left">3</td>
</tr>
<tr>
<td align="left"><code>import_name:n2</code></td>
<td align="left">3</td>
</tr>
<tr>
<td align="left"><code>import_name:n3</code></td>
<td align="left">4</td>
</tr>
<tr>
<td align="left"><code>import_name:n5</code></td>
<td align="left">6</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-import">Feature <code>import</code></h4>
<p>Suffixed by the imported module and, if any, the imported name. In most cases, could replace the two low-level features <code>import_module</code> and <code>import_name</code>.</p>
<h5 id="derivations_83">Derivations</h5>
<p><a href="#feature-import_module">⬆️ feature <code>import_module</code></a>
<a href="#feature-import_name">⬆️ feature <code>import_name</code></a></p>
<h5 id="specification_124">Specification</h5>
<pre><code class="sql">SELECT &quot;import&quot;,
       m.name_suffix || (CASE
                             WHEN n.name_suffix IS NULL THEN &quot;&quot;
                             ELSE &quot;:&quot; || n.name_suffix
                         END),
       m.span,
       m.path
FROM t_import_module m
LEFT JOIN t_import_name n ON (m.span = n.span)
</code></pre>
<h5 id="example_124">Example</h5>
<pre><code class="python">1   import m1, m2, m3
2   import m4
3   from m5 import n1, n2
4   from m6 import n3 as n4
5   from . import m7
6   from .m8 import n5
</code></pre>
<h5 id="matches_124">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>import:m1</code></td>
<td align="left">1</td>
</tr>
<tr>
<td align="left"><code>import:m2</code></td>
<td align="left">1</td>
</tr>
<tr>
<td align="left"><code>import:m3</code></td>
<td align="left">1</td>
</tr>
<tr>
<td align="left"><code>import:m4</code></td>
<td align="left">2</td>
</tr>
<tr>
<td align="left"><code>import:m5:n1</code></td>
<td align="left">3</td>
</tr>
<tr>
<td align="left"><code>import:m5:n2</code></td>
<td align="left">3</td>
</tr>
<tr>
<td align="left"><code>import:m6:n3</code></td>
<td align="left">4</td>
</tr>
<tr>
<td align="left"><code>import:m7</code></td>
<td align="left">5</td>
</tr>
<tr>
<td align="left"><code>import:m8:n5</code></td>
<td align="left">6</td>
</tr>
</tbody>
</table>
<hr>
<h1 id="iterative-patterns">Iterative patterns</h1>
<h2 id="loops">Loops</h2>
<hr>
<h4 id="feature-count_elementscount_states">Feature <code>count_elements|count_states</code></h4>
<p>Counting the elements of a sequence (<code>for</code>), or the states of an evolution (<code>while</code>) (all of them, or only those which satisfy a condition). Suffix with the name of the counter.</p>
<h5 id="derivations_84">Derivations</h5>
<p><a href="#feature-assignment_lhs_identifier">⬆️ feature <code>assignment_lhs_identifier</code></a>
<a href="#feature-increment">⬆️ feature <code>increment</code></a>
<a href="#feature-loop">⬆️ feature <code>loop</code></a></p>
<h5 id="specification_125">Specification</h5>
<pre><code class="sql">SELECT CASE t_loop.name_suffix
           WHEN &quot;for&quot; THEN &quot;count_elements&quot;
           ELSE &quot;count_states&quot;
       END,
       inc.name_suffix,
       min(t_loop.span_start) || &quot;-&quot; || max(t_loop.span_end), -- The biggest loop...
 t_loop.path
FROM t_loop
JOIN t_increment inc ON (inc.path GLOB t_loop.path || &quot;*-&quot;)-- including the incrementation of a variable x...
WHERE NOT EXISTS -- which is not initialized in this loop.
    (SELECT * -- In other words, ensure there is no...
     FROM t_assignment_lhs_identifier x -- assignment...
     WHERE (x.name_suffix = inc.name_suffix -- to the same x...
            AND x.span != inc.span -- distinct from its incrementation...
            AND x.path GLOB t_loop.path || &quot;*-&quot;) )-- and enclosed in the loop.
GROUP BY inc.path
</code></pre>
<h5 id="example_125">Example</h5>
<pre><code class="python">1   for i1 in s1:
2       c1 = 0
3       c2 = 1
4       for i2 in s2:
5           c2 += 1
6           c3 = 0
7           for i3 in s3:
8               if foo(i2, i3):
9                   c3 += 1
10              c1 = c1 + 1
11  while foo(i):
12      i = 0
13      f1, f2 = f2, f
14      index += 1
15      for j in str(f):
16          i += 1
</code></pre>
<h5 id="matches_125">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>count_elements:c1</code></td>
<td align="left">4-10</td>
</tr>
<tr>
<td align="left"><code>count_elements:c2</code></td>
<td align="left">4-10</td>
</tr>
<tr>
<td align="left"><code>count_elements:c3</code></td>
<td align="left">7-10</td>
</tr>
<tr>
<td align="left"><code>count_elements:i</code></td>
<td align="left">15-16</td>
</tr>
<tr>
<td align="left"><code>count_states:index</code></td>
<td align="left">11-16</td>
</tr>
</tbody>
</table>
<hr>
<h2 id="sequential-loops_1">Sequential loops</h2>
<h3 id="sequential-loops-with-late-exit">Sequential loops with late exit</h3>
<hr>
<h4 id="feature-accumulate95elements">Feature <code>accumulate_elements</code></h4>
<p>An accumulator is iteratively updated from its previous value and that of the iteration variable. Suffixed by the name of this accumulator.</p>
<h5 id="derivations_85">Derivations</h5>
<p><a href="#feature-for">⬆️ feature <code>for</code></a>
<a href="#feature-update">⬆️ feature <code>update</code></a>
<a href="#feature-update_with">⬆️ feature <code>update_with</code></a>
<a href="#feature-accumulate_all_elements">⬇️ feature <code>accumulate_all_elements</code></a></p>
<h5 id="specification_126">Specification</h5>
<pre><code class="sql">SELECT &quot;accumulate_elements&quot;,
       t_update_with.name_suffix,
       t_for.span,
       t_for.path
FROM t_for
JOIN t_update ON (t_update.path GLOB t_for.path || &quot;*-&quot;)
JOIN t_update_with ON (t_update.path = t_update_with.path)
WHERE t_update.name_suffix GLOB &quot;*:&quot; || t_for.name_suffix
</code></pre>
<h5 id="example_126">Example</h5>
<pre><code class="python">1   def accumulate_elements(elements):
2       acc = seed
3       for element in elements:
4           acc = element + acc
5           seed += 1
6       return acc
7
8   for i in range(10):
9       acc_1 = combine(acc_1, i)
10      if condition:
11          acc_2 += i
12      else:
13          acc_2 -= i
14
15  for element in elements:
16      print(&quot;foo&quot;)
17      if predicate(element):
18          print(&quot;bar&quot;)
19          acc.append(element)
20      print(&quot;fiz&quot;)
21
22  power = 1
23  for x1 in seq1:
24      acc = set()
25      for x2 in seq2:
26          acc.add(x2)
27          power *= 2 # LIMITATION: no match, since this update does not make use of the iteration variable
28
29  for i in range(10):
30      acc //= foo(bar, i)
31
32  for i in range(10): # no match
33      foo(acc, bar, i)
34
35  for i in range(10): # no match
36      print(foobar, i)
37
38  for c in string:
39      c = c.upper() # no match: this is the iteration variable, not an accumulator
40      print(c)
</code></pre>
<h5 id="matches_126">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>accumulate_elements:Add</code></td>
<td align="left">3-5, 8-13</td>
</tr>
<tr>
<td align="left"><code>accumulate_elements:Sub</code></td>
<td align="left">8-13</td>
</tr>
<tr>
<td align="left"><code>accumulate_elements:combine</code></td>
<td align="left">8-13</td>
</tr>
<tr>
<td align="left"><code>accumulate_elements:append</code></td>
<td align="left">15-20</td>
</tr>
<tr>
<td align="left"><code>accumulate_elements:add</code></td>
<td align="left">25-27</td>
</tr>
<tr>
<td align="left"><code>accumulate_elements:FloorDiv</code></td>
<td align="left">29-30</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-accumulate95some95elements">Feature <code>accumulate_some_elements</code></h4>
<p>Restriction of <a href="#feature-accumulate_elements">feature <code>accumulate_elements</code></a> . This time, the update statement is enclosed in a conditional statement.</p>
<h5 id="derivations_86">Derivations</h5>
<p><a href="#feature-for">⬆️ feature <code>for</code></a>
<a href="#feature-if">⬆️ feature <code>if</code></a>
<a href="#feature-update">⬆️ feature <code>update</code></a>
<a href="#feature-update_with">⬆️ feature <code>update_with</code></a>
<a href="#feature-accumulate_all_elements">⬇️ feature <code>accumulate_all_elements</code></a></p>
<h5 id="specification_127">Specification</h5>
<pre><code class="sql">SELECT &quot;accumulate_some_elements&quot;,
       t_update_with.name_suffix,
       t_for.span,
       t_for.path
FROM t_for
JOIN t_if ON (t_if.path GLOB t_for.path || &quot;*-&quot;)
JOIN t_update ON (t_update.path GLOB t_if.path || &quot;*-&quot;)
JOIN t_update_with ON (t_update.path = t_update_with.path)
WHERE t_update.name_suffix GLOB &quot;*:&quot; || t_for.name_suffix
GROUP BY t_update.path
</code></pre>
<h5 id="example_127">Example</h5>
<pre><code class="python">1   def accumulate_elements(elements):
2       acc = seed
3       for element in elements:
4           acc = element + acc
5           seed += 1
6       return acc
7
8   for i in range(10):
9       acc_1 = combine(acc_1, i)
10      if condition:
11          acc_2 += i
12      else:
13          acc_2 -= i
14
15  for element in elements:
16      print(&quot;foo&quot;)
17      if predicate_1(element):
18          print(&quot;bar&quot;)
19          if predicate_2(element):
20              acc.append(element)
21      print(&quot;fiz&quot;)
</code></pre>
<h5 id="matches_127">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>accumulate_some_elements:Add</code></td>
<td align="left">8-13</td>
</tr>
<tr>
<td align="left"><code>accumulate_some_elements:Sub</code></td>
<td align="left">8-13</td>
</tr>
<tr>
<td align="left"><code>accumulate_some_elements:append</code></td>
<td align="left">15-21</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-accumulate95all95elements">Feature <code>accumulate_all_elements</code></h4>
<p>Difference between features <a href="#feature-accumulate_elements"><code>accumulate_elements</code></a> and <a href="#feature-accumulate_some_elements"><code>accumulate_some_elements</code></a>.</p>
<h5 id="derivations_87">Derivations</h5>
<p><a href="#feature-accumulate_elements">⬆️ feature <code>accumulate_elements</code></a>
<a href="#feature-accumulate_some_elements">⬆️ feature <code>accumulate_some_elements</code></a></p>
<h5 id="specification_128">Specification</h5>
<pre><code class="sql">SELECT &quot;accumulate_all_elements&quot;,
       acc.name_suffix,
       acc.span,
       acc.path
FROM t_accumulate_elements acc
WHERE NOT EXISTS
    (SELECT *
     FROM t_accumulate_some_elements
     WHERE path = acc.path
       AND name_suffix = acc.name_suffix)
</code></pre>
<h5 id="example_128">Example</h5>
<pre><code class="python">1   def accumulate_elements(elements):
2       acc = seed
3       for element in elements:
4           acc = element + acc
5           seed += 1
6       return acc
7
8   for i in range(10):
9       acc_1 = combine(acc_1, i)
10      if condition:
11          acc_2 += i
12      else:
13          acc_2 -= i
14
15  for element in elements:
16      print(&quot;foo&quot;)
17      if predicate_1(element):
18          print(&quot;bar&quot;)
19          if predicate_2(element):
20              acc.append(element)
21      print(&quot;fiz&quot;)
</code></pre>
<h5 id="matches_128">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>accumulate_all_elements:Add</code></td>
<td align="left">3-5</td>
</tr>
<tr>
<td align="left"><code>accumulate_all_elements:combine</code></td>
<td align="left">8-13</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-find95best95element">Feature <code>find_best_element</code></h4>
<p>An accumulation pattern that, from a given collection, returns the best element verifying a certain condition.</p>
<h5 id="derivations_88">Derivations</h5>
<p><a href="#feature-assignment_lhs_identifier">⬆️ feature <code>assignment_lhs_identifier</code></a>
<a href="#feature-assignment_rhs_atom">⬆️ feature <code>assignment_rhs_atom</code></a>
<a href="#feature-for">⬆️ feature <code>for</code></a>
<a href="#feature-if">⬆️ feature <code>if</code></a>
<a href="#feature-if_test_atom">⬆️ feature <code>if_test_atom</code></a>
<a href="#feature-single_assignment">⬆️ feature <code>single_assignment</code></a></p>
<h5 id="specification_129">Specification</h5>
<pre><code class="sql">SELECT &quot;find_best_element&quot;,
       elt.name_suffix || &quot;:&quot; || cnd.name_suffix,
       t_for.span,
       t_for.path
FROM t_for -- A foor loop...
JOIN t_if ON (t_if.path GLOB t_for.path || &quot;*-&quot;)-- enclosing a conditional statement...
JOIN t_if_test_atom elt ON (elt.span_start = t_if.span_start -- (comparing...
                            AND elt.name_suffix = t_for.name_suffix)-- the iteration variable...
JOIN t_if_test_atom cnd ON (cnd.span_start = t_if.span_start
                            AND elt.rowid != cnd.rowid)-- to a candidate)...
JOIN t_single_assignment lhs ON (lhs.path GLOB t_if.path || &quot;*-&quot; -- enclosing...
                                 AND cnd.name_suffix = lhs.name_suffix)--  a single assignment of the candidate...
JOIN t_assignment_rhs_atom rhs ON (elt.name_suffix = rhs.name_suffix -- to the iteration variable.
                                   AND rhs.path GLOB lhs.path || &quot;*-&quot;)
WHERE NOT EXISTS -- Ensure that there is no...
    (SELECT *
     FROM t_assignment_lhs_identifier -- other assignment...
     WHERE name_suffix == lhs.name_suffix -- of the candidate...
       AND span != lhs.span
       AND path GLOB t_for.path || &quot;*-&quot; ) -- INSIDE the loop.
</code></pre>
<h5 id="example_129">Example</h5>
<pre><code class="python">1   def find_best_element(elements):
2       candidate = bad_value
3       for element in elements:
4           if is_better(element, candidate):
5               candidate = element
6       return candidate
7
8   def find_maximum_element(elements):
9       candidate = element[0]
10      for element in elements:
11          if candidate &gt; element:
12              candidate = element
13      return candidate
14
15  def longest_progression(elements):
16      previous, *elements = elements
17      candidate = [previous]
18      best = [previous]
19      for element in elements: # paroxython: find_best_element:element:best...
20          if element &lt;= previous:
21              candidate = [element]
22          else:
23              candidate += [element]
24              if len(candidate) &gt; len(best):
25                  best = candidate
26          previous = element # paroxython: ...find_best_element:element:best
27      return best
28
29  greatest = 0
30  for (i, (a, b)) in enumerate(couples, 1):
31      if b * log(a) &gt; greatest:
32          greatest = b * log(a)
33
34  for digit in word:
35      if digit == previous_digit == &quot;1&quot;:
36          previous_digit = None
37      else:
38          previous_digit = digit
</code></pre>
<p><em>LIMITATION.</em> False negative when the iteration variable does not appear directly in the test of the conditional statement (cf. function <code>longest_progression()</code> above). Add a manual hint in such cases.</p>
<h5 id="matches_129">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>find_best_element:element:candidate</code></td>
<td align="left">3-5, 10-12</td>
</tr>
<tr>
<td align="left"><code>find_best_element:a:greatest</code></td>
<td align="left">30-32</td>
</tr>
<tr>
<td align="left"><code>find_best_element:b:greatest</code></td>
<td align="left">30-32</td>
</tr>
<tr>
<td align="left"><code>find_best_element:element:best</code></td>
<td align="left">19-26</td>
</tr>
</tbody>
</table>
<hr>
<h3 id="sequential-loops-with-early-exit">Sequential loops with early exit</h3>
<hr>
<h4 id="feature-universal_quantificationexistential_quantification">Feature <code>universal_quantification|existential_quantification</code></h4>
<p>Check whether all elements of a collection satisfy a predicate (universal quantification) or at least one element satisfies a predicate (existential quantification).</p>
<h5 id="derivations_89">Derivations</h5>
<p><a href="#feature-for">⬆️ feature <code>for</code></a>
<a href="#feature-if">⬆️ feature <code>if</code></a>
<a href="#feature-if_test_atom">⬆️ feature <code>if_test_atom</code></a>
<a href="#feature-return">⬆️ feature <code>return</code></a></p>
<h5 id="specification_130">Specification</h5>
<pre><code class="sql">SELECT CASE ret.name_suffix
           WHEN &quot;False&quot; THEN &quot;universal_quantification&quot;
           ELSE &quot;existential_quantification&quot;
       END,
       t_for.name_suffix,
       t_for.span,
       t_for.path
FROM t_for -- A for loop...
JOIN t_if ON (t_if.path GLOB t_for.path || &quot;*-&quot;)-- enclosing an if statement...
JOIN t_if_test_atom x ON (x.span_start = t_if.span_start
                          AND x.name_suffix = t_for.name_suffix)-- which tests the iteration variable...
JOIN t_return ret ON (ret.path GLOB t_if.path || &quot;*-&quot; -- and returns...
                      AND ret.name_suffix IN (&quot;True&quot;,
                                              &quot;False&quot;))-- a boolean
</code></pre>
<p><em>Remark.</em> The <code>return</code> statement following the loop is untested, which allows to catch some “hidden” quantification patterns. For instance, in <code>is_prime()</code> (below), an integer <em>n</em> is prime iff it is coprime with <strong>all</strong> the integers of [2, <em>n</em>[ and greater than 1).</p>
<h5 id="example_130">Example</h5>
<pre><code class="python">1   def all_elements_satisfy(elements):
2       for element in elements:
3           if not is_good(element):
4               return False
5       return True
6
7   def some_elements_satisfy(elements):
8       for element in elements:
9           if is_good(element):
10              return True
11      return False
12
13  def is_prime(n):
14      for candidate in range(2, n):
15          if n % candidate == 0:
16              return False
17      return n &gt; 1
</code></pre>
<h5 id="matches_130">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>universal_quantification:element</code></td>
<td align="left">2-4</td>
</tr>
<tr>
<td align="left"><code>existential_quantification:element</code></td>
<td align="left">8-10</td>
</tr>
<tr>
<td align="left"><code>universal_quantification:candidate</code></td>
<td align="left">14-16</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-find95first95element">Feature <code>find_first_element</code></h4>
<p>Linear search. Return the first element of a sequence satisfying a predicate.</p>
<h5 id="derivations_90">Derivations</h5>
<p><a href="#feature-for">⬆️ feature <code>for</code></a>
<a href="#feature-if">⬆️ feature <code>if</code></a>
<a href="#feature-if_test_atom">⬆️ feature <code>if_test_atom</code></a>
<a href="#feature-return">⬆️ feature <code>return</code></a></p>
<h5 id="specification_131">Specification</h5>
<pre><code class="sql">SELECT &quot;find_first_element&quot;,
       t_for.name_suffix,
       t_for.span,
       t_for.path
FROM t_for -- A for loop...
JOIN t_if ON (t_if.path GLOB t_for.path || &quot;*-&quot;)-- enclosing an if statement...
JOIN t_if_test_atom x ON (x.span_start = t_if.span_start
                          AND x.name_suffix = t_for.name_suffix)-- which tests the iteration variable...
JOIN t_return ret ON (ret.path GLOB t_if.path || &quot;*-&quot; -- and returns...
                      AND ret.name_suffix = x.name_suffix)-- it.
</code></pre>
<h5 id="example_131">Example</h5>
<pre><code class="python">1   def search_index(seq, x):
2       for i in range(len(seq)):
3           if seq[i] == x:
4               return i
5       return None
6
7   def search_element(seq):
8       for x in seq:
9           if is_good(x):
10               return x
11      return None
</code></pre>
<h5 id="matches_131">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>find_first_element:i</code></td>
<td align="left">2-4</td>
</tr>
<tr>
<td align="left"><code>find_first_element:x</code></td>
<td align="left">8-10</td>
</tr>
</tbody>
</table>
<hr>
<h2 id="non-sequential-loops_1">Non-sequential loops</h2>
<h3 id="non-sequential-infinite-loops">Non-sequential infinite loops</h3>
<hr>
<h4 id="feature-get95valid95input">Feature <code>get_valid_input</code></h4>
<p>Interrogate a stream of inputs up to a valid value, and returning it.</p>
<h5 id="derivations_91">Derivations</h5>
<p><a href="#feature-assignment_lhs_identifier">⬆️ feature <code>assignment_lhs_identifier</code></a>
<a href="#feature-if">⬆️ feature <code>if</code></a>
<a href="#feature-if_test_atom">⬆️ feature <code>if_test_atom</code></a>
<a href="#feature-infinite_while">⬆️ feature <code>infinite_while</code></a>
<a href="#feature-return">⬆️ feature <code>return</code></a></p>
<h5 id="specification_132">Specification</h5>
<pre><code class="sql">SELECT &quot;get_valid_input&quot;,
       ret.name_suffix,
       wt.span,
       wt.path
FROM t_infinite_while wt -- An infinite loop...
JOIN t_assignment_lhs_identifier x1 ON (x1.path GLOB wt.path || &quot;*-&quot;)-- features the assignment of a variable...
JOIN t_if ON (t_if.path GLOB wt.path || &quot;*-&quot;
              AND t_if.span_start &gt; x1.span_end)-- followed by a conditional statement...
JOIN t_if_test_atom x2 ON (x1.name_suffix = x2.name_suffix -- testing this variable...
                           AND x2.span_start = t_if.span_start)
JOIN t_return ret ON (ret.path GLOB t_if.path || &quot;*-&quot;
                      AND ret.name_suffix = x1.name_suffix)-- and returning it.
</code></pre>
<h5 id="example_132">Example</h5>
<pre><code class="python">1   def input_number_between(prompt, lower_bound, upper_bound):
2       while True:
3           number = literal_eval(input(prompt))
4           if lower_bound &lt;= number &lt;= upper_bound:
5               return number
6           print(f&quot;Your number should be between {lower_bound} and {upper_bound}!&quot;)
</code></pre>
<h5 id="matches_132">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>get_valid_input:number</code></td>
<td align="left">2-6</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-count95inputs">Feature <code>count_inputs</code></h4>
<p>Count inputs until a sentinel value is encountered.</p>
<h5 id="derivations_92">Derivations</h5>
<p><a href="#feature-assignment_lhs_identifier">⬆️ feature <code>assignment_lhs_identifier</code></a>
<a href="#feature-if">⬆️ feature <code>if</code></a>
<a href="#feature-if_test_atom">⬆️ feature <code>if_test_atom</code></a>
<a href="#feature-increment">⬆️ feature <code>increment</code></a>
<a href="#feature-infinite_while">⬆️ feature <code>infinite_while</code></a>
<a href="#feature-return">⬆️ feature <code>return</code></a></p>
<h5 id="specification_133">Specification</h5>
<pre><code class="sql">SELECT &quot;count_inputs&quot;,
       ret.name_suffix,
       wt.span,
       wt.path
FROM t_infinite_while wt -- An infinite loop...
JOIN t_assignment_lhs_identifier x1 ON (x1.path GLOB wt.path || &quot;*-&quot;)-- features the assignment of a variable...
JOIN t_if ON (t_if.path GLOB wt.path || &quot;*-&quot;
              AND t_if.span_start &gt; x1.span_end)-- followed by a conditional statement...
JOIN t_if_test_atom x2 ON (x1.name_suffix = x2.name_suffix -- testing this variable...
                           AND x2.span_start = t_if.span_start)
JOIN t_return ret ON (ret.path GLOB t_if.path || &quot;*-&quot;)-- and returning another variable (an accumulator)...
JOIN t_increment acc ON (acc.name_suffix = ret.name_suffix
                         AND acc.path GLOB wt.path || &quot;*-&quot; -- which is incremented somewhere in the loop...
                         AND acc.path NOT GLOB t_if.path || &quot;*-&quot; -- but not INSIDE the conditional statement.
)
</code></pre>
<h5 id="example_133">Example</h5>
<pre><code class="python">1   def number_guessing(bound):
2       print(&quot;I'm thinking of an integer in [1, %s].&quot; % bound)
3       number = randrange(bound) + 1
4       trial_count = 1
5       while True:
6           candidate = int(input(&quot;Your guess #%s? &quot; % trial_count))
7           if candidate == number:
8               print(&quot;Yes!&quot;)
9               return trial_count
10          print(&quot;Too %s!&quot; % (&quot;low&quot; if candidate &lt; number else &quot;high&quot;))
11          trial_count += 1
</code></pre>
<h5 id="matches_133">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>count_inputs:trial_count</code></td>
<td align="left">5-11</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-accumulate95inputs">Feature <code>accumulate_inputs</code></h4>
<p>Accumulate a stream of inputs until a sentinel value is encountered.</p>
<h5 id="derivations_93">Derivations</h5>
<p><a href="#feature-assignment_lhs_identifier">⬆️ feature <code>assignment_lhs_identifier</code></a>
<a href="#feature-if">⬆️ feature <code>if</code></a>
<a href="#feature-if_test_atom">⬆️ feature <code>if_test_atom</code></a>
<a href="#feature-infinite_while">⬆️ feature <code>infinite_while</code></a>
<a href="#feature-return">⬆️ feature <code>return</code></a>
<a href="#feature-update">⬆️ feature <code>update</code></a></p>
<h5 id="specification_134">Specification</h5>
<pre><code class="sql">SELECT &quot;accumulate_inputs&quot;,
       ret.name_suffix,
       wt.span,
       wt.path
FROM t_infinite_while wt -- An infinite loop...
JOIN t_assignment_lhs_identifier x1 ON (x1.path GLOB wt.path || &quot;*-&quot;)-- features the assignment of a variable...
JOIN t_if ON (t_if.path GLOB wt.path || &quot;*-&quot;
              AND t_if.span_start &gt; x1.span_end)-- followed by a conditional statement...
JOIN t_if_test_atom x2 ON (x1.name_suffix = x2.name_suffix -- testing this variable...
                           AND x2.span_start = t_if.span_start)
JOIN t_return ret ON (ret.path GLOB t_if.path || &quot;*-&quot;)-- and returning another variable (an accumulator)...
JOIN t_update acc ON (acc.span_start &gt; t_if.span_start -- which is updated after the conditional...
                      AND acc.span_end &lt;= wt.span_end -- but before the end of the loop...
                      AND acc.name_suffix = ret.name_suffix || &quot;:&quot; || x1.name_suffix) -- with the first variable.
</code></pre>
<h5 id="example_134">Example</h5>
<pre><code class="python">1   def accumulate_inputs():
2       acc = seed
3       while True:
4           x = read()
5           if is_sentinel(x, y):
6               return acc
7           acc = combine(x, acc)
8
9   def accumulate_inputs():
10      acc = seed
11      while True:
12          x = read()
13          if x &gt; y:
14              return acc
15          acc += abs(x)
16
17  def accumulate_inputs():
18      acc = seed
19      while True:
20          x = read()
21          if x &gt; y:
22              return acc
23          foobar(acc, x) # paroxython: update:acc:x
24
25  def accumulate_inputs():
26      acc = []
27      while True:
28          x = read()
29          if x &gt; y:
30              return acc
31          acc.append(x)
</code></pre>
<p><em>Remark.</em>
When the update is carried out by a function call, it must be indicated with a manual hint (see line 23).</p>
<h5 id="matches_134">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>accumulate_inputs:acc</code></td>
<td align="left">3-7, 11-15, 19-23, 27-31</td>
</tr>
</tbody>
</table>
<hr>
<h1 id="programs">Programs</h1>
<hr>
<h4 id="feature-whole95span">Feature <code>whole_span</code></h4>
<p>Match a whole program, and suffix it by the number of its last line of code.</p>
<h5 id="specification_135">Specification</h5>
<pre><code class="re">\A
/_type=Module
(\n.+?)+?
_pos=(?P&lt;POS&gt;.+)
(?:\n.+)+
_pos=(?P&lt;POS&gt;(?P&lt;SUFFIX&gt;\d+):.+)
</code></pre>
<h5 id="example_135">Example</h5>
<pre><code class="python">1   print(&quot;See if you can do this. Read each line aloud and press Return between.&quot;)
2   message = &quot;this is how to keep an idiot busy for a while&quot;
3   for word in message.split(&quot; &quot;):
4       # a comment
5       input(f&quot;This is {word} cat.&quot;)
6   print(&quot;Now read the third word in each line from the top!&quot;)
7   # a final comment
</code></pre>
<p><em>Remark.</em> Normally, a source code is stripped from all its comments during its pre-processing.</p>
<h5 id="matches_135">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>whole_span:6</code></td>
<td align="left">1-6</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-topic">Feature <code>topic</code></h4>
<p>It may be interesting to indicate the category of the program with an all-encompassing hint <code># paroxython: topic</code> placed on its own line. Examples of possible categories are:</p>
<ul>
<li><code>biology</code></li>
<li><code>combinatorics</code></li>
<li><code>computability</code>: cellular automata, tag-system, etc.</li>
<li><code>fractals</code></li>
<li><code>fun</code></li>
<li><code>game</code></li>
<li><code>general</code>: sorting, searching, algorithmic pattern, etc.</li>
<li><code>geography</code></li>
<li><code>geometry</code></li>
<li><code>number_theory</code>: gcd, sieve, most problems of <a href="http://projecteuler.net">Project Euler</a>, etc.</li>
<li><code>text_processing</code></li>
<li>&hellip;</li>
</ul>
<h5 id="specification_136">Specification</h5>
<pre><code></code></pre>
<h5 id="example_136">Example</h5>
<pre><code class="python">1   print(&quot;See if you can do this. Read each line aloud and press Return between.&quot;)
2   message = &quot;this is how to keep an idiot busy for a while&quot;
3   for word in message.split(&quot; &quot;):
4       # paroxython: topic:text_processing
5       input(f&quot;This is {word} cat.&quot;)
6   print(&quot;Now read the third word in each line from the top!&quot;)
7   # paroxython: topic:fun
</code></pre>
<p><em>Remark.</em>
- The location of an all-encompassing hint does not matter, as long as it is on its own line.
- Since all hints are stripped before labelling, the resulting source actually spans from line 1 to line 5.</p>
<h5 id="matches_136">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>topic:fun</code></td>
<td align="left">1-5</td>
</tr>
<tr>
<td align="left"><code>topic:text_processing</code></td>
<td align="left">1-5</td>
</tr>
</tbody>
</table>
<hr>
<h1 id="suggestions">Suggestions</h1>
<p>These patterns match features that can be shortened.
It's up to you to decide if a rewriting would make the code clearer.</p>
<h2 id="assignments">Assignments</h2>
<hr>
<h4 id="feature-suggest95augmented95assignment">Feature <code>suggest_augmented_assignment</code></h4>
<p>When the RHS of an assignment consists in a binary operation whose left operand is the target (<code>a = a op expr</code>), the statement can be shortened as <code>a op= expr</code>.</p>
<h5 id="specification_137">Specification</h5>
<pre><code class="re">           ^(.*)/_type=Assign
\n(?:\1.+\n)*?\1/_pos=(?P&lt;POS&gt;.+)
\n(?:\1.+\n)*?\1/assigntargets/length=1
\n(?:\1.+\n)*?\1/assigntargets/1/id=(?P&lt;TARGET&gt;.+)
\n(?:\1.+\n)*?\1/assignvalue/_type=BinOp
\n(?:\1.+\n)*?\1/assignvalue/left/id=(?P=TARGET)\b
</code></pre>
<h5 id="example_137">Example</h5>
<pre><code class="python">1   a = a + b
2   a = a + (b + c)
3   a = b + a
4   a = a + b + c # FIXME
</code></pre>
<p>May be rewritten as:</p>
<pre><code class="python">1   a += b
2   a += b + c
</code></pre>
<ul>
<li>Line 3, note that the <code>+</code> binary operator is not necessarily commutative, e.g. on strings.</li>
<li>Some cases like line 4 should be matched, check the associativity rules.</li>
</ul>
<h5 id="matches_137">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>suggest_augmented_assignment</code></td>
<td align="left">1, 2</td>
</tr>
</tbody>
</table>
<hr>
<h2 id="expressions_1">Expressions</h2>
<hr>
<h4 id="feature-suggest95comparison95chaining">Feature <code>suggest_comparison_chaining</code></h4>
<h5 id="specification_138">Specification</h5>
<pre><code class="re">           ^(.*)/_type=BoolOp
\n(?:\1.+\n)*?\1/_pos=(?P&lt;POS&gt;.+)
\n(?:\1.+\n)*?\1/op/_type=And
\n(?:\1.+\n)*?\1/values/1/_type=Compare
\n(?:\1.+\n)*?\1/values/1/comparators/1/_hash=(?P&lt;HASH_1&gt;.+) # capture the right operand of the left comparison
\n(?:\1.+\n)*?\1/values/2/_type=Compare
\n(?:\1.+\n)*?\1/values/2/left/_hash=(?P=HASH_1) # match the left operand of the right comparison
</code></pre>
<h5 id="example_138">Example</h5>
<pre><code class="python">1   a &lt; b and b &lt; c
2   a &lt;= b and b &lt; c
3   a == b and b == c
4   a != b and b != c
</code></pre>
<p>May be rewritten as:</p>
<pre><code class="python">1   a &lt; b &lt; c
2   a &lt;= b &lt; c
3   a == b == c
4   a != b != c
</code></pre>
<p>Note that the last simplification is rather confusing and should be avoided.</p>
<h5 id="matches_138">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>suggest_comparison_chaining</code></td>
<td align="left">1, 2, 3, 4</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="feature-suggest95constant95definition">Feature <code>suggest_constant_definition</code></h4>
<p>Match magic numbers (unnamed numerical constants) other than -1, 0, 1 and 2. A number in the RHS of an assignment to a constant is of course ignored.</p>
<h5 id="specification_139">Specification</h5>
<pre><code class="re">  ^(/(?:body|orelse)/\d+)
(   # indented lines
                /(?P&lt;_1&gt;(?:body|orelse)/.+)/_pos=(?P&lt;POS&gt;.+)
\n(?:\1.+\n)*?\1/(?P=_1)                   /n=(?!(-1|0|1|2)\n)
|   # unindented lines
                /_type=Assign
\n(?:\1.+\n)*?\1/_pos=(?P&lt;POS&gt;.+)
\n(?:\1.+\n)*?\1/assigntargets/1/id=.*?[a-z].* # at least one lowercase letter
\n(?:\1.+\n)*?\1/assignvalue/n=(?!(-1|0|1|2)\b)
)
</code></pre>
<h5 id="example_139">Example</h5>
<pre><code class="python">1   NUMBER_OF_TEETH_OF_A_DOG = 42 # not a magic number
2   shoe_size = 42 # magic number
3   for a in s[::-1]:
4       if a == 42 and b % 2 == 0: # 42 is a magic number
5           pass
6   negative_number = -42
</code></pre>
<p>May be rewritten as:</p>
<pre><code class="python">1   NUMBER_OF_TEETH_OF_A_DOG = 42
2   ANSWER_TO_THE_ULTIMATE_QUESTION_OF_LIFE_THE_UNIVERSE_AND_EVERYTHING = 42
3   shoe_size = ANSWER_TO_THE_ULTIMATE_QUESTION_OF_LIFE_THE_UNIVERSE_AND_EVERYTHING
4   for a in s[::-1]:
5       if a == ANSWER_TO_THE_ULTIMATE_QUESTION_OF_LIFE_THE_UNIVERSE_AND_EVERYTHING and b % 2 == 0:
6           pass
7   NEGATIVE_NUMBER = -42
</code></pre>
<h5 id="matches_139">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>suggest_constant_definition</code></td>
<td align="left">2, 4, 6</td>
</tr>
</tbody>
</table>
<hr>
<h2 id="subroutines">Subroutines</h2>
<hr>
<h4 id="feature-suggest95condition95return">Feature <code>suggest_condition_return</code></h4>
<p>When a predicate ends with a conditional whose sole purpose is to return <code>True</code> or <code>False</code>, it is enough to return the condition.</p>
<h5 id="specification_140">Specification</h5>
<pre><code class="re">           ^(.*)/_type=If
\n(?:\1.+\n)*?\1/_pos=(?P&lt;POS&gt;.+)
\n(?:\1.+\n)*?\1/body/1/_type=Return
\n(?:\1.+\n)*?\1/body/1/value/value=(?P&lt;BOOL&gt;True|False) # name BOOL the value used here
\n(?:\1.+\n)*?\1/orelse/1/_type=Return
\n(?:\1.+\n)*?\1/orelse/1/_pos=(?P&lt;POS&gt;.+)
\n(?:\1.+\n)*?\1/orelse/1/value/value=(True|False)(?&lt;!(?P=BOOL)) # and check not BOOL is used there
</code></pre>
<h5 id="example_140">Example</h5>
<pre><code class="python">1   def foo():
2       if condition:
3           return True
4       else:
5           return False
6
7   def bar():
8       if condition:
9           return False
10      else:
11          return True
</code></pre>
<p>May be rewritten as:</p>
<pre><code class="python">1   def foo():
2       return condition
3
4   def bar():
5       return not condition
</code></pre>
<h5 id="matches_140">Matches</h5>
<table>
<thead>
<tr>
<th align="left">Label</th>
<th align="left">Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>suggest_condition_return</code></td>
<td align="left">2-5, 8-11</td>
</tr>
<tr>
<td align="left"># Default taxonomy</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">call/class_constructor
internal_free_call:[[:upper:]].*</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">call/class_constructor/\1
external_free_call:(?!(?:BaseException</td>
<td align="left">SystemExit</td>
</tr>
<tr>
<td align="left">call/composition
composition</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">call/exception/builtin/\1
external_free_call:(BaseException</td>
<td align="left">SystemExit</td>
</tr>
<tr>
<td align="left">call/function
internal_free_call:[[:lower:]].*</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">call/function/\1
external_free_call:(?!abs</td>
<td align="left">delattr</td>
</tr>
<tr>
<td align="left">call/function/builtin/\1
external_free_call:(abs</td>
<td align="left">delattr</td>
</tr>
<tr>
<td align="left">call/function/builtin/casting/\1
external_free_call:(int</td>
<td align="left">bool</td>
</tr>
<tr>
<td align="left">call/function/without_arguments free_call_without_arguments:[[:lower:]].*</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">call/method/\1
member_call:([[:lower:]].*)</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">call/method/chaining
method_chaining</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">class
class:.+</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">flow/assertion
assertion</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">flow/conditional
if</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">flow/conditional/else
if_else_branch</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">flow/conditional/else/if
if_elif_branch</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">flow/conditional/guard
if_guard</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">flow/conditional/nested/\1
nested_if:(.+)</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">flow/conditional/no_else
if_without_else</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">flow/exception/catch/\1 try_except(?::(BaseException</td>
<td align="left">SystemExit</td>
</tr>
<tr>
<td align="left">flow/exception/raise/\1 try_raise(?::(BaseException</td>
<td align="left">SystemExit</td>
</tr>
<tr>
<td align="left">flow/loop
loop:.+</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">flow/loop/exit/early/\1 loop_with_early_exit:.+:(.+)</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">flow/loop/exit/early/break/else loop_with_else:.+</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">flow/loop/exit/late loop_with_late_exit:.+</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">flow/loop/for
for:(.+)</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">flow/loop/for/arithmetic
for_range:[^:]+</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">flow/loop/for/arithmetic/start
for_range:[^:]+:[^:]+</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">flow/loop/for/arithmetic/start/step for_range:[^:]+:[^:]+:[^:]+</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">flow/loop/for/arithmetic/start/step/backwards
for_range:[^:]+:[^:]+:-[^:]+</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">flow/loop/for/elements
for_each</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">flow/loop/for/elements_and_indexes
for_indexes_elements</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">flow/loop/for/indexes
for_indexes</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">flow/loop/for/nested/\1 nested_for:(.+)</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">flow/loop/for/nested/square square_nested_for</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">flow/loop/for/nested/triangular triangular_nested_for</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">flow/loop/while while</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">flow/loop/while/infinite
infinite_while</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">flow/null_operation null_operation</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">io/file/open
external_free_call:open</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">io/standard/input
external_free_call:input</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">io/standard/print
external_free_call:print</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">library/personal
import_internally:.*</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">library/standard/\1 import:(math</td>
<td align="left">typing</td>
</tr>
<tr>
<td align="left">library/standard/\1/\2
import:(math</td>
<td align="left">typing</td>
</tr>
<tr>
<td align="left">library/third_party/\1
import:((?!(?:math</td>
<td align="left">typing</td>
</tr>
<tr>
<td align="left">library/third_party/\1/\2
import:((?!(?:math</td>
<td align="left">typing</td>
</tr>
<tr>
<td align="left">metadata/sloc/\1
whole_span:(.+)</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">metadata/topic/\1
topic:(.+)</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">operator/arithmetic/addition
addition_operator</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">operator/arithmetic/division
binary_operator:Div</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">operator/arithmetic/integer_division
binary_operator:FloorDiv</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">operator/arithmetic/minus
unary_operator:USub</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">operator/arithmetic/modulo
modulo_operator</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">operator/arithmetic/multiplication
multiplication_operator</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">operator/arithmetic/plus
unary_operator:UAdd</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">operator/arithmetic/power
binary_operator:Pow</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">operator/arithmetic/substraction
binary_operator:Sub</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">operator/bitwise/and
binary_operator:BitAnd</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">operator/bitwise/complement unary_operator:Invert</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">operator/bitwise/or binary_operator:BitOr</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">operator/bitwise/shift/left binary_operator:LShift</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">operator/bitwise/shift/right
binary_operator:RShift</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">operator/bitwise/xor
binary_operator:BitXor</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">operator/boolean/and
boolean_operator:And</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">operator/boolean/and/short_circuit
short_circuit:And</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">operator/boolean/not
unary_operator:Not</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">operator/boolean/or boolean_operator:Or</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">operator/boolean/or/short_circuit
short_circuit:Or</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">operator/boolean/short_circuit
short_circuit</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">operator/list/concatenation concatenation_operator:List</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">operator/list/replication
replication_operator:List</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">operator/matrix/multiplication
binary_operator:MatMult</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">operator/string/concatenation
concatenation_operator:Str</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">operator/string/format
string_formatting_operator</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">operator/string/replication replication_operator:Str</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">operator/ternary
conditional_expression</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">operator/tuple/concatenation
concatenation_operator:Tuple</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">operator/tuple/replication
replication_operator:Tuple</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">pattern/elements/accumulate accumulate_all_elements/b.+</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">pattern/elements/accumulate/count
count_elements:.+</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">pattern/elements/accumulate/filtered
accumulate_some_elements/b.+</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">pattern/elements/accumulate/in_list accumulate_all_elements:append</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">pattern/elements/accumulate/in_list/extension
accumulate_all_elements:extend</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">pattern/elements/accumulate/in_list/extension/filtered
accumulate_some_elements:extend</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">pattern/elements/accumulate/in_list/filtered
accumulate_some_elements:append</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">pattern/elements/accumulate/in_set
accumulate_all_elements:add</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">pattern/elements/accumulate/in_set/filtered accumulate_some_elements:add</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">pattern/elements/accumulate/in_set/intersection accumulate_all_elements:intersection</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">pattern/elements/accumulate/in_set/intersection/filtered
accumulate_some_elements:intersection</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">pattern/elements/accumulate/in_set/union
accumulate_all_elements:union</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">pattern/elements/accumulate/in_set/union/filtered
accumulate_some_elements:union</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">pattern/elements/accumulate/in_set/update
accumulate_elements:update</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">pattern/elements/accumulate/in_set/update/filtered
accumulsome_elements:update</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">pattern/elements/accumulate/product accumulate_all_elements:Mult</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">pattern/elements/accumulate/product/filtered
accumulate_some_elements:Mult</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">pattern/elements/accumulate/substraction
accumulate_all_elements:Sub</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">pattern/elements/accumulate/substraction/filtered
accumulate_some_elements:Sub</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">pattern/elements/accumulate/summation
accumulate_all_elements:Add</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">pattern/elements/accumulate/summation/filtered
accumulate_some_elements:Add</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">pattern/elements/find/best
find_best_element:.+</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">pattern/elements/find/best/max
accumulate_all_elements:max</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">pattern/elements/find/best/max/filtered accumulate_some_elements:max</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">pattern/elements/find/best/min
accumulate_all_elements:min</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">pattern/elements/find/best/min/filtered accumulate_some_elements:min</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">pattern/elements/find/first find_first_element:.+</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">pattern/elements/satisfy/all
universal_quantification:.+</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">pattern/elements/satisfy/some
existential_quantification:.+</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">pattern/inputs/accumulate
accumulate_inputs:.+</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">pattern/inputs/accumulate/count count_inputs:.+</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">pattern/inputs/find_first_good
get_valid_input:.+</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">pattern/states/accumulate/count count_states:.+</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">subroutine/argument/\1
function_argument_flavor:(.+)</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">subroutine/argument/no
function_without_arguments:.+</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">subroutine/decorated
decorated_function:.+</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">subroutine/function function_returning_something:.+</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">subroutine/generator
generator:.+</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">subroutine/higher_order higher_order_function:.+</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">subroutine/method/flavor/class
class_method:.+</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">subroutine/method/flavor/instance
instance_method:.+</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">subroutine/method/flavor/static static_method:.+</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">subroutine/method/naming/avoid_conflict method:.+<em>(?&gt;!</em>)</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">subroutine/method/naming/internal_use
method:<em>(?!</em>).+</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">subroutine/method/naming/internal_use/name_mangling method:<strong>.+(?&lt;!</strong>)</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">subroutine/method/naming/magic
method:<strong>.+</strong></td>
<td align="left"></td>
</tr>
<tr>
<td align="left">subroutine/nested
nested_function:.+</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">subroutine/nested/closure
closure:.+</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">subroutine/predicate
function:(is</td>
<td align="left">are</td>
</tr>
<tr>
<td align="left">subroutine/procedure
function_returning_nothing:.+</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">subroutine/recursive
recursive_function:.+</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">subroutine/recursive/body
body_recursive_function:.+</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">subroutine/recursive/deep
deeply_recursive_function:.+</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">subroutine/recursive/tail
tail_recursive_function:.+</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">subroutine/test function:.+_tests?</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">subroutine/test function:test_.+</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">subscript/index index:.+</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">subscript/index/arithmetic
index_arithmetic</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">subscript/index/backwards
negative_index</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">subscript/index/backwards/last
negative_index:-1</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">subscript/index/shape/\1
nested_index</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">subscript/slice/copy
slice:::</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">subscript/slice/start
slice:.+:.<em>:.</em></td>
<td align="left"></td>
</tr>
<tr>
<td align="left">subscript/slice/step
slice:.<em>:.</em>:.+</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">subscript/slice/step/backwards
slice:.<em>:.</em>:-.+</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">subscript/slice/stop
slice:.<em>:.+:.</em></td>
<td align="left"></td>
</tr>
<tr>
<td align="left">test/belonging
comparison_operator:In</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">test/belonging/not
comparison_operator:NotIn</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">test/divisibility
divisibility_test</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">test/divisibility/parity
divisibility_test:2</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">test/equality
comparison_operator:Eq</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">test/equality/chained/\1
chained_equalities:(\d+)</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">test/equality/not
comparison_operator:NotEq</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">test/identity
comparison_operator:Is</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">test/identity/not
comparison_operator:IsNot</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">test/inequality comparison_operator:(Lt</td>
<td align="left">LtE</td>
</tr>
<tr>
<td align="left">test/inequality/chained/\1
chained_inequalities:(\d+)</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">test/yoda
yoda_comparison:(Eq</td>
<td align="left">NotEq</td>
</tr>
<tr>
<td align="left">type/boolean
external_free_call:bool</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">type/boolean/literal/false
literal:False</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">type/boolean/literal/true
literal:True</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">type/non_sequence/dictionary
external_free_call:dict</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">type/non_sequence/dictionary
member_call:(fromkeys</td>
<td align="left">get</td>
</tr>
<tr>
<td align="left">type/non_sequence/dictionary/literal
literal:Dict</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">type/non_sequence/dictionary/literal/empty
empty_literal:Dict</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">type/non_sequence/set
external_free_call:set</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">type/non_sequence/set
member_call:(add</td>
<td align="left">difference</td>
</tr>
<tr>
<td align="left">type/non_sequence/set/literal
literal:Set</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">type/null/literal
literal:None</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">type/number member_call:(as_integer_ratio</td>
<td align="left">bit_length</td>
</tr>
<tr>
<td align="left">type/number/complex external_free_call:complex</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">type/number/complex/literal literal:.*j</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">type/number/complex/literal/zero
literal:0j</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">type/number/floating_point
external_free_call:float</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">type/number/floating_point/literal
literal:[\d-]<em>?[e.][\d-]</em>?(?&lt;!j)</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">type/number/floating_point/literal/zero literal:0.0</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">type/number/integer external_free_call:int</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">type/number/integer/literal literal:-?\d+</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">type/number/integer/literal/zero
literal:0</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">type/sequence
member_call:(count</td>
<td align="left">index)</td>
</tr>
<tr>
<td align="left">type/sequence/list
external_free_call:list</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">type/sequence/list
member_call:(append</td>
<td align="left">extend</td>
</tr>
<tr>
<td align="left">type/sequence/list/literal
literal:List</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">type/sequence/list/literal/empty
empty_literal:List</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">type/sequence/string
external_free_call:str</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">type/sequence/string
member_call:(capitalize</td>
<td align="left">casefold</td>
</tr>
<tr>
<td align="left">type/sequence/string/literal
literal:Str</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">type/sequence/string/literal/empty
empty_literal:Str</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">type/sequence/string/literal/formatted
f_string</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">type/sequence/tuple external_free_call:tuple</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">type/sequence/tuple/literal literal:Tuple</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">type/sequence/tuple/literal/empty
empty_literal:Tuple</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">variable/assignment assignment\b.*</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">variable/assignment/augmented/\1
augmented_assignment:(.+)</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">variable/assignment/augmented/subscript/\1
subscript_augmented_assignment:(.+)</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">variable/assignment/chained chained_assignment</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">variable/assignment/conditional/compact compact_conditional_assignment</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">variable/assignment/conditional/corrective
corrective_conditional_assignment</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">variable/assignment/conditional/verbose verbose_conditional_assignment</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">variable/assignment/constant
assignment_lhs_identifier:[[:upper:]0-9_]+</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">variable/assignment/negate
negate</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">variable/assignment/parallel
parallel_assignment:\d+</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">variable/assignment/parallel/more_than_two
parallel_assignment:(?!2$)\d+</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">variable/assignment/parallel/slide
slide</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">variable/assignment/parallel/swap
swap</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">variable/assignment/single
single_assignment:.+</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">variable/unbinding
unbinding:.+</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">&ndash; EOF
EOF</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">io/standard/print/multiple
TODO</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">io/standard/print/newline
TODO</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">io/standard/print/without_newline
TODO</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">pattern/elements/accumulate/find_best/index TODO</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">pattern/states/accumulate
TODO</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">pattern/states/accumulate/find_best TODO</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">style/functional
TODO</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">style/object
TODO</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">style/one_liner TODO</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">style/procedural
TODO</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">style/for
TODO</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">style/test_driven
TODO</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">subscript/index/double
TODO</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">type/string/newline TODO</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">variable/assignment/argument
TODO</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">variable/assignment/iteration_variable
TODO</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">variable/assignment/iteration_variable/tuple
TODO</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">variable/assignment/parallel/subscript
TODO</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">variable/assignment/single/subscript
TODO</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">variable/scope/global
TODO</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">variable/scope/local
TODO</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">variable/scope/local/argument
TODO</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">variable/scope/outer
TODO</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">variable/scope/shadowing
TODO</td>
<td align="left"></td>
</tr>
</tbody>
</table>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/laowantong/paroxython/blob/master/paroxython/resources/__init__.py#L0-L7" class="git-link">Browse git</a>
</summary>
<pre><code class="python">&#34;&#34;&#34;
# Specifications
.. include:: spec.md


# Default taxonomy
.. include:: taxonomy.tsv
&#34;&#34;&#34;</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
</article>
<nav id="sidebar">
<header>
<a class="homelink" rel="home" title="Paroxython Home" href="index.html">
<img src="logo.png" alt="Paroxython logo">
</a>
</header>
<div class="gcse-search" style="height: 70px"
data-as_oq="site:paroxython.github.io inurl:github.com/paroxython"
data-gaCategoryParameter="paroxython.resources">
</div>
<h1>Index</h1>
<div class="toc">
<ul>
<li><a href="#specifications">Specifications</a></li>
<li><a href="#expressions">Expressions</a><ul>
<li><a href="#literals">Literals</a><ul>
<li><a href="#feature-literal">Feature literal</a><ul>
<li><a href="#derivations">Derivations</a></li>
<li><a href="#specification">Specification</a></li>
<li><a href="#example">Example</a></li>
<li><a href="#matches">Matches</a></li>
</ul>
</li>
<li><a href="#feature-empty_literal">Feature empty_literal</a><ul>
<li><a href="#specification_1">Specification</a></li>
<li><a href="#example_1">Example</a></li>
<li><a href="#matches_1">Matches</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#subscripts">Subscripts</a><ul>
<li><a href="#feature-index">Feature index</a><ul>
<li><a href="#derivations_1">Derivations</a></li>
<li><a href="#specification_2">Specification</a></li>
<li><a href="#example_2">Example</a></li>
<li><a href="#matches_2">Matches</a></li>
</ul>
</li>
<li><a href="#feature-nested_index">Feature nested_index</a><ul>
<li><a href="#derivations_2">Derivations</a></li>
<li><a href="#specification_3">Specification</a></li>
<li><a href="#example_3">Example</a></li>
<li><a href="#matches_3">Matches</a></li>
</ul>
</li>
<li><a href="#feature-index_arithmetic">Feature index_arithmetic</a><ul>
<li><a href="#specification_4">Specification</a></li>
<li><a href="#example_4">Example</a></li>
<li><a href="#matches_4">Matches</a></li>
</ul>
</li>
<li><a href="#feature-negative_index">Feature negative_index</a><ul>
<li><a href="#specification_5">Specification</a></li>
<li><a href="#example_5">Example</a></li>
<li><a href="#matches_5">Matches</a></li>
</ul>
</li>
<li><a href="#feature-slice_lower">Feature slice_lower</a><ul>
<li><a href="#derivations_3">Derivations</a></li>
<li><a href="#specification_6">Specification</a></li>
<li><a href="#example_6">Example</a></li>
<li><a href="#matches_6">Matches</a></li>
</ul>
</li>
<li><a href="#feature-slice_upper">Feature slice_upper</a><ul>
<li><a href="#derivations_4">Derivations</a></li>
<li><a href="#specification_7">Specification</a></li>
<li><a href="#example_7">Example</a></li>
<li><a href="#matches_7">Matches</a></li>
</ul>
</li>
<li><a href="#feature-slice_step">Feature slice_step</a><ul>
<li><a href="#derivations_5">Derivations</a></li>
<li><a href="#specification_8">Specification</a></li>
<li><a href="#example_8">Example</a></li>
<li><a href="#matches_8">Matches</a></li>
</ul>
</li>
<li><a href="#feature-slice">Feature slice</a><ul>
<li><a href="#derivations_6">Derivations</a></li>
<li><a href="#specification_9">Specification</a></li>
<li><a href="#example_9">Example</a></li>
<li><a href="#matches_9">Matches</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#operators">Operators</a><ul>
<li><a href="#feature-unary_operator">Feature unary_operator</a><ul>
<li><a href="#specification_10">Specification</a></li>
<li><a href="#example_10">Example</a></li>
<li><a href="#matches_10">Matches</a></li>
</ul>
</li>
<li><a href="#feature-binary_operator">Feature binary_operator</a><ul>
<li><a href="#derivations_7">Derivations</a></li>
<li><a href="#specification_11">Specification</a></li>
<li><a href="#example_11">Example</a></li>
<li><a href="#matches_11">Matches</a></li>
</ul>
</li>
<li><a href="#feature-conditional_expression">Feature conditional_expression</a><ul>
<li><a href="#specification_12">Specification</a></li>
<li><a href="#example_12">Example</a></li>
<li><a href="#matches_12">Matches</a></li>
</ul>
</li>
<li><a href="#feature-concatenation_operatorreplication_operator">Feature concatenation_operator|replication_operator</a><ul>
<li><a href="#derivations_8">Derivations</a></li>
<li><a href="#specification_13">Specification</a></li>
<li><a href="#example_13">Example</a></li>
<li><a href="#matches_13">Matches</a></li>
</ul>
</li>
<li><a href="#feature-string_formatting_operator">Feature string_formatting_operator</a><ul>
<li><a href="#derivations_9">Derivations</a></li>
<li><a href="#specification_14">Specification</a></li>
<li><a href="#example_14">Example</a></li>
<li><a href="#matches_14">Matches</a></li>
</ul>
</li>
<li><a href="#feature-addition_operator">Feature addition_operator</a><ul>
<li><a href="#derivations_10">Derivations</a></li>
<li><a href="#specification_15">Specification</a></li>
<li><a href="#example_15">Example</a></li>
<li><a href="#matches_15">Matches</a></li>
</ul>
</li>
<li><a href="#feature-multiplication_operator">Feature multiplication_operator</a><ul>
<li><a href="#derivations_11">Derivations</a></li>
<li><a href="#specification_16">Specification</a></li>
<li><a href="#example_16">Example</a></li>
<li><a href="#matches_16">Matches</a></li>
</ul>
</li>
<li><a href="#feature-modulo_operator">Feature modulo_operator</a><ul>
<li><a href="#derivations_12">Derivations</a></li>
<li><a href="#specification_17">Specification</a></li>
<li><a href="#example_17">Example</a></li>
<li><a href="#matches_17">Matches</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#boolean-expressions">Boolean expressions</a><ul>
<li><a href="#feature-boolean_operator">Feature boolean_operator</a><ul>
<li><a href="#specification_18">Specification</a></li>
<li><a href="#example_18">Example</a></li>
<li><a href="#matches_18">Matches</a></li>
</ul>
</li>
<li><a href="#feature-comparison_operator">Feature comparison_operator</a><ul>
<li><a href="#derivations_13">Derivations</a></li>
<li><a href="#specification_19">Specification</a></li>
<li><a href="#example_19">Example</a></li>
<li><a href="#matches_19">Matches</a></li>
</ul>
</li>
<li><a href="#feature-yoda_comparison">Feature yoda_comparison</a><ul>
<li><a href="#derivations_14">Derivations</a></li>
<li><a href="#specification_20">Specification</a></li>
<li><a href="#example_20">Example</a></li>
<li><a href="#matches_20">Matches</a></li>
</ul>
</li>
<li><a href="#feature-chained_comparison">Feature chained_comparison</a><ul>
<li><a href="#derivations_15">Derivations</a></li>
<li><a href="#specification_21">Specification</a></li>
<li><a href="#example_21">Example</a></li>
<li><a href="#matches_21">Matches</a></li>
</ul>
</li>
<li><a href="#feature-chained_equalitieschained_inequalities">Feature chained_equalities|chained_inequalities</a><ul>
<li><a href="#derivations_16">Derivations</a></li>
<li><a href="#specification_22">Specification</a></li>
<li><a href="#example_22">Example</a></li>
<li><a href="#matches_22">Matches</a></li>
</ul>
</li>
<li><a href="#feature-divisibility_test">Feature divisibility_test</a><ul>
<li><a href="#specification_23">Specification</a></li>
<li><a href="#example_23">Example</a></li>
<li><a href="#matches_23">Matches</a></li>
</ul>
</li>
<li><a href="#feature-short_circuit">Feature short_circuit</a><ul>
<li><a href="#specification_24">Specification</a></li>
<li><a href="#example_24">Example</a></li>
<li><a href="#matches_24">Matches</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#calls">Calls</a><ul>
<li><a href="#generalities">Generalities</a><ul>
<li><a href="#feature-call_argument">Feature call_argument</a><ul>
<li><a href="#derivations_17">Derivations</a></li>
<li><a href="#specification_25">Specification</a></li>
<li><a href="#example_25">Example</a></li>
<li><a href="#matches_25">Matches</a></li>
</ul>
</li>
<li><a href="#feature-composition">Feature composition</a><ul>
<li><a href="#specification_26">Specification</a></li>
<li><a href="#example_26">Example</a></li>
<li><a href="#matches_26">Matches</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#calls-of-the-form-callablearguments">Calls of the form callable(arguments)</a><ul>
<li><a href="#feature-free_call">Feature free_call</a><ul>
<li><a href="#derivations_18">Derivations</a></li>
<li><a href="#specification_27">Specification</a></li>
<li><a href="#example_27">Example</a></li>
<li><a href="#matches_27">Matches</a></li>
</ul>
</li>
<li><a href="#feature-free_call_without_result">Feature free_call_without_result</a><ul>
<li><a href="#specification_28">Specification</a></li>
<li><a href="#example_28">Example</a></li>
<li><a href="#matches_28">Matches</a></li>
</ul>
</li>
<li><a href="#feature-free_call_without_arguments">Feature free_call_without_arguments</a><ul>
<li><a href="#specification_29">Specification</a></li>
<li><a href="#example_29">Example</a></li>
<li><a href="#matches_29">Matches</a></li>
</ul>
</li>
<li><a href="#feature-free_tail_call">Feature free_tail_call</a><ul>
<li><a href="#derivations_19">Derivations</a></li>
<li><a href="#specification_30">Specification</a></li>
<li><a href="#example_30">Example</a></li>
<li><a href="#matches_30">Matches</a></li>
</ul>
</li>
<li><a href="#feature-internal_free_call">Feature internal_free_call</a><ul>
<li><a href="#derivations_20">Derivations</a></li>
<li><a href="#specification_31">Specification</a></li>
<li><a href="#example_31">Example</a></li>
<li><a href="#matches_31">Matches</a></li>
</ul>
</li>
<li><a href="#feature-external_free_call">Feature external_free_call</a><ul>
<li><a href="#derivations_21">Derivations</a></li>
<li><a href="#specification_32">Specification</a></li>
<li><a href="#example_32">Example</a></li>
<li><a href="#matches_32">Matches</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#calls-of-the-form-identifiercallablearguments">Calls of the form identifier.callable(arguments)</a><ul>
<li><a href="#feature-member_call">Feature member_call</a><ul>
<li><a href="#derivations_22">Derivations</a></li>
<li><a href="#specification_33">Specification</a></li>
<li><a href="#example_33">Example</a></li>
<li><a href="#matches_33">Matches</a></li>
</ul>
</li>
<li><a href="#feature-member_call_without_result">Feature member_call_without_result</a><ul>
<li><a href="#specification_34">Specification</a></li>
<li><a href="#example_34">Example</a></li>
<li><a href="#matches_34">Matches</a></li>
</ul>
</li>
<li><a href="#feature-member_call_object">Feature member_call_object</a><ul>
<li><a href="#derivations_23">Derivations</a></li>
<li><a href="#specification_35">Specification</a></li>
<li><a href="#example_35">Example</a></li>
<li><a href="#matches_35">Matches</a></li>
</ul>
</li>
<li><a href="#feature-method_chaining">Feature method_chaining</a><ul>
<li><a href="#specification_36">Specification</a></li>
<li><a href="#example_36">Example</a></li>
<li><a href="#matches_36">Matches</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#iterables">Iterables</a><ul>
<li><a href="#feature-range">Feature range</a><ul>
<li><a href="#derivations_24">Derivations</a></li>
<li><a href="#specification_37">Specification</a></li>
<li><a href="#example_37">Example</a></li>
<li><a href="#matches_37">Matches</a></li>
</ul>
</li>
<li><a href="#feature-comprehension">Feature comprehension</a><ul>
<li><a href="#specification_38">Specification</a></li>
<li><a href="#example_38">Example</a></li>
<li><a href="#matches_38">Matches</a></li>
</ul>
</li>
<li><a href="#feature-comprehension_for_count">Feature comprehension_for_count</a><ul>
<li><a href="#specification_39">Specification</a></li>
<li><a href="#example_39">Example</a></li>
<li><a href="#matches_39">Matches</a></li>
</ul>
</li>
<li><a href="#feature-filtered_comprehension">Feature filtered_comprehension</a><ul>
<li><a href="#specification_40">Specification</a></li>
<li><a href="#example_40">Example</a></li>
<li><a href="#matches_40">Matches</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#various">Various</a><ul>
<li><a href="#feature-lambda_function">Feature lambda_function</a><ul>
<li><a href="#specification_41">Specification</a></li>
<li><a href="#example_41">Example</a></li>
<li><a href="#matches_41">Matches</a></li>
</ul>
</li>
<li><a href="#feature-f_string">Feature f_string</a><ul>
<li><a href="#specification_42">Specification</a></li>
<li><a href="#example_42">Example</a></li>
<li><a href="#matches_42">Matches</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#statements">Statements</a><ul>
<li><a href="#bindings">Bindings</a><ul>
<li><a href="#feature-assignment">Feature assignment</a><ul>
<li><a href="#derivations_25">Derivations</a></li>
<li><a href="#specification_43">Specification</a></li>
<li><a href="#example_43">Example</a></li>
<li><a href="#matches_43">Matches</a></li>
</ul>
</li>
<li><a href="#feature-unbinding">Feature unbinding</a><ul>
<li><a href="#specification_44">Specification</a></li>
<li><a href="#example_44">Example</a></li>
<li><a href="#matches_44">Matches</a></li>
</ul>
</li>
<li><a href="#feature-single_assignment">Feature single_assignment</a><ul>
<li><a href="#derivations_26">Derivations</a></li>
<li><a href="#specification_45">Specification</a></li>
<li><a href="#example_45">Example</a></li>
<li><a href="#matches_45">Matches</a></li>
</ul>
</li>
<li><a href="#feature-parallel_assignment">Feature parallel_assignment</a><ul>
<li><a href="#specification_46">Specification</a></li>
<li><a href="#example_46">Example</a></li>
<li><a href="#matches_46">Matches</a></li>
</ul>
</li>
<li><a href="#feature-augmented_assignment">Feature augmented_assignment</a><ul>
<li><a href="#derivations_27">Derivations</a></li>
<li><a href="#specification_47">Specification</a></li>
<li><a href="#example_47">Example</a></li>
<li><a href="#matches_47">Matches</a></li>
</ul>
</li>
<li><a href="#feature-subscript_augmented_assignment">Feature subscript_augmented_assignment</a><ul>
<li><a href="#specification_48">Specification</a></li>
<li><a href="#example_48">Example</a></li>
<li><a href="#matches_48">Matches</a></li>
</ul>
</li>
<li><a href="#feature-chained_assignment">Feature chained_assignment</a><ul>
<li><a href="#specification_49">Specification</a></li>
<li><a href="#example_49">Example</a></li>
<li><a href="#matches_49">Matches</a></li>
</ul>
</li>
<li><a href="#feature-assignment_lhs_identifier">Feature assignment_lhs_identifier</a><ul>
<li><a href="#derivations_28">Derivations</a></li>
<li><a href="#specification_50">Specification</a></li>
<li><a href="#example_50">Example</a></li>
<li><a href="#matches_50">Matches</a></li>
</ul>
</li>
<li><a href="#feature-assignment_rhs_atom">Feature assignment_rhs_atom</a><ul>
<li><a href="#derivations_29">Derivations</a></li>
<li><a href="#specification_51">Specification</a></li>
<li><a href="#example_51">Example</a></li>
<li><a href="#matches_51">Matches</a></li>
</ul>
</li>
<li><a href="#assignment-idioms">Assignment idioms</a><ul>
<li><a href="#feature-update_by_assignment">Feature update_by_assignment</a><ul>
<li><a href="#derivations_30">Derivations</a></li>
<li><a href="#specification_52">Specification</a></li>
<li><a href="#example_52">Example</a></li>
<li><a href="#matches_52">Matches</a></li>
</ul>
</li>
<li><a href="#feature-update_by_augmented_assignment">Feature update_by_augmented_assignment</a><ul>
<li><a href="#derivations_31">Derivations</a></li>
<li><a href="#specification_53">Specification</a></li>
<li><a href="#example_53">Example</a></li>
<li><a href="#matches_53">Matches</a></li>
</ul>
</li>
<li><a href="#feature-update_by_member_call">Feature update_by_member_call</a><ul>
<li><a href="#derivations_32">Derivations</a></li>
<li><a href="#specification_54">Specification</a></li>
<li><a href="#example_54">Example</a></li>
<li><a href="#matches_54">Matches</a></li>
</ul>
</li>
<li><a href="#feature-update">Feature update</a><ul>
<li><a href="#derivations_33">Derivations</a></li>
<li><a href="#specification_55">Specification</a></li>
<li><a href="#example_55">Example</a></li>
<li><a href="#matches_55">Matches</a></li>
</ul>
</li>
<li><a href="#feature-update_by_assignment_with">Feature update_by_assignment_with</a><ul>
<li><a href="#derivations_34">Derivations</a></li>
<li><a href="#specification_56">Specification</a></li>
<li><a href="#example_56">Example</a></li>
<li><a href="#matches_56">Matches</a></li>
</ul>
</li>
<li><a href="#feature-update_by_augmented_assignment_with">Feature update_by_augmented_assignment_with</a><ul>
<li><a href="#derivations_35">Derivations</a></li>
<li><a href="#specification_57">Specification</a></li>
<li><a href="#example_57">Example</a></li>
<li><a href="#matches_57">Matches</a></li>
</ul>
</li>
<li><a href="#feature-update_by_member_call_with">Feature update_by_member_call_with</a><ul>
<li><a href="#derivations_36">Derivations</a></li>
<li><a href="#specification_58">Specification</a></li>
<li><a href="#example_58">Example</a></li>
<li><a href="#matches_58">Matches</a></li>
</ul>
</li>
<li><a href="#feature-update_with">Feature update_with</a><ul>
<li><a href="#derivations_37">Derivations</a></li>
<li><a href="#specification_59">Specification</a></li>
<li><a href="#example_59">Example</a></li>
<li><a href="#matches_59">Matches</a></li>
</ul>
</li>
<li><a href="#feature-increment">Feature increment</a><ul>
<li><a href="#derivations_38">Derivations</a></li>
<li><a href="#specification_60">Specification</a></li>
<li><a href="#example_60">Example</a></li>
<li><a href="#matches_60">Matches</a></li>
</ul>
</li>
<li><a href="#feature-swap">Feature swap</a><ul>
<li><a href="#specification_61">Specification</a></li>
<li><a href="#example_61">Example</a></li>
<li><a href="#matches_61">Matches</a></li>
</ul>
</li>
<li><a href="#feature-slide">Feature slide</a><ul>
<li><a href="#specification_62">Specification</a></li>
<li><a href="#example_62">Example</a></li>
<li><a href="#matches_62">Matches</a></li>
</ul>
</li>
<li><a href="#feature-negate">Feature negate</a><ul>
<li><a href="#specification_63">Specification</a></li>
<li><a href="#example_63">Example</a></li>
<li><a href="#matches_63">Matches</a></li>
</ul>
</li>
<li><a href="#feature-verbose_conditional_assignment">Feature verbose_conditional_assignment</a><ul>
<li><a href="#specification_64">Specification</a></li>
<li><a href="#example_64">Example</a></li>
<li><a href="#matches_64">Matches</a></li>
</ul>
</li>
<li><a href="#feature-compact_conditional_assignment">Feature compact_conditional_assignment</a><ul>
<li><a href="#specification_65">Specification</a></li>
<li><a href="#example_65">Example</a></li>
<li><a href="#matches_65">Matches</a></li>
</ul>
</li>
<li><a href="#feature-corrective_conditional_assignment">Feature corrective_conditional_assignment</a><ul>
<li><a href="#specification_66">Specification</a></li>
<li><a href="#example_66">Example</a></li>
<li><a href="#matches_66">Matches</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#function-definitions">Function definitions</a><ul>
<li><a href="#interface">Interface</a><ul>
<li><a href="#feature-function">Feature function</a><ul>
<li><a href="#derivations_39">Derivations</a></li>
<li><a href="#specification_67">Specification</a></li>
<li><a href="#example_67">Example</a></li>
<li><a href="#matches_67">Matches</a></li>
</ul>
</li>
<li><a href="#feature-return">Feature return</a><ul>
<li><a href="#derivations_40">Derivations</a></li>
<li><a href="#specification_68">Specification</a></li>
<li><a href="#example_68">Example</a></li>
<li><a href="#matches_68">Matches</a></li>
</ul>
</li>
<li><a href="#feature-yield">Feature yield</a><ul>
<li><a href="#derivations_41">Derivations</a></li>
<li><a href="#specification_69">Specification</a></li>
<li><a href="#example_69">Example</a></li>
<li><a href="#matches_69">Matches</a></li>
</ul>
</li>
<li><a href="#feature-generator">Feature generator</a><ul>
<li><a href="#derivations_42">Derivations</a></li>
<li><a href="#specification_70">Specification</a></li>
<li><a href="#example_70">Example</a></li>
<li><a href="#matches_70">Matches</a></li>
</ul>
</li>
<li><a href="#feature-function_returning_something">Feature function_returning_something</a><ul>
<li><a href="#derivations_43">Derivations</a></li>
<li><a href="#specification_71">Specification</a></li>
<li><a href="#example_71">Example</a></li>
<li><a href="#matches_71">Matches</a></li>
</ul>
</li>
<li><a href="#feature-function_returning_nothing">Feature function_returning_nothing</a><ul>
<li><a href="#derivations_44">Derivations</a></li>
<li><a href="#specification_72">Specification</a></li>
<li><a href="#example_72">Example</a></li>
<li><a href="#matches_72">Matches</a></li>
</ul>
</li>
<li><a href="#feature-function_argument">Feature function_argument</a><ul>
<li><a href="#derivations_45">Derivations</a></li>
<li><a href="#specification_73">Specification</a></li>
<li><a href="#example_73">Example</a></li>
<li><a href="#matches_73">Matches</a></li>
</ul>
</li>
<li><a href="#feature-function_argument_flavor">Feature function_argument_flavor</a><ul>
<li><a href="#specification_74">Specification</a></li>
<li><a href="#example_74">Example</a></li>
<li><a href="#matches_74">Matches</a></li>
</ul>
</li>
<li><a href="#feature-function_without_arguments">Feature function_without_arguments</a><ul>
<li><a href="#specification_75">Specification</a></li>
<li><a href="#example_75">Example</a></li>
<li><a href="#matches_75">Matches</a></li>
</ul>
</li>
<li><a href="#feature-decorated_function">Feature decorated_function</a><ul>
<li><a href="#specification_76">Specification</a></li>
<li><a href="#example_76">Example</a></li>
<li><a href="#matches_76">Matches</a></li>
</ul>
</li>
<li><a href="#feature-function_decorator">Feature function_decorator</a><ul>
<li><a href="#specification_77">Specification</a></li>
<li><a href="#example_77">Example</a></li>
<li><a href="#matches_77">Matches</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#nesting">Nesting</a><ul>
<li><a href="#feature-nested_function">Feature nested_function</a><ul>
<li><a href="#specification_78">Specification</a></li>
<li><a href="#example_78">Example</a></li>
<li><a href="#matches_78">Matches</a></li>
</ul>
</li>
<li><a href="#feature-closure">Feature closure</a><ul>
<li><a href="#derivations_46">Derivations</a></li>
<li><a href="#specification_79">Specification</a></li>
<li><a href="#example_79">Example</a></li>
<li><a href="#matches_79">Matches</a></li>
</ul>
</li>
<li><a href="#feature-higher-order-function">Feature higher-order function</a><ul>
<li><a href="#derivations_47">Derivations</a></li>
<li><a href="#specification_80">Specification</a></li>
<li><a href="#example_80">Example</a></li>
<li><a href="#matches_80">Matches</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#recursion">Recursion</a><ul>
<li><a href="#feature-recursive_function">Feature recursive_function</a><ul>
<li><a href="#derivations_48">Derivations</a></li>
<li><a href="#specification_81">Specification</a></li>
<li><a href="#example_81">Example</a></li>
<li><a href="#matches_81">Matches</a></li>
</ul>
</li>
<li><a href="#feature-deeply_recursive_function">Feature deeply_recursive_function</a><ul>
<li><a href="#derivations_49">Derivations</a></li>
<li><a href="#specification_82">Specification</a></li>
<li><a href="#example_82">Example</a></li>
<li><a href="#matches_82">Matches</a></li>
</ul>
</li>
<li><a href="#feature-body_recursive_function">Feature body_recursive_function</a><ul>
<li><a href="#derivations_50">Derivations</a></li>
<li><a href="#specification_83">Specification</a></li>
<li><a href="#example_83">Example</a></li>
<li><a href="#matches_83">Matches</a></li>
</ul>
</li>
<li><a href="#feature-tail_recursive_function">Feature tail_recursive_function</a><ul>
<li><a href="#derivations_51">Derivations</a></li>
<li><a href="#specification_84">Specification</a></li>
<li><a href="#example_84">Example</a></li>
<li><a href="#matches_84">Matches</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#conditionals">Conditionals</a><ul>
<li><a href="#feature-if">Feature if</a><ul>
<li><a href="#derivations_52">Derivations</a></li>
<li><a href="#specification_85">Specification</a></li>
<li><a href="#example_85">Example</a></li>
<li><a href="#matches_85">Matches</a></li>
</ul>
</li>
<li><a href="#feature-if_test_atom">Feature if_test_atom</a><ul>
<li><a href="#derivations_53">Derivations</a></li>
<li><a href="#specification_86">Specification</a></li>
<li><a href="#example_86">Example</a></li>
<li><a href="#matches_86">Matches</a></li>
</ul>
</li>
<li><a href="#feature-if_then_branch">Feature if_then_branch</a><ul>
<li><a href="#derivations_54">Derivations</a></li>
<li><a href="#specification_87">Specification</a></li>
<li><a href="#example_87">Example</a></li>
<li><a href="#matches_87">Matches</a></li>
</ul>
</li>
<li><a href="#feature-if_elif_branch">Feature if_elif_branch</a><ul>
<li><a href="#derivations_55">Derivations</a></li>
<li><a href="#specification_88">Specification</a></li>
<li><a href="#example_88">Example</a></li>
<li><a href="#matches_88">Matches</a></li>
</ul>
</li>
<li><a href="#feature-if_else_branch">Feature if_else_branch</a><ul>
<li><a href="#derivations_56">Derivations</a></li>
<li><a href="#specification_89">Specification</a></li>
<li><a href="#example_89">Example</a></li>
<li><a href="#matches_89">Matches</a></li>
</ul>
</li>
<li><a href="#feature-if_without_else">Feature if_without_else</a><ul>
<li><a href="#derivations_57">Derivations</a></li>
<li><a href="#specification_90">Specification</a></li>
<li><a href="#example_90">Example</a></li>
<li><a href="#matches_90">Matches</a></li>
</ul>
</li>
<li><a href="#feature-if_guard">Feature if_guard</a><ul>
<li><a href="#derivations_58">Derivations</a></li>
<li><a href="#specification_91">Specification</a></li>
<li><a href="#example_91">Example</a></li>
<li><a href="#matches_91">Matches</a></li>
</ul>
</li>
<li><a href="#feature-nested_if">Feature nested_if</a><ul>
<li><a href="#derivations_59">Derivations</a></li>
<li><a href="#specification_92">Specification</a></li>
<li><a href="#example_92">Example</a></li>
<li><a href="#matches_92">Matches</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#iterations">Iterations</a><ul>
<li><a href="#iteration-keywords">Iteration keywords</a><ul>
<li><a href="#feature-for">Feature for</a><ul>
<li><a href="#derivations_60">Derivations</a></li>
<li><a href="#specification_93">Specification</a></li>
<li><a href="#example_93">Example</a></li>
<li><a href="#matches_93">Matches</a></li>
</ul>
</li>
<li><a href="#feature-while">Feature while</a><ul>
<li><a href="#derivations_61">Derivations</a></li>
<li><a href="#specification_94">Specification</a></li>
<li><a href="#example_94">Example</a></li>
<li><a href="#matches_94">Matches</a></li>
</ul>
</li>
<li><a href="#feature-loop">Feature loop</a><ul>
<li><a href="#derivations_62">Derivations</a></li>
<li><a href="#specification_95">Specification</a></li>
<li><a href="#example_95">Example</a></li>
<li><a href="#matches_95">Matches</a></li>
</ul>
</li>
<li><a href="#feature-break">Feature break</a><ul>
<li><a href="#derivations_63">Derivations</a></li>
<li><a href="#specification_96">Specification</a></li>
<li><a href="#example_96">Example</a></li>
<li><a href="#matches_96">Matches</a></li>
</ul>
</li>
<li><a href="#feature-loop_else">Feature loop_else</a><ul>
<li><a href="#derivations_64">Derivations</a></li>
<li><a href="#specification_97">Specification</a></li>
<li><a href="#example_97">Example</a></li>
<li><a href="#matches_97">Matches</a></li>
</ul>
</li>
<li><a href="#feature-continue">Feature continue</a><ul>
<li><a href="#specification_98">Specification</a></li>
<li><a href="#example_98">Example</a></li>
<li><a href="#matches_98">Matches</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#sequential-loops">Sequential loops</a><ul>
<li><a href="#feature-for_each">Feature for_each</a><ul>
<li><a href="#specification_99">Specification</a></li>
<li><a href="#example_99">Example</a></li>
<li><a href="#matches_99">Matches</a></li>
</ul>
</li>
<li><a href="#feature-for_range">Feature for_range</a><ul>
<li><a href="#derivations_65">Derivations</a></li>
<li><a href="#specification_100">Specification</a></li>
<li><a href="#example_100">Example</a></li>
<li><a href="#matches_100">Matches</a></li>
</ul>
</li>
<li><a href="#feature-for_indexes_elements">Feature for_indexes_elements</a><ul>
<li><a href="#specification_101">Specification</a></li>
<li><a href="#example_101">Example</a></li>
<li><a href="#matches_101">Matches</a></li>
</ul>
</li>
<li><a href="#feature-for_indexes">Feature for_indexes</a><ul>
<li><a href="#specification_102">Specification</a></li>
<li><a href="#example_102">Example</a></li>
<li><a href="#matches_102">Matches</a></li>
</ul>
</li>
<li><a href="#feature-nested_for">Feature nested_for</a><ul>
<li><a href="#derivations_66">Derivations</a></li>
<li><a href="#specification_103">Specification</a></li>
<li><a href="#example_103">Example</a></li>
<li><a href="#matches_103">Matches</a></li>
</ul>
</li>
<li><a href="#feature-triangular_nested_for">Feature triangular_nested_for</a><ul>
<li><a href="#specification_104">Specification</a></li>
<li><a href="#example_104">Example</a></li>
<li><a href="#matches_104">Matches</a></li>
</ul>
</li>
<li><a href="#feature-square_nested_for">Feature square_nested_for</a><ul>
<li><a href="#specification_105">Specification</a></li>
<li><a href="#example_105">Example</a></li>
<li><a href="#matches_105">Matches</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#non-sequential-loops">Non-sequential loops</a><ul>
<li><a href="#feature-infinite_while">Feature infinite_while</a><ul>
<li><a href="#derivations_67">Derivations</a></li>
<li><a href="#specification_106">Specification</a></li>
<li><a href="#example_106">Example</a></li>
<li><a href="#matches_106">Matches</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#loop-exit">Loop exit</a><ul>
<li><a href="#feature-loop_with_raise">Feature loop_with_raise</a><ul>
<li><a href="#derivations_68">Derivations</a></li>
<li><a href="#specification_107">Specification</a></li>
<li><a href="#example_107">Example</a></li>
<li><a href="#matches_107">Matches</a></li>
</ul>
</li>
<li><a href="#feature-loop_with_return">Feature loop_with_return</a><ul>
<li><a href="#derivations_69">Derivations</a></li>
<li><a href="#specification_108">Specification</a></li>
<li><a href="#example_108">Example</a></li>
<li><a href="#matches_108">Matches</a></li>
</ul>
</li>
<li><a href="#feature-loop_with_break">Feature loop_with_break</a><ul>
<li><a href="#derivations_70">Derivations</a></li>
<li><a href="#specification_109">Specification</a></li>
<li><a href="#example_109">Example</a></li>
<li><a href="#matches_109">Matches</a></li>
</ul>
</li>
<li><a href="#feature-loop_with_early_exit">Feature loop_with_early_exit</a><ul>
<li><a href="#derivations_71">Derivations</a></li>
<li><a href="#specification_110">Specification</a></li>
<li><a href="#example_110">Example</a></li>
<li><a href="#matches_110">Matches</a></li>
</ul>
</li>
<li><a href="#feature-loop_with_else">Feature loop_with_else</a><ul>
<li><a href="#derivations_72">Derivations</a></li>
<li><a href="#specification_111">Specification</a></li>
<li><a href="#example_111">Example</a></li>
<li><a href="#matches_111">Matches</a></li>
</ul>
</li>
<li><a href="#feature-loop_with_late_exit">Feature loop_with_late_exit</a><ul>
<li><a href="#derivations_73">Derivations</a></li>
<li><a href="#specification_112">Specification</a></li>
<li><a href="#example_112">Example</a></li>
<li><a href="#matches_112">Matches</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#various-statements">Various statements</a><ul>
<li><a href="#feature-assertion">Feature assertion</a><ul>
<li><a href="#specification_113">Specification</a></li>
<li><a href="#example_113">Example</a></li>
<li><a href="#matches_113">Matches</a></li>
</ul>
</li>
<li><a href="#feature-null_operation">Feature null_operation</a><ul>
<li><a href="#specification_114">Specification</a></li>
<li><a href="#example_114">Example</a></li>
<li><a href="#matches_114">Matches</a></li>
</ul>
</li>
<li><a href="#exceptions">Exceptions</a><ul>
<li><a href="#feature-try">Feature try</a><ul>
<li><a href="#derivations_74">Derivations</a></li>
<li><a href="#specification_115">Specification</a></li>
<li><a href="#example_115">Example</a></li>
<li><a href="#matches_115">Matches</a></li>
</ul>
</li>
<li><a href="#feature-raise">Feature raise</a><ul>
<li><a href="#derivations_75">Derivations</a></li>
<li><a href="#specification_116">Specification</a></li>
<li><a href="#example_116">Example</a></li>
<li><a href="#matches_116">Matches</a></li>
</ul>
</li>
<li><a href="#feature-except">Feature except</a><ul>
<li><a href="#derivations_76">Derivations</a></li>
<li><a href="#specification_117">Specification</a></li>
<li><a href="#example_117">Example</a></li>
<li><a href="#matches_117">Matches</a></li>
</ul>
</li>
<li><a href="#feature-try_raisetry_except">Feature try_raise|try_except</a><ul>
<li><a href="#derivations_77">Derivations</a></li>
<li><a href="#specification_118">Specification</a></li>
<li><a href="#example_118">Example</a></li>
<li><a href="#matches_118">Matches</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#class-definitions">Class definitions</a><ul>
<li><a href="#feature-class">Feature class</a><ul>
<li><a href="#derivations_78">Derivations</a></li>
<li><a href="#specification_119">Specification</a></li>
<li><a href="#example_119">Example</a></li>
<li><a href="#matches_119">Matches</a></li>
</ul>
</li>
<li><a href="#feature-method">Feature method</a><ul>
<li><a href="#derivations_79">Derivations</a></li>
<li><a href="#specification_120">Specification</a></li>
<li><a href="#example_120">Example</a></li>
<li><a href="#matches_120">Matches</a></li>
</ul>
</li>
<li><a href="#feature-instance_methodclass_methodstatic_method">Feature instance_method|class_method|static_method</a><ul>
<li><a href="#derivations_80">Derivations</a></li>
<li><a href="#specification_121">Specification</a></li>
<li><a href="#example_121">Example</a></li>
<li><a href="#matches_121">Matches</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#modules">Modules</a><ul>
<li><a href="#feature-import_module">Feature import_module</a><ul>
<li><a href="#derivations_81">Derivations</a></li>
<li><a href="#specification_122">Specification</a></li>
<li><a href="#example_122">Example</a></li>
<li><a href="#matches_122">Matches</a></li>
</ul>
</li>
<li><a href="#feature-import_name">Feature import_name</a><ul>
<li><a href="#derivations_82">Derivations</a></li>
<li><a href="#specification_123">Specification</a></li>
<li><a href="#example_123">Example</a></li>
<li><a href="#matches_123">Matches</a></li>
</ul>
</li>
<li><a href="#feature-import">Feature import</a><ul>
<li><a href="#derivations_83">Derivations</a></li>
<li><a href="#specification_124">Specification</a></li>
<li><a href="#example_124">Example</a></li>
<li><a href="#matches_124">Matches</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#iterative-patterns">Iterative patterns</a><ul>
<li><a href="#loops">Loops</a><ul>
<li><a href="#feature-count_elementscount_states">Feature count_elements|count_states</a><ul>
<li><a href="#derivations_84">Derivations</a></li>
<li><a href="#specification_125">Specification</a></li>
<li><a href="#example_125">Example</a></li>
<li><a href="#matches_125">Matches</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#sequential-loops_1">Sequential loops</a><ul>
<li><a href="#sequential-loops-with-late-exit">Sequential loops with late exit</a><ul>
<li><a href="#feature-accumulate_elements">Feature accumulate_elements</a><ul>
<li><a href="#derivations_85">Derivations</a></li>
<li><a href="#specification_126">Specification</a></li>
<li><a href="#example_126">Example</a></li>
<li><a href="#matches_126">Matches</a></li>
</ul>
</li>
<li><a href="#feature-accumulate_some_elements">Feature accumulate_some_elements</a><ul>
<li><a href="#derivations_86">Derivations</a></li>
<li><a href="#specification_127">Specification</a></li>
<li><a href="#example_127">Example</a></li>
<li><a href="#matches_127">Matches</a></li>
</ul>
</li>
<li><a href="#feature-accumulate_all_elements">Feature accumulate_all_elements</a><ul>
<li><a href="#derivations_87">Derivations</a></li>
<li><a href="#specification_128">Specification</a></li>
<li><a href="#example_128">Example</a></li>
<li><a href="#matches_128">Matches</a></li>
</ul>
</li>
<li><a href="#feature-find_best_element">Feature find_best_element</a><ul>
<li><a href="#derivations_88">Derivations</a></li>
<li><a href="#specification_129">Specification</a></li>
<li><a href="#example_129">Example</a></li>
<li><a href="#matches_129">Matches</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#sequential-loops-with-early-exit">Sequential loops with early exit</a><ul>
<li><a href="#feature-universal_quantificationexistential_quantification">Feature universal_quantification|existential_quantification</a><ul>
<li><a href="#derivations_89">Derivations</a></li>
<li><a href="#specification_130">Specification</a></li>
<li><a href="#example_130">Example</a></li>
<li><a href="#matches_130">Matches</a></li>
</ul>
</li>
<li><a href="#feature-find_first_element">Feature find_first_element</a><ul>
<li><a href="#derivations_90">Derivations</a></li>
<li><a href="#specification_131">Specification</a></li>
<li><a href="#example_131">Example</a></li>
<li><a href="#matches_131">Matches</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#non-sequential-loops_1">Non-sequential loops</a><ul>
<li><a href="#non-sequential-infinite-loops">Non-sequential infinite loops</a><ul>
<li><a href="#feature-get_valid_input">Feature get_valid_input</a><ul>
<li><a href="#derivations_91">Derivations</a></li>
<li><a href="#specification_132">Specification</a></li>
<li><a href="#example_132">Example</a></li>
<li><a href="#matches_132">Matches</a></li>
</ul>
</li>
<li><a href="#feature-count_inputs">Feature count_inputs</a><ul>
<li><a href="#derivations_92">Derivations</a></li>
<li><a href="#specification_133">Specification</a></li>
<li><a href="#example_133">Example</a></li>
<li><a href="#matches_133">Matches</a></li>
</ul>
</li>
<li><a href="#feature-accumulate_inputs">Feature accumulate_inputs</a><ul>
<li><a href="#derivations_93">Derivations</a></li>
<li><a href="#specification_134">Specification</a></li>
<li><a href="#example_134">Example</a></li>
<li><a href="#matches_134">Matches</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#programs">Programs</a><ul>
<li><a href="#feature-whole_span">Feature whole_span</a><ul>
<li><a href="#specification_135">Specification</a></li>
<li><a href="#example_135">Example</a></li>
<li><a href="#matches_135">Matches</a></li>
</ul>
</li>
<li><a href="#feature-topic">Feature topic</a><ul>
<li><a href="#specification_136">Specification</a></li>
<li><a href="#example_136">Example</a></li>
<li><a href="#matches_136">Matches</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#suggestions">Suggestions</a><ul>
<li><a href="#assignments">Assignments</a><ul>
<li><a href="#feature-suggest_augmented_assignment">Feature suggest_augmented_assignment</a><ul>
<li><a href="#specification_137">Specification</a></li>
<li><a href="#example_137">Example</a></li>
<li><a href="#matches_137">Matches</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#expressions_1">Expressions</a><ul>
<li><a href="#feature-suggest_comparison_chaining">Feature suggest_comparison_chaining</a><ul>
<li><a href="#specification_138">Specification</a></li>
<li><a href="#example_138">Example</a></li>
<li><a href="#matches_138">Matches</a></li>
</ul>
</li>
<li><a href="#feature-suggest_constant_definition">Feature suggest_constant_definition</a><ul>
<li><a href="#specification_139">Specification</a></li>
<li><a href="#example_139">Example</a></li>
<li><a href="#matches_139">Matches</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#subroutines">Subroutines</a><ul>
<li><a href="#feature-suggest_condition_return">Feature suggest_condition_return</a><ul>
<li><a href="#specification_140">Specification</a></li>
<li><a href="#example_140">Example</a></li>
<li><a href="#matches_140">Matches</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="paroxython" href="../index.html">paroxython</a></code></li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p><span style="color:#ddd">&#21328;</span></p>
<p>Generated by <a href="https://pdoc3.github.io/pdoc"><cite>pdoc</cite> 0.8.1</a>.</p>
</footer>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad()</script>
</body>
</html>
